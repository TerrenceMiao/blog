<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Veni, vidi, vici"><title>Setup Lambda migrate &amp; sync AWS DynamoDB to new table | Terrence Miao's Adventures</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/blog/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/blog/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/blog/favicon.ico"><link rel="bookmark" href="/blog/favicon.ico"><link rel="apple-touch-icon" href="/blog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/blog/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/blog/atom.xml"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
     google_ad_client: "ca-pub-7274218747178099",
     enable_page_level_ads: true
});
</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Setup Lambda migrate &amp; sync AWS DynamoDB to new table</h1><a id="logo" href="/blog/.">Terrence Miao's Adventures</a><p class="description">A journey of a thousand miles begins with a single step</p></div><div id="nav-menu"><a href="/blog/." class="current"><i class="fa fa-home"> Home</i></a><a href="/blog/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/blog/about/"><i class="fa fa-user"> About</i></a><a href="/blog/atom.xml"><i class="fa fa-rss"> RSS</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Setup Lambda migrate &amp; sync AWS DynamoDB to new table</h1><div class="post-meta"><a href="/blog/2018/10/24/Setup-Lambda-function-sync-AWS-DynamoDB-to-a-new-table/#comments" class="comment-count"><i data-disqus-identifier="2018/10/24/Setup-Lambda-function-sync-AWS-DynamoDB-to-a-new-table/" class="disqus-comment-count"></i>Guestbook</a><p><span class="date">Oct 24, 2018</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>Hits</i></i></span></p></div><div class="post-content"><p>AWS DynamoDB is a good persistence solution for a specific solution. However, it’s not for a growing and changing application that could need new indexes and queries for its ever expanding features at any time. At this moment it is where the flexibility and speed of a relational database really shined through.</p>
<p>Now, a DynamoDB table with Consumers Preferences data urgently needs to update:</p>
<ul>
<li>RENAME one EXISTING attribute</li>
<li>ADD a new attribute</li>
<li>SET a value in the new attribute for ALL EXISTING items in DynamoDB’s new table</li>
</ul>
<p><img src="/blog/img/DynamoDB%20Table.png" alt="AWS DynamoDB Table" title="AWS DynamoDB Table"></p>
<p>AWS lambda function plays handy here to migrate data, and sync <strong>newly inserted</strong>, <strong>modified / updated</strong>, <strong>deleted</strong> items between existing and new DynamoDB tables.</p>
<ul>
<li>Create new DynamoDB table</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> aws dynamodb create-table \</span></span><br><span class="line">    --table-name userpreferences-ptest-02-USER_PREFERENCESV2 \</span><br><span class="line">    --attribute-definitions AttributeName=id,AttributeType=S AttributeName=preferenceType,AttributeType=S \</span><br><span class="line">    --key-schema AttributeName=id,KeyType=HASH  AttributeName=preferenceType,KeyType=RANGE \</span><br><span class="line">    --provisioned-throughput ReadCapacityUnits=100,WriteCapacityUnits=100</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    "TableDescription": &#123;</span><br><span class="line">        "TableArn": "arn:aws:dynamodb:ap-southeast-2:123456789012:table/userpreferences-ptest-02-USER_PREFERENCESV2",</span><br><span class="line">        "AttributeDefinitions": [</span><br><span class="line">            &#123;</span><br><span class="line">                "AttributeName": "id",</span><br><span class="line">                "AttributeType": "S"</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                "AttributeName": "preferenceType",</span><br><span class="line">                "AttributeType": "S"</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        "ProvisionedThroughput": &#123;</span><br><span class="line">            "NumberOfDecreasesToday": 0,</span><br><span class="line">            "WriteCapacityUnits": 100,</span><br><span class="line">            "ReadCapacityUnits": 100</span><br><span class="line">        &#125;,</span><br><span class="line">        "TableSizeBytes": 0,</span><br><span class="line">        "TableName": "userpreferences-ptest-02-USER_PREFERENCESV2",</span><br><span class="line">        "TableStatus": "CREATING",</span><br><span class="line">        "TableId": "d116efdc-1234-5678-90ab-011de3e124fe",</span><br><span class="line">        "KeySchema": [</span><br><span class="line">            &#123;</span><br><span class="line">                "KeyType": "HASH",</span><br><span class="line">                "AttributeName": "id"</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                "KeyType": "RANGE",</span><br><span class="line">                "AttributeName": "preferenceType"</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        "ItemCount": 0,</span><br><span class="line">        "CreationDateTime": 1540273906.1059999</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Migrate-Data"><a href="#Migrate-Data" class="headerlink" title="Migrate Data"></a>Migrate Data</h2><ul>
<li>Create Migrate Data Lambda function</li>
</ul>
<p><img src="/blog/img/DynamoDB%20Lambda%20Migrate.png" alt="AWS DynamoDB Lambda Migrate" title="AWS DynamoDB Lambda Migrate"></p>
<p>Increase Memory and Runtime Timeout <em><a href="https://docs.aws.amazon.com/lambda/latest/dg/limits.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/lambda/latest/dg/limits.html</a></em> in case of execution pre-maturely ended without finishing the migration. Furthermore, in case of overcharging DynamoDB due to its limits <em><a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Limits.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Limits.html</a></em> add time delay in Lambda function.</p>
<p><strong>migrate.js</strong></p>
<script src="https://gist.github.com/TerrenceMiao/1a35793e951786b3fb8998e7d067bb0e.js"></script>

<ul>
<li>Add AWS DynamoDB Lambda execution role</li>
</ul>
<p><img src="/blog/img/DynamoDB%20Lambda%20Role.png" alt="AWS DynamoDB Lambda Execution Role" title="AWS DynamoDB Lambda Execution Role"></p>
<p><strong>userpreferences-ptest-02-migrateRole</strong></p>
<script src="https://gist.github.com/TerrenceMiao/efc13c16267430ee867b239a11fdc486.js"></script>

<ul>
<li>Create a simple test event that can kick off function</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"key1"</span>: <span class="string">"value1"</span>,</span><br><span class="line">  <span class="attr">"key2"</span>: <span class="string">"value2"</span>,</span><br><span class="line">  <span class="attr">"key3"</span>: <span class="string">"value3"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Trigger run the function. Should see the data migrated from existing DynamoDB table into new table.</p>
<p>Log can be found at AWS CloudWatch Log Groups <strong>/aws/lambda/userpreferences-ptest-02-migrate</strong></p>
<h2 id="Sync-Data"><a href="#Sync-Data" class="headerlink" title="Sync Data"></a>Sync Data</h2><ul>
<li>Enable Stream on the existing DynamoDB table</li>
</ul>
<p><img src="/blog/img/DynamoDB%20Stream%20Enabled.png" alt="AWS DynamoDB Stream Enabled" title="AWS DynamoDB Stream Enabled"></p>
<ul>
<li>Add a new trigger for DynamoDB table</li>
</ul>
<p><img src="/blog/img/DynamoDB%20Triggers.png" alt="AWS DynamoDB Triggers" title="AWS DynamoDB Triggers"></p>
<ul>
<li>Create a new Lambda function linked to trigger</li>
</ul>
<p><img src="/blog/img/DynamoDB%20Lambda%20Sync.png" alt="AWS DynamoDB Lambda Sync" title="AWS DynamoDB Lambda Sync"></p>
<p><strong>sync.js</strong></p>
<script src="https://gist.github.com/TerrenceMiao/7346fc986e3b7999ef205dde6f203eaa.js"></script>

<ul>
<li>Trigger Testing</li>
</ul>
<p>AWS Lambda built-in test can test trigger:</p>
<p><img src="/blog/img/DynamoDB%20Lambda%20Test%20Event.png" alt="AWS DynamoDB Lambda Test Event" title="AWS DynamoDB Lambda Test Event"></p>
<script src="https://gist.github.com/TerrenceMiao/f0c9b24265143d03e23e83787a7a102a.js"></script>

<ul>
<li>Logging</li>
</ul>
<p>Lambda function log can be found on AWS CloudWatch Log Groups <strong>/aws/lambda/userpreferences-ptest-02-sync</strong></p>
<p><img src="/blog/img/DynamoDB%20CloudWatch%20Logging.png" alt="AWS DynamoDB CloudWatch Logging" title="AWS DynamoDB CloudWatch Logging"></p>
<h2 id="Counter-Data"><a href="#Counter-Data" class="headerlink" title="Counter Data"></a>Counter Data</h2><p>This Lambda function can count the number of items in DynamoDB table.</p>
<p><strong>counter.js</strong></p>
<script src="https://gist.github.com/TerrenceMiao/3d6af3de8ba07e5bdfbb785667117dc3.js"></script>


<p>Async call, callback and Non-blocking, it’s very hard implement so in every applications. In addition, reject promises or async functions, don’t handle them with a catch, NodeJS will raise a warning. In a large complex applications with lots of async, having a single unhandled promise or await function terminate NodeJS, or have to handle them with try and catch in every place (spaghetti code again?) would be very bad.</p>
<p>An example of AWS DynamoDB error:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">2018-11-14T02:20:50.742Z	715f18fb-e7b3-11e8-b5c4-d75f9089dd50	Error thrown: &#123; ProvisionedThroughputExceededException: The level of configured provisioned throughput for the table was exceeded. Consider increasing your provisioning level with the UpdateTable API.</span><br><span class="line">at Request.extractError (/var/runtime/node_modules/aws-sdk/lib/protocol/json.js:48:27)</span><br><span class="line">at Request.callListeners (/var/runtime/node_modules/aws-sdk/lib/sequential_executor.js:105:20)</span><br><span class="line">at Request.emit (/var/runtime/node_modules/aws-sdk/lib/sequential_executor.js:77:10)</span><br><span class="line">at Request.emit (/var/runtime/node_modules/aws-sdk/lib/request.js:683:14)</span><br><span class="line">at Request.transition (/var/runtime/node_modules/aws-sdk/lib/request.js:22:10)</span><br><span class="line">at AcceptorStateMachine.runTo (/var/runtime/node_modules/aws-sdk/lib/state_machine.js:14:12)</span><br><span class="line">at /var/runtime/node_modules/aws-sdk/lib/state_machine.js:26:10</span><br><span class="line">at Request.&lt;anonymous&gt; (/var/runtime/node_modules/aws-sdk/lib/request.js:38:9)</span><br><span class="line">at Request.&lt;anonymous&gt; (/var/runtime/node_modules/aws-sdk/lib/request.js:685:12)</span><br><span class="line">at Request.callListeners (/var/runtime/node_modules/aws-sdk/lib/sequential_executor.js:115:18)</span><br><span class="line">message: 'The level of configured provisioned throughput for the table was exceeded. Consider increasing your provisioning level with the UpdateTable API.',</span><br><span class="line">code: 'ProvisionedThroughputExceededException',</span><br><span class="line">time: 2018-11-14T02:20:50.687Z,</span><br><span class="line">requestId: 'C38MODOISAJEGTVPI2ISOPFGDBVV4KQNSO5AEMVJF66Q9ASUAAJG',</span><br><span class="line">statusCode: 400,</span><br><span class="line">retryable: true &#125;</span><br></pre></td></tr></table></figure>
<p>AWS example doesn’t throw the error in the catch block, it returns error instead, so any errors end up in the catch block. And return promises early and use Promise.all() method.</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li>DynamoDB: Changing table schema, <em><a href="https://www.abhayachauhan.com/2018/01/dynamodb-changing-table-schema/" target="_blank" rel="noopener">https://www.abhayachauhan.com/2018/01/dynamodb-changing-table-schema/</a></em></li>
<li>Tutorial: Processing New Items in a DynamoDB Table, <em><a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.Lambda.Tutorial.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.Lambda.Tutorial.html</a></em></li>
<li>How to escape async/await hell, <em><a href="https://medium.freecodecamp.org/avoiding-the-async-await-hell-c77a0fb71c4c" target="_blank" rel="noopener">https://medium.freecodecamp.org/avoiding-the-async-await-hell-c77a0fb71c4c</a></em></li>
<li>Node.js 8.10 runtime now available in AWS Lambda, <em><a href="https://aws.amazon.com/blogs/compute/node-js-8-10-runtime-now-available-in-aws-lambda/" target="_blank" rel="noopener">https://aws.amazon.com/blogs/compute/node-js-8-10-runtime-now-available-in-aws-lambda/</a></em></li>
</ul>
</div><div class="tags"></div><div class="post-share"></div><div class="post-nav"><a href="/blog/2018/11/06/After-new-Macbook-Air-Mac-Mini-iPad-Pro-2018/" class="pre">After new Macbook Air, Mac Mini, iPad Pro 2018</a><a href="/blog/2018/10/13/Apple-Designs-That-Inspire/" class="next">Apple Designs That Inspire / 吐槽苹果</a></div><div id="comments"><div id="disqus_thread"></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">Contents</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Migrate-Data"><span class="toc-text">Migrate Data</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sync-Data"><span class="toc-text">Sync Data</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Counter-Data"><span class="toc-text">Counter Data</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#References"><span class="toc-text">References</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/2020/10/26/Risk-Management-for-CI-CD-processes/">Risk Management for CI/CD processes</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2020/10/13/AWS-CloudWatch-Metrics-example/">AWS CloudWatch Metrics Example</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2020/02/14/Creating-AWS-Lambda-with-AWS-SAM/">Creating AWS Lambda with AWS SAM</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/12/29/2019-Year-in-Review/">2019: Year in Review</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/12/07/AWS-EKS-on-Fargate-with-eksctl/">AWS EKS for Fargate, with eksctl</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/12/05/AWS-EKS-with-Fargate/">AWS EKS for Fargate</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/12/01/Why-React/">Why React?</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/11/28/A-PC-person-s-guide-to-Mac/">A PC person's guide to Mac</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/11/22/Run-ssh-and-scp-with-AWS-Session-Manager/">Run ssh and scp with AWS Session Manager</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/04/23/A-simple-approach-to-export-import-AWS-DynamoDB-table-items/">A simple approach to export / import AWS DynamoDB table items</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-commt"> Recent Comments</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> Tags</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> Archive</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/01/">January 2017</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/blog/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/blog/atom.xml">RSS</a> |  <a href="/blog/about/">About</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/blog/." rel="nofollow">Terrence Miao.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-29903050-1','auto');ga('send','pageview');
</script><script type="text/javascript" src="/blog/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/blog/js/toctotop.js?v=2.0.1" async></script><script>var disqus_shortname = 'terrencemiao';
var disqus_identifier = '2018/10/24/Setup-Lambda-function-sync-AWS-DynamoDB-to-a-new-table/';
var disqus_title = 'Setup Lambda migrate &amp; sync AWS DynamoDB to new table';
var disqus_url = 'https://terrencemiao.github.io/blog/2018/10/24/Setup-Lambda-function-sync-AWS-DynamoDB-to-a-new-table/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//terrencemiao.disqus.com/count.js" async></script><script type="text/javascript" src="//terrencemiao.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></body></html>