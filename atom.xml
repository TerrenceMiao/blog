<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Terrence Miao&#39;s Adventures</title>
  
  <subtitle>A journey of a thousand miles begins with a single step</subtitle>
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="https://terrencemiao.github.io/blog/"/>
  <updated>2021-04-30T09:27:27.484Z</updated>
  <id>https://terrencemiao.github.io/blog/</id>
  
  <author>
    <name>Terrence Miao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>AWS KMS decrypt for base64 encoded input</title>
    <link href="https://terrencemiao.github.io/blog/2021/04/30/AWS-KMS-decrypt-for-base64-encoded-input/"/>
    <id>https://terrencemiao.github.io/blog/2021/04/30/AWS-KMS-decrypt-for-base64-encoded-input/</id>
    <published>2021-04-30T09:22:55.000Z</published>
    <updated>2021-04-30T09:27:27.484Z</updated>
    
    <content type="html"><![CDATA[<p>With AWS CLI version 2:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ aws --version</span><br><span class="line">aws-cli/2.1.17 Python/3.7.4 Darwin/20.3.0 exe/x86_64 prompt/off</span><br></pre></td></tr></table></figure><p>Encrypt with AWS KMS key:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ aws kms encrypt --profile personal --key-id e2695b79-cbe0-4c16-aa5e-b7dbf52df1f9 --plaintext "string-to-encrypt" --output text --query CiphertextBlob --cli-binary-format raw-in-base64-out</span><br><span class="line">AQICAHjbJrIPgME ... lILuBSUdA==</span><br></pre></td></tr></table></figure><p>Decrypt with AWS KMS key:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ echo "AQICAHjbJrIPgME ... lILuBSUdA==" | base64 -D | aws kms decrypt --profile personal --ciphertext-blob fileb:///dev/stdin --output text --query Plaintext | base64 -D</span><br></pre></td></tr></table></figure><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li>cli_binary_format, _<a href="https://docs.aws.amazon.com/credref/latest/refdocs/setting-global-cli_binary_format.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/credref/latest/refdocs/setting-global-cli_binary_format.html</a>_</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;With AWS CLI version 2:&lt;/p&gt;
&lt;figure class=&quot;highlight console&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span cla
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>A Modern Architecture Application</title>
    <link href="https://terrencemiao.github.io/blog/2021/03/02/A-Modern-Architecture-Application/"/>
    <id>https://terrencemiao.github.io/blog/2021/03/02/A-Modern-Architecture-Application/</id>
    <published>2021-03-02T05:55:13.000Z</published>
    <updated>2021-03-02T23:32:00.200Z</updated>
    
    <content type="html"><![CDATA[<p>RAD (Rapid Application Development) of a Serverless application ‚ÄúNotification Service‚Äù on modern technologies, e.g. <code>AWS CDK</code> &amp; <code>SAM</code>, <code>AWS Step Functions</code>, <code>TypeScript</code>, <code>VS Code</code>, Open API Top Down Design and Test Driven Development, in order to rapidly build a prototype, or a POC, verify and test some technologies and approaches.</p><p>Request Handler =&gt; Step Functions (orchestration for Lambda functions, represents a single centralized executable business process, outsources low level operations like <strong>retry</strong> / <strong>exception catch and handle</strong>. Another choice is SNS) =&gt; Service Providers</p><p>Have experienced of <code>Terraform</code>, <code>Serverless</code>, <code>AWS SAM</code> ‚Ä¶ now this time based on code over configuration principle, what you get is flexibility, predictability and more control. You focus on code you tell the tools what steps it has to complete directly. At the end of day, it is a simple matter of separation of concerns and single responsibility principle.</p><p>‚Ä¢ <code>VS Code</code> for API Spec editing</p><p>‚Ä¢ <code>Postman</code> API, Environment and Mock server, for QA team, then switch to real service in DEV/TEST environment</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ npm run openapi</span><br></pre></td></tr></table></figure><p>‚Ä¢ <code>openapi-generator</code> generates model classes; <code>typescript-json-validator</code> generates JSON Schema and validator</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ openapi-generator generate -g typescript-node -i Notification\ API\ openapi.json -o Notification\ API\ generated</span><br><span class="line">ùúÜ npx typescript-json-validator notificationRequest.ts NotificationRequest</span><br></pre></td></tr></table></figure><p>‚Ä¢ Onboard on Kong / API Manager, <em><a href="https://konghq.com/kong/" target="_blank" rel="noopener">https://konghq.com/kong/</a></em></p><p>‚Ä¢ <code>CDK</code>, is based on CloudFormation but abstract layer on the top of it. It can generates CloudFormation template file <code>template.yaml</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ cdk synth --no-staging &gt; template.yaml</span><br></pre></td></tr></table></figure><p>‚Ä¢ Demo of local run and debug lambda, with background TSC watch process</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ npm run watch</span><br><span class="line"></span><br><span class="line">ùúÜ sam local invoke RequestNotification9F9F3C31 -e samples/api-gateway-notification-event.json</span><br><span class="line">ùúÜ sam local invoke RequestNotification9F9F3C31 -e samples/api-gateway-notification-event.json -d 5858</span><br></pre></td></tr></table></figure><p>Data validation to make data integrity unbreachable will take a lot time.</p><p><code>ajv</code> framework and performance benchmark, <em><a href="https://github.com/ebdrup/json-schema-benchmark" target="_blank" rel="noopener">https://github.com/ebdrup/json-schema-benchmark</a></em></p><p>‚Ä¢ Code lint with <code>eslint</code> and <code>prettier</code> and automatically correction</p><p>‚Ä¢ Code commit rule enforcement</p><p>‚Ä¢ Change code and deploy AWS stack by <code>CDK</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ cdk deploy --require-approval never --profile dev-cicd</span><br></pre></td></tr></table></figure><p>‚Ä¢ Behavior Driven Test Framework Jest, <em><a href="https://github.com/facebook/jest" target="_blank" rel="noopener">https://github.com/facebook/jest</a></em>, 2x / 3x faster than Karma, with code coverage, easy mocking</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ npm t</span><br></pre></td></tr></table></figure><p>‚Ä¢ Automatically generate application changelog and release notes</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ npm run release:minor</span><br></pre></td></tr></table></figure><p>‚Ä¢ Automatically generate application document</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ npm run docs</span><br></pre></td></tr></table></figure><p>‚Ä¢ AWS resources created by <code>CDK</code></p><p>‚Ä¢ Not Mono Repo app, which multiple projects all under one giant Repo</p><p>‚Ä¢ ONE <code>AWS Layers</code> put all dependent NPM libs and shared code into; size of Lambda functions, readability</p><p>‚Ä¢ <code>AWS EventBridge</code> tro trigger and send event to Request Handler, for scheduling task</p><p>‚Ä¢ Health Check, with Service Monitoring Dashboard, verify dependencies at the endpoints, keep Lambda warming up</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ curl https://c81234xdae8w1a9.execute-api.ap-southeast-2.amazonaws.com/health</span><br></pre></td></tr></table></figure><p>Cloud computing and Serverless architecture let developers in fast lane for Application Development. Right now, there are so many low hanging fruit to pick up.</p><p>As developers, we should not always think about our comfort zone, we need to think about people who take over your work, think about BAU team to support the application. The codebase is not about you, but about the value that your code brings to others, and the organization that you work for.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;RAD (Rapid Application Development) of a Serverless application ‚ÄúNotification Service‚Äù on modern technologies, e.g. &lt;code&gt;AWS CDK&lt;/code&gt; 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Why Repairable Is Important</title>
    <link href="https://terrencemiao.github.io/blog/2020/11/30/Why-Repairable-Is-Important/"/>
    <id>https://terrencemiao.github.io/blog/2020/11/30/Why-Repairable-Is-Important/</id>
    <published>2020-11-30T00:38:56.000Z</published>
    <updated>2020-11-30T00:45:26.658Z</updated>
    
    <content type="html"><![CDATA[<p>Fix our destructive and throwaway economy, save our planet by making products both repairable, durable, environmentally friendly, and by defending our Right to Repair.</p><iframe width="560" height="315" src="https://www.youtube.com/embed/qSmFI6J7eRo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p>This is my second video created and composed by Apple Final Cut Pro X - Why Repairable Is Important <a href="https://www.youtube.com/watch?v=qSmFI6J7eRo" target="_blank" rel="noopener">https://www.youtube.com/watch?v=qSmFI6J7eRo</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Fix our destructive and throwaway economy, save our planet by making products both repairable, durable, environmentally friendly, and by 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Bring back MagSafe</title>
    <link href="https://terrencemiao.github.io/blog/2020/11/25/Bring-back-MagSafe/"/>
    <id>https://terrencemiao.github.io/blog/2020/11/25/Bring-back-MagSafe/</id>
    <published>2020-11-25T00:08:16.000Z</published>
    <updated>2020-11-25T00:25:02.085Z</updated>
    
    <content type="html"><![CDATA[<p>My first published video, created by Apple Final Cut Pro, on YouTube for official channel title <strong>Bring back MagSafe</strong> regard to solution that bring one of the most innovative design from Apple, back to MacBook Pro, iPad ‚Ä¶ and Android phones <a href="https://www.youtube.com/watch?v=yvkJR4Y0FK0" target="_blank" rel="noopener">https://www.youtube.com/watch?v=yvkJR4Y0FK0</a></p><iframe width="560" height="315" src="https://www.youtube.com/embed/yvkJR4Y0FK0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><ul><li><p>WSKEN SHARK X4 TYPE-C TO TYPE-C PD 100W QUICK CHARGE MAGNETIC CABLE: <a href="http://wsken.my/WSKEN-Shark-X4-Type-C-To-Type-C-PD-100W-Quick-Charge-Magnetic-Cable" target="_blank" rel="noopener">http://wsken.my/WSKEN-Shark-X4-Type-C-To-Type-C-PD-100W-Quick-Charge-Magnetic-Cable</a></p></li><li><p>WSKEN SHARK X5 TYPE-C 5A QUICK CHARGE MAGNETIC CABLE: <a href="http://wsken.my/WSKEN-Shark-X5-Type-C-5A-Quick-Charge-Magnetic-Cable" target="_blank" rel="noopener">http://wsken.my/WSKEN-Shark-X5-Type-C-5A-Quick-Charge-Magnetic-Cable</a></p></li><li><p>WSKEN Official Store on AliExpress: <a href="https://www.aliexpress.com/store/3018058" target="_blank" rel="noopener">https://www.aliexpress.com/store/3018058</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;My first published video, created by Apple Final Cut Pro, on YouTube for official channel title &lt;strong&gt;Bring back MagSafe&lt;/strong&gt; regar
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Risk Management for CI/CD processes</title>
    <link href="https://terrencemiao.github.io/blog/2020/10/26/Risk-Management-for-CI-CD-processes/"/>
    <id>https://terrencemiao.github.io/blog/2020/10/26/Risk-Management-for-CI-CD-processes/</id>
    <published>2020-10-26T05:55:13.000Z</published>
    <updated>2020-10-26T06:57:07.737Z</updated>
    
    <content type="html"><![CDATA[<p>Consider a full development and deployment cycle, and the potential risks involved during the different stages in CDP (CI / Continuous Integration, CD / Continuous Delivery, CDP / Continuous Deployment):</p><ul><li>Code</li></ul><table><thead><tr><th>Role</th><th>Details</th></tr></thead><tbody><tr><td>Stakeholders</td><td>Individual Developer</td></tr><tr><td></td><td>Pair Programming Mentor</td></tr><tr><td></td><td>DBA</td></tr><tr><td></td><td>Security Team</td></tr><tr><td>Failure Points</td><td>Logic flaws</td></tr><tr><td></td><td>Security flaws</td></tr><tr><td></td><td>Code standards issues</td></tr><tr><td>Safeguards</td><td>Test Driven Development</td></tr><tr><td></td><td>Red/Green/Refactor</td></tr><tr><td></td><td>Linting tools</td></tr><tr><td></td><td>Testing Docker containers</td></tr><tr><td></td><td>Pair programming</td></tr><tr><td></td><td>Query analysis</td></tr><tr><td></td><td>Static code analysis</td></tr></tbody></table><ul><li>Commit</li></ul><table><thead><tr><th>Role</th><th>Details</th></tr></thead><tbody><tr><td>Stakeholders</td><td>Security Team Member for sign-off</td></tr><tr><td></td><td>Engineering Team Lead for sign-off</td></tr><tr><td>Failure Points</td><td>Force pushes</td></tr><tr><td></td><td>Merge conflicts</td></tr><tr><td>Safeguards</td><td>Master branch protections</td></tr><tr><td></td><td>3 member sign-off before master merge</td></tr><tr><td></td><td>Commit hooks</td></tr></tbody></table><ul><li>Test</li></ul><table><thead><tr><th>Role</th><th>Details</th></tr></thead><tbody><tr><td>Stakeholders</td><td>Individual Developer</td></tr><tr><td></td><td>QA Team</td></tr><tr><td>Failure Points</td><td>Broken tests</td></tr><tr><td></td><td>Stale tests</td></tr><tr><td></td><td>False positive tests</td></tr><tr><td>Safeguards</td><td>Weekly failure testing triage meeting to catch broken tests</td></tr><tr><td></td><td>Daily cron runs of test suite against mock prod environment</td></tr></tbody></table><ul><li>Deployment</li></ul><table><thead><tr><th>Role</th><th>Details</th></tr></thead><tbody><tr><td>Stakeholders</td><td>SysOps Team</td></tr><tr><td></td><td>Individual Developers</td></tr><tr><td></td><td>Support Team</td></tr><tr><td></td><td>Customers</td></tr><tr><td>Failure Points</td><td>Broken deployments</td></tr><tr><td></td><td>Dropped customer traffic</td></tr><tr><td>Safeguards</td><td>Blue/Green deployment</td></tr><tr><td></td><td>Traffic re-routing</td></tr><tr><td></td><td>Pre deployment spare instance warmup</td></tr><tr><td></td><td>Communicate out to support in order to verify proper staffing levels</td></tr></tbody></table><ul><li>Runtime</li></ul><table><thead><tr><th>Role</th><th>Details</th></tr></thead><tbody><tr><td>Stakeholders</td><td>Security Team</td></tr><tr><td></td><td>SysOps Team</td></tr><tr><td></td><td>Engineering Teams</td></tr><tr><td></td><td>Support Team</td></tr><tr><td></td><td>Customers</td></tr><tr><td>Failure Points</td><td>High resource usage</td></tr><tr><td></td><td>Slow queries</td></tr><tr><td></td><td>Malicious actors</td></tr><tr><td></td><td>MProvider downtime</td></tr><tr><td>Safeguards</td><td>Communicate out to support for new feature awareness and appropriate categories for issues regarding the component</td></tr><tr><td></td><td>System resource alarms for various metrics and slow DB log alerts</td></tr><tr><td></td><td>Instant maintenance page switchover capabilities</td></tr><tr><td></td><td>Status page on redundant providers</td></tr><tr><td></td><td>Application firewalls</td></tr><tr><td></td><td>Database replicas</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Consider a full development and deployment cycle, and the potential risks involved during the different stages in CDP (CI / Continuous In
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>AWS CloudWatch Metrics Example</title>
    <link href="https://terrencemiao.github.io/blog/2020/10/13/AWS-CloudWatch-Metrics-example/"/>
    <id>https://terrencemiao.github.io/blog/2020/10/13/AWS-CloudWatch-Metrics-example/</id>
    <published>2020-10-13T12:29:39.000Z</published>
    <updated>2020-10-13T12:41:28.873Z</updated>
    
    <content type="html"><![CDATA[<h2 id="AWS-CloudWatch-Metrics"><a href="#AWS-CloudWatch-Metrics" class="headerlink" title="AWS CloudWatch Metrics"></a>AWS CloudWatch Metrics</h2><p>The interface of Metrics in AWS CloudWatch console:</p><p><img src="/blog/img/AWS%20CloudWatch%20-%20Metrics.png" alt="AWS CloudWatch - Metrics" title="AWS CloudWatch - Metrics"></p><p>The URL:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://ap-southeast-2.console.aws.amazon.com/cloudwatch/home?region=ap-southeast-2#metricsV2:graph=~(metrics~(~(~'AWS*2fRoute53Resolver~'InboundQueryVolume)~(~'.~'OutboundQueryVolume))~view~'timeSeries~stacked~false~region~'ap-southeast-2~stat~'Sum~period~86400~start~'-P28D~end~'P0D);query=~'*7bAWS*2fRoute53Resolver*7d</span><br></pre></td></tr></table></figure><p>Metrics source:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    "metrics": [</span><br><span class="line">        [ "AWS/Route53Resolver", "InboundQueryVolume" ],</span><br><span class="line">        [ ".", "OutboundQueryVolume" ]</span><br><span class="line">    ],</span><br><span class="line">    "view": "timeSeries",</span><br><span class="line">    "stacked": false,</span><br><span class="line">    "region": "ap-southeast-2",</span><br><span class="line">    "stat": "Sum",</span><br><span class="line">    "period": 86400,</span><br><span class="line">    "title": "Test"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;AWS-CloudWatch-Metrics&quot;&gt;&lt;a href=&quot;#AWS-CloudWatch-Metrics&quot; class=&quot;headerlink&quot; title=&quot;AWS CloudWatch Metrics&quot;&gt;&lt;/a&gt;AWS CloudWatch Metri
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Creating AWS Lambda with AWS SAM</title>
    <link href="https://terrencemiao.github.io/blog/2020/02/14/Creating-AWS-Lambda-with-AWS-SAM/"/>
    <id>https://terrencemiao.github.io/blog/2020/02/14/Creating-AWS-Lambda-with-AWS-SAM/</id>
    <published>2020-02-14T01:12:06.000Z</published>
    <updated>2020-02-15T04:53:42.412Z</updated>
    
    <content type="html"><![CDATA[<p>This is a simple Lambda with REST API and SNS enabled. Firstly, have a look the Nodejs script:</p><script src="https://gist.github.com/TerrenceMiao/7d60e5c79f9b93c362bb9a5ff40f67c3.js"></script><p>AWS SAM template yaml file:</p><script src="https://gist.github.com/TerrenceMiao/3512439f22c427e70db8cadc5cc83846.js"></script><p>Generate AWS CloudFormation yaml file and package / zip / create an artefact (need to create AWS S3 bucket <code>hello-world-tub</code> in advance):</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ sam package --profile personal --template-file template.yml --output-template-file cloudFormation.yml --s3-bucket hello-sam-tub</span><br><span class="line">Uploading to 7431f83ac979bfccc26980049807e595  1461 / 1461.0  (100.00%)</span><br><span class="line"></span><br><span class="line">Successfully packaged artifacts and wrote output template to file cloudFormation.yml.</span><br><span class="line">Execute the following command to deploy the packaged template</span><br><span class="line">sam deploy --template-file /Users/terrence/Projects/hello-sam/cloudFormation.yml --stack-name &lt;YOUR STACK NAME&gt;</span><br></pre></td></tr></table></figure><p>Can also create artefact file with <code>zip</code> command, and upload zip file into AWS S3 bucket:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ zip hello-sam.zip README.md index.js template.yml</span><br></pre></td></tr></table></figure><p>What AWS CloudFormation yaml file looks like:</p><script src="https://gist.github.com/TerrenceMiao/a0ffabc5e118b78dfb21b5cee814e44c.js"></script><p>Deploy application‚Äôs AWS CloudFormation stack with AWS SAM command:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ sam deploy --profile personal --template-file cloudFormation.yml --stack-name hello-sam --capabilities CAPABILITY_IAM</span><br><span class="line"></span><br><span class="line">Deploying with following values</span><br><span class="line">===============================</span><br><span class="line">Stack name                 : hello-sam</span><br><span class="line">Region                     : None</span><br><span class="line">Confirm changeset          : False</span><br><span class="line">Deployment s3 bucket       : None</span><br><span class="line">Capabilities               : ["CAPABILITY_IAM"]</span><br><span class="line">Parameter overrides        : &#123;&#125;</span><br><span class="line"></span><br><span class="line">Initiating deployment</span><br><span class="line">=====================</span><br><span class="line"></span><br><span class="line">Waiting for changeset to be created..</span><br><span class="line"></span><br><span class="line">CloudFormation stack changeset</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">Operation                                                                                     LogicalResourceId                                                                             ResourceType</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">+ Add                                                                                         HelloWorldFunctionHelloWorldApiPermissionProd                                                 AWS::Lambda::Permission</span><br><span class="line">+ Add                                                                                         HelloWorldFunctionRole                                                                        AWS::IAM::Role</span><br><span class="line">+ Add                                                                                         HelloWorldFunction                                                                            AWS::Lambda::Function</span><br><span class="line">+ Add                                                                                         HelloWorldTopic                                                                               AWS::SNS::Topic</span><br><span class="line">+ Add                                                                                         ServerlessRestApiDeployment79454cea13                                                         AWS::ApiGateway::Deployment</span><br><span class="line">+ Add                                                                                         ServerlessRestApiProdStage                                                                    AWS::ApiGateway::Stage</span><br><span class="line">+ Add                                                                                         ServerlessRestApi                                                                             AWS::ApiGateway::RestApi</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Changeset created successfully. arn:aws:cloudformation:ap-southeast-2:123456789012:changeSet/samcli-deploy1581737165/48e53ff2-1b50-45d8-bbfd-97652f20d967</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2020-02-15 14:26:10 - Waiting for stack create/update to complete</span><br><span class="line"></span><br><span class="line">CloudFormation events from changeset</span><br><span class="line">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">ResourceStatus                                                        ResourceType                                                          LogicalResourceId                                                     ResourceStatusReason</span><br><span class="line">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">CREATE_IN_PROGRESS                                                    AWS::SNS::Topic                                                       HelloWorldTopic                                                       Resource creation Initiated</span><br><span class="line">CREATE_COMPLETE                                                       AWS::SNS::Topic                                                       HelloWorldTopic                                                       -</span><br><span class="line">CREATE_IN_PROGRESS                                                    AWS::IAM::Role                                                        HelloWorldFunctionRole                                                Resource creation Initiated</span><br><span class="line">CREATE_COMPLETE                                                       AWS::IAM::Role                                                        HelloWorldFunctionRole                                                -</span><br><span class="line">CREATE_IN_PROGRESS                                                    AWS::Lambda::Function                                                 HelloWorldFunction                                                    Resource creation Initiated</span><br><span class="line">CREATE_COMPLETE                                                       AWS::Lambda::Function                                                 HelloWorldFunction                                                    -</span><br><span class="line">CREATE_IN_PROGRESS                                                    AWS::ApiGateway::RestApi                                              ServerlessRestApi                                                     Resource creation Initiated</span><br><span class="line">CREATE_COMPLETE                                                       AWS::ApiGateway::RestApi                                              ServerlessRestApi                                                     -</span><br><span class="line">CREATE_IN_PROGRESS                                                    AWS::Lambda::Permission                                               HelloWorldFunctionHelloWorldApiPermissionProd                         Resource creation Initiated</span><br><span class="line">CREATE_IN_PROGRESS                                                    AWS::ApiGateway::Deployment                                           ServerlessRestApiDeployment79454cea13                                 Resource creation Initiated</span><br><span class="line">CREATE_COMPLETE                                                       AWS::ApiGateway::Deployment                                           ServerlessRestApiDeployment79454cea13                                 -</span><br><span class="line">CREATE_IN_PROGRESS                                                    AWS::ApiGateway::Stage                                                ServerlessRestApiProdStage                                            Resource creation Initiated</span><br><span class="line">CREATE_COMPLETE                                                       AWS::ApiGateway::Stage                                                ServerlessRestApiProdStage                                            -</span><br><span class="line">CREATE_COMPLETE                                                       AWS::Lambda::Permission                                               HelloWorldFunctionHelloWorldApiPermissionProd                         -</span><br><span class="line">CREATE_COMPLETE                                                       AWS::CloudFormation::Stack                                            hello-sam                                                             -</span><br><span class="line">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Successfully created/updated stack - hello-sam in None</span><br></pre></td></tr></table></figure><p>NOTE: The <code>--capabilities CAPABILITY_IAM</code> option is necessary to authorise your stack to create IAM roles, which SAM applications do by default.</p><p>After application deployed, user subscribes notification will receive email titled - <strong>AWS Notification - Subscription Confirmation</strong> After confirmation, user will receive an email every time API is invoked.</p><p>Now log on AWS Console, have a look the resources this Lambda application used in CloudFormation, S3 Bucket, Lambda, IAM, SNS, CloudWatch, API Gateway.</p><p>After this Lambda application successfully deployed into AWS, you will receive an email asking whether you want to subscribe the SNS topic. You can also unsubscribe the SNS topic. You can manually test Lambda function in AWS Console.</p><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li>Creating AWS Lambda Applications With SAM by <strong>Daniel Weibel</strong>, <em><a href="https://itnext.io/creating-aws-lambda-applications-with-sam-dd13258c16dd" target="_blank" rel="noopener">https://itnext.io/creating-aws-lambda-applications-with-sam-dd13258c16dd</a></em></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;This is a simple Lambda with REST API and SNS enabled. Firstly, have a look the Nodejs script:&lt;/p&gt;
&lt;script src=&quot;https://gist.github.com/T
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>2019: Year in Review</title>
    <link href="https://terrencemiao.github.io/blog/2019/12/29/2019-Year-in-Review/"/>
    <id>https://terrencemiao.github.io/blog/2019/12/29/2019-Year-in-Review/</id>
    <published>2019-12-29T04:24:05.000Z</published>
    <updated>2019-12-31T01:38:09.720Z</updated>
    
    <content type="html"><![CDATA[<p>2019 Âπ¥ÊòØËøáÂéªÂçÅÂπ¥‰∏≠ÊúÄÂ∑ÆÁöÑ‰∏ÄÂπ¥Ôºå‰ΩÜÊàñËÆ∏‰ºöÊòØÊú™Êù•ÂçÅÂπ¥‰∏≠ÊúÄÂ•ΩÁöÑ‰∏ÄÂπ¥„ÄÇ</p><p><img src="/blog/img/Year%202019%20-%2001.jpg" alt="Year 2019 - 01" title="Year 2019 - 01"></p><p>Âõæ 1ÔºöËøô‰∏çÊòØ‰º†ËØ¥ÔºåËøôÊòØ reality.</p><p>1 Êúà 24 Êó•ÔºåÊúâËá™Â™í‰ΩìÂèëÂá∫ËØÅÁõë‰ºö‰∫∫‰∫ãÂèòÂä®ÁöÑ‚ÄúËôöÂÅá‚ÄùÊ∂àÊÅØÔºåÂºïËµ∑ÂÖ≥Ê≥®„ÄÇ‰∏≠ÂõΩËØÅÁõë‰ºöÊúâÂÖ≥‰∫∫Â£´ÊåáÂá∫ÔºåËá™Â™í‰Ωì‰∏çÊòØÊ≥ïÂ§ñ‰πãÂú∞ÔºåÂØπ‰∫é‰∏çË¥üË¥£‰ªªÁöÑËôöÂÅá‰ø°ÊÅØ‰º†Êí≠ÔºåÂ∫îÂΩì‰æùÊ≥ï‰æùËßÑÂ§ÑÁêÜ„ÄÇ</p><p>1 Êúà 26 Êó•Ôºå‰∏≠ÂõΩÂÆòÊñπÂÆ£Â∏ÉË¥üË¥£ËÇ°Â∏ÇÁõëÁÆ°ÁöÑ‰∏≠ÂõΩËØÅÁõë‰ºö‰∏ªÂ∏≠Êç¢‰∫∫„ÄÇ‰∏âÂπ¥ÂâçÂú®‰∏≠ÂõΩËÇ°Â∏ÇÈÅ≠ÈÅá‚ÄúÁÅæÈöæÊÄßÈáçÂàõ‚ÄùÁöÑËÉåÊôØ‰∏ãÊé•Áè≠ÁöÑÂàòÂ£´‰ΩôÁªìÊùü‰ªªÊúüÔºåÂÖ∂ËÅåÂä°Áî±‰∏≠ÂõΩÂè¶‰∏ÄÂõΩÊúâÈì∂Ë°åÂ∑•ÂïÜÈì∂Ë°åËë£‰∫ãÈïøÊòì‰ºöÊª°Êé•‰ªª„ÄÇ</p><p> ‚ÄúË∞£Ë®Ä‚ÄùÂ∞±ÊòØ‚Äú<strong>ÈÅ•ÈÅ•È¢ÜÂÖàÁöÑÈ¢ÑË®Ä</strong>‚Äù„ÄÇ</p><p>ËÄÅÂàòÁöÑËøôÂº†ÈÖçÂõæÔºåÊòØÂú® salute ‰∏≠ÂõΩËØÅÁõë‰ºöÔºåËøòÊòØ‰∏≠ÂõΩËÇ°Ê∞ëÔºü</p><p>‚ÄúÈóÆÂêõËÉΩÊúâÂá†Â§öÊÑÅÔºåÊÅ∞‰ººÊª°‰ªì‰∏≠Áü≥Ê≤π„ÄÇÂ¶ÇËã•ÂΩìÂàùÊ≤°Ââ≤ËÇâÔºåËÄå‰ªäÊÉ≥Êù•ÊÑÅÊõ¥ÊÑÅ„ÄÇ‚Äù ËøôÊòØ 8 Êúà 26 Êó•Êñ∞ÈóªÂ§¥Êù°„ÄÇ‰∏≠Áü≥Ê≤πËÇ°‰ª∑Êî∂‰∫é 6.02 ÂÖÉÔºåÂà∑Êñ∞ÂéÜÂè≤Êñ∞‰Ωé„ÄÇ‰∏≠Áü≥Ê≤πËÇ°‰ª∑ÊúÄÈ´òÊó∂ 48 ÂÖÉÔºå‰∏äÂ∏Ç 12 Âπ¥ÔºåËí∏Âèë‰∫Ü 7 ‰∏á‰∫øÔºå‰ªéÂ∏ÇÂÄº‰∏ÄÂì•Âà∞‚ÄúÂ•óÁâ¢Á¨¨‰∏ÄËÇ°‚Äù„ÄÇ7 ‰∏á‰∫øÁõ∏ÂΩì‰∫éË∑åÊéâ 1 ‰∏™ËãπÊûúÔºåÊàñ 2 ‰∏™‰øÑÁΩóÊñØËÇ°Â∏ÇÁöÑÊÄªÂ∏ÇÂÄº„ÄÇ</p><p>‚ÄúÊàëÊúâÊó†Êï∞Ê¨°È™ë‰∏äÂ§ßÁâõÔºåÁªìÊûúÂçäË∑ØË¢´ÂêìË∑ë‰∫Ü„ÄÇ ÁÑ∂ÂêéÁúãÁùÄ‰∫∫ÂÆ∂‰∏ÄÈ£ûÂÜ≤Â§©ÔºåÊÉ≥Â§ßÂì≠ÈÉΩÊ≤°ÊúâÁúºÊ≥™„ÄÇ ÊàëÁúüÊÉ≥ÊääËá™Â∑±ÁöÑË¥±ÊâãÁªôÁ†çÊéâ„ÄÇ‚Äù</p><p>‚ÄúÊàëÊúâÊó†Êï∞Ê¨°Ë∏©‰∏äÂ§ßÂ±éÔºåÁªìÊûúÁ°¨Êå∫Âú®ÈÇ£Âá†Âπ¥„ÄÇ ÁÑ∂ÂêéÁ≠âÁùÄÂàÜÁ∫¢‰∏ÄÊØõÊó†ÊúâÔºåÊÉ≥‰∏äËÆøÈÉΩÊ≤°ÊúâËÉÜÂ≠ê„ÄÇ ÊàëÁúüÊÉ≥ÊääËá™Â∑±ÁöÑËÑö‰πüÁªôÁ†çÊéâ„ÄÇ‚Äù</p><p>ËÆ©‰∏≠ÂõΩËÇ°Ê∞ëÊÄÄÂøµÁöÑÁâõÂ∏ÇÔºåÈÉΩÂÉèÊòØÊÄÄÂøµÁöÑÂàùÊÅã‰∏ÄÊ†∑ÔºåÈÇ£Ê∂àÊï£Â∑≤‰πÖÁöÑÁâõÂë≥‰ªø‰ΩõÂÅö‰∫Ü‰∏ÄÂú∫Êò•Ê¢¶Ëà¨ÁöÑÁæéÂ¶ô„ÄÇ</p><p><img src="/blog/img/Year%202019%20-%2002.jpg" alt="Year 2019 - 02" title="Year 2019 - 02"></p><p>Âõæ 2ÔºöHayne‚Äôs Report.</p><p>2 Êúà The Royal Commission into Misconduct in the Banking, Superannuation and Financial Services Industry Final Report, lead by Keith Hayne published. ÂØºËá¥ÂúüÊæ≥ÁªèÊµéÊîØÊü±‰∫ß‰∏öÂõõÂ§ßÈì∂Ë°å‰∏≠‰∏â‰∏™ÁöÑ CEO ÂÖàÂêéÂú®‰ªäÂπ¥‰∏≠Ë¢´Ëø´ËæûËÅå„ÄÇ</p><p><img src="/blog/img/Year%202019%20-%2003.jpg" alt="Year 2019 - 03" title="Year 2019 - 03"></p><p>Âõæ 3ÔºöË∂Ö‰πéÊÉ≥ÂÉèÁöÑÂÆáÂÆô„ÄÇ</p><p>4 ÊúàÔºå‰∫∫Á±ªÊúâÂè≤‰ª•Êù•Ëé∑ÂæóÁöÑÈ¶ñÂº†ÈªëÊ¥ûÁÖßÁâá„ÄÇ‰Ωç‰∫éÂ§ÑÂ•≥Â∫ß‰∏≠ÁöÑ M87 ÁöÑË∂ÖÂ§ßË¥®ÈáèÈªëÊ¥ûË∑ùÁ¶ªÊàë‰ª¨Â§ßÁ∫¶ 5500 ‰∏áÂÖâÂπ¥„ÄÇÂÖ∂Ë¥®Èáè‰πãÂ§ßÁ∫¶Âêà 66 ‰∫ø‰∏™Â§™Èò≥„ÄÇ</p><p><img src="/blog/img/Year%202019%20-%2004.jpg" alt="Year 2019 - 04" title="Year 2019 - 04"></p><p>Âõæ 4ÔºöI believe in miracles.</p><p>Â§ßÈÄâÂâç‰∏Ä‰∏™ÊúàÔºåÂêÑÈ°πÊ∞ëÊÑèË∞ÉÊü•ÈÉΩ tip Labor win the election. Sportsbets back Labor win at odds of $1.16, Coalition $5.80. Labor Á´ûÈÄâÂõ¢ÈòüÂú®ÂÖ®ÂõΩÂêÑÂú∞ÊãâÁ•®ËÆ≤ÊºîÊó∂‰πüÊòØË∏åË∫áÊª°ÂøóÔºåÂäøÂú®ÂøÖËµ¢„ÄÇÊòüÊúüÂÖ≠Á´ûÈÄâÊó•Êó©‰∏äÔºå‚Äú‰∏ªÊµÅ‚Äù TV &amp; newspapers ËøòÈ¢ÑÊµã Labor‚Äôs landslide win„ÄÇ‰ΩÜÈÄâ‰∏æÊúÄÁªàÂú® Coalition ÊàèÂâßÊÄßÁöÑÂ§ßÈÄÜËΩ¨‰∏≠ÁªìÊùü„ÄÇ</p><p>Ê∞ëÊÑèË∞ÉÊü•Êú∫ÊûÑ‰∏çÂæó‰∏çÊâøËÆ§Ëá™Â∑±ÂêπÂòòÁöÑ Machine Learning / AI Âè™ÊòØÈ™ó‰∫∫ÁöÑÂ∞èÊääÊàè„ÄÇSportsbet Ëµî‰∫Ü $5.2m on its costly error„ÄÇ‚Äú‰∏ªÊµÅ‚ÄùÂ™í‰Ωì‰πü‰∏çÂæó‰∏çÊâáËá™Â∑±ÁöÑËÑ∏Ôºåradical political idiosyncrasy and elitism bias Ê†πÊú¨ÂÅö‰∏ç‰∫Ü‰∏â‰∏™‰ª£Ë°®„ÄÇ</p><p>Monash University professor Andrew Markus said Australians usually nominated <strong>jobs</strong>, the <strong>economy</strong> and <strong>financial security</strong> as their top concerns and may have recoiled from Labor‚Äôs sweeping plans for tax revenue increases.</p><p>‚ÄúIf there‚Äôs a danger that your agenda challenges those economic factors, you‚Äôre on pretty rocky ground.‚Äù</p><p>Now quiet Australians are heard loud and clear.</p><p>The swing to the Liberals suggested voters were sceptical of policies to raise $56 billion from changes to dividend rules, $32 billion from negative gearing and $30 billion over a decade from superannuation.</p><p>‚ÄúWhat one person receives without working for, another person must work for without receiving.‚Äù Here is the wisdom from Adrian Rogers.</p><p>Wasn‚Äôt it Labor shadow treasurer Mr. Chris Bowen who said ‚Äúif you do t like us taking away your franking credits then don‚Äôt vote for Labor‚Äù before the election?</p><p>Well, Mr. Bowen, thank you for your invitation!</p><p><img src="/blog/img/Year%202019%20-%2005.jpg" alt="Year 2019 - 05" title="Year 2019 - 05"></p><p>Âõæ 5ÔºöEluid Kipchoge.</p><p>10 Êúà 12 Êó•Ôºå34 Â≤ÅÁöÑËÇØÂ∞º‰∫ö‰∫∫ÔºåÈ©¨ÊãâÊùæ‰∏ñÁïåÁ∫™ÂΩï‰øùÊåÅËÄÖ Eluid KipchogeÔºåÂú®‚Äú‰∏ñÁïåÈü≥‰πê‰πãÈÉΩ‚ÄùÂ••Âú∞Âà©È¶ñÈÉΩÁª¥‰πüÁ∫≥ÔºåÂêëÂÖ®Á®ãÈ©¨ÊãâÊùæ Breaking 2 ‚ÄúÁ†¥‰∫å‚ÄùÁöÑÂÆè‰ºüÁõÆÊ†áÂèëËµ∑‰∏™‰∫∫ËÅå‰∏öÁîüÊ∂ØÁöÑÁ¨¨‰∫åÂ∫¶ÂÜ≤Âáª„ÄÇËøôÊòØ‰∫∫Á±ªË∑®Ë∂äÈ©¨ÊãâÊùæÊñ∞ÈáåÁ®ãÁ¢ëÁöÑÂéÜÂè≤ÊÄß‰∏ÄÂàª„ÄÇÈ©¨ÊãâÊùæÁ™ÅÁ†¥‰∫∫Á±ª 2 Â∞èÊó∂Â§ßÂÖ≥„ÄÇ</p><p><strong>1 Â∞èÊó∂ 59 ÂàÜ 40 Áßí</strong> In perspective, ÊÉ≥Ë±°‰∏Ä‰∏ãÔºåEluid Kipchoge just runs every 100 meters in 17s, for two hours. 17 frigging seconds!</p><p><img src="/blog/img/Year%202019%20-%2006.jpg" alt="Year 2019 - 06" title="Year 2019 - 06"></p><p>Âõæ 6ÔºöReserve Bank Australia cuts interest rates to historic low.</p><p>Central bank is literally behind the curve. More ominously, it‚Äôs an indication that asset bubbles are poised to burst, just like the Fed‚Äôs first interest rate cut warned directly ahead of both the tech bust and GFC.</p><p>Áé∞Âú®ÁöÑ‰∏Ä‰∏™ÁªèÊµéÂπΩÁÅµÂ∞±ÊòØ‚ÄùÂÄ∫Âä°‚Äù„ÄÇ‰∏ã‰∏Ä‰∏™ÁªèÊµéÂç±Êú∫ÂæàÊúâÂèØËÉΩÂ∞±ÊòØÂÄ∫Âä°Âç±Êú∫„ÄÇ</p><p>ÊîøÂ∫úÂÄ∫Ôºå‰ºÅ‰∏öÂÄ∫Ôºå‰∏™‰∫∫ÂÄ∫ÔºåÂ§ßÈáèÁöÑË¥üÂÄ∫ÔºåË∂ÖËøá‰∫ÜÂÄüÊ¨æËÄÖËá™Ë∫´ÂÅøËøòËÉΩÂäõËÄåÂºïÂèëÁöÑÂÄ∫Âä°Âç±Êú∫ÔºåÈáëËûçÊµ∑Âï∏„ÄÇÂÖàË¥¢Âä°Âõ∞Â¢ÉÔºåÂÜçÁªèÊµéÁî±‰∏çÁ®≥ÂÆöËΩ¨Ëá≥Â¥©Ê∫ÉÔºå‰∏≠‰∫ßÂèòÊàêÁ†¥‰∫ßÔºå‰ªéËÄåÈÄ†ÊàêÁ§æ‰ºöÁöÑÂ§ßÂä®Ëç°„ÄÇ</p><p><img src="/blog/img/Year%202019%20-%2007.jpg" alt="Year 2019 - 07" title="Year 2019 - 07"></p><p>Âõæ 7ÔºöDow 28000.</p><p>In November, another historical moment, Dow closes above 28,000. From 27,000 to 28,000, get there just in 90 trading days.</p><p>ÂÖ®ÁêÉÁöÑËÇ°Â∏ÇÂèØ‰ª•ËØ¥Ê∞îÂäøÂ¶ÇËôπ„ÄÇÁæéÂõΩËÇ°Â∏ÇÁöÑÂ∏ÇÂÄºÂíå GDP ÊØîÂÄºÂ∑≤ÁªèË∂ÖËøá‰∫Ü 150%ÔºåË∂ÖË∂ä‰∫Ü 2000 Âπ¥‰∫íËÅîÁΩëÊ≥°Ê≤´Âíå 2007 Âπ¥ÊàøÂú∞‰∫ßÊ≥°Ê≤´È°∂Â≥∞Êó∂ÊúüÁöÑ‰º∞ÂÄº„ÄÇ</p><p>ÊàøÂú∞‰∫ßÂ∏ÇÂú∫ÂêåÊ†∑ÊòØÈ´òÊ≠åÁåõËøõ„ÄÇÁæéÂõΩÁöÑÊàøÂú∞Â∑≤ÁªèË∂ÖËøá‰∫Ü 2007 Âπ¥È°∂Â≥∞ 20% ÁöÑÊ∞¥Âπ≥‰∫Ü„ÄÇ‰∏çÁÆ°‰ªé‰ªÄ‰πàÊåáÊ†áË°°ÈáèÔºå‰∏ÄÊâπÊåáÊ†áÈÉΩÊòæÁ§∫ÂΩìÂâçËµÑÊú¨Â∏ÇÂú∫ÁöÑ‰º∞ÂÄºÈÉΩÂ∑≤ÁªèË∂ÖËøá‰∫Ü 2007 Âπ¥ÔºåËøôÊòØ‰∏™Â∑®Â§ßÁöÑÊ≥°Ê≤´„ÄÇ</p><p>Êúâ‰∫∫È¢ÑÊµãÊòéÂπ¥ 2020 Âπ¥Â∞ÜÊòØÊ¨°Ë¥∑Âç±Êú∫‰ª•Êù•ÊúÄÈöæÁöÑ‰∏ÄÂπ¥„ÄÇ‰ΩÜÂõ†‰∏∫‰ºº‰πéÂ•ΩÂÉèÊØèÁªèËøá‰∏ÄÂπ¥ÈÉΩÊòØËøáÂéª 10 Âπ¥‰∏≠ÊúÄÈöæÁöÑ‰∏ÄÂπ¥ÔºåÂÖ®ÁêÉÁªèÊµéÂÜç‰πüÊ≤°ÊúâÂõûÂà∞ËøáÂø´ÈÄüÂ¢ûÈïøÁöÑÂø´ËΩ¶ÈÅì‰∏äÔºåÊâÄ‰ª•ÊòéÂπ¥ÊâçÊòØÂàöÂºÄÂßãÔºåÊú™Êù•ÂçÅÂπ¥ÊâçÊòØÊúÄËâ∞ÈöæÁöÑ„ÄÇ</p><p>ÁõÆÂâçÂÄ∫Âä°Êù†ÊùÜË∂ÖËøá‰∫Ü 250%„ÄÇÂÖ®ÁêÉÂêÑÂõΩÂ§ÆË°å‰ª•Èõ∂Âà©ÁéáÂíåË¥üÂà©ÁéáÁª¥ÊåÅ„ÄÇÂú®ËøôÁßçÊÉÖÂΩ¢‰∏ãÔºåÂøÖÁÑ∂ÂØºËá¥ËÇ°Â∏ÇÂíåÊàøÂú∞‰∫ßÂ∏ÇÂú∫Ê≥°Ê≤´„ÄÇ</p><p>‰∏ÄÊó¶Ëøô‰∏§‰∏™Ê≥°Ê≤´Á†¥ÁÅ≠ÔºåÂÆû‰ΩìÁªèÊµé‰πüÂøÖÁÑ∂‰ºöÂèóÂà∞ÂΩ±Âìç„ÄÇ‰ªé 400 Â§öÂπ¥ÁöÑÁªèÊµéÂè≤‰∏≠ÂèØ‰ª•ÂæóÂá∫ÁöÑÁªìËÆ∫Â∞±ÊòØÂ∏ÇÂú∫ËßÑÂæãÂèØ‰ª•Êé®ËøüÔºå‰ΩÜ‰ªéÊú™Áº∫Â∏≠„ÄÇ</p><p><img src="https://lh3.googleusercontent.com/pKuf-FR-xupJa_XNu82ZZ2CrJ0f686G9e9c-AfS4Y6iXFFVGn8FoFGF0vPojRNRvw6bjveJWzvYsyNUVLDqnwvgrXM9AROTtl-3s1r4IfPG8lrfx59jTGyAbNAAq2yjGLmTjEsccISrpzEIaRNFUJiVDUkqojGPEELUbHPcXB58roLBds3gc89vP-Y2AcbocjZB-btxEIYAUS3SKMcX7G-DLHvumHqM4V8yCNKKM0AT5-lkiU-W7nTwrronm6GkqP2SMiddlHcJQsyc2-vc-jeRl8XYd3shPitAjT4ipzTtq0p4fYA7e9Q6HkEe9pIVbcMGmUt9vxZq0YayACCZW6I7QeqPHYi-wpoznFaWDEq4VnGk56vQnb7n3zsc4k0jSnpYonYz97KEz03j2zJhkvbDnTXks6ZcnnbP7TqmmL0ySkKM3gjWBz9IScNZU-dz2E3GCpeNvuZW1NgxvkF-It4918_Mm8Sl2TIYmdsrFdJ6MO_Rzk2PcLaoiGuJtS6lVxJhSb_h5yRNbBk8ev_mmypoangxgHdZKbHC3ytduJbkExXNwW4T6vsWFqdNLNNiDfsVBraOlYPXT0rwCeky-_PlcITAKyPA_jxchRY9cxrwg2dSGERJNYRkWlhgXHD5kzU2q9IkQ4p68u-Y5Opo35ttlrc0F_7C-O87yXv-RLsgRz4fDHOoW1pE=w1440-h2151-no" alt="Year 2019 - Home grown farm" title="Year 2019 - Home grown farm"></p><p>Âõæ 8ÔºöHome grown farm.</p><p><strong>‰ª•ÂÜúË°•Â∑•</strong>„ÄÇÁªèÊµé‰∏çÊôØÊ∞îÔºåÊäïËµÑÂõûÊä•‰ΩéÔºåËÇâÁ±ªÔºåÁîüËî¨ÂíåÊ∞¥Êûú‰ª∑Ê†ºÂ±ÖÈ´ò‰∏¥‰∏ãÁöÑÁéØÂ¢É‰∏≠‰æùÈù† home grownÔºåÂÆ∂‰∏≠ÁõÜÊ†ΩÁöÑÊùèÔºåËãπÊûúÂíåÊ©ÑÊ¶ÑÂº•Ë°•ÂáèÂ∞ëÁöÑÊî∂ÂÖ•ÔºåÊâ∂ÊåÅÂ¢ûÂ§ßÁöÑÂºÄÈîÄ„ÄÇ</p><p><img src="https://lh3.googleusercontent.com/PzzPXr-IUsEiCUhrAY0KcBzmss2d9lpcxL5ozlDY8O_ykzKUWnSnKYjXmKpdA1bF-VrT_S7Rdy3H136jzlu93vofXPrqVW0oqifSe0yylPV-qc9xRqtFUl_NW6ptvRAcVxZzWH5f0wYsgK4rnM5SnHGL-6O1y6j1ANAYtKc7yP_fATCiPrn5tuNFeMtInzU1pv80vJtA0xph6sQKp1TG9M0wNuAYgzsJ8l2lw5_8mbXPt8lwrxZWSnZyXDMddXTQyMy3917AHQQafuMUOne6kPreIVU2GuWWE1wsnadFDEyscehlGSUMhrSv1IqknOEk73yHxV6R2QwvEHCnPF-LDI9Pdw3loDUd5QFCgFCEnVLJgEMCIffYK8fq-ZJM6Unl3zIg9I0PI5vGQaWiirgmIz5susnZzjWNkBvrpyVfdolSkU-rhavrxeKYNWUCYISZcXHP6Ibbk4hpQnIcQpZzPGKeXA6lOiM0hKyP1qXGY69mkIdsh70KawopdiW6K5iLMJHNK0QJZ9TjC41aYsnGRGJ7pTTcm4WKpEGM-hZt9lGt9mqV1K8TilqeEm_HV2lnY3jsHcUUHqjcuW1kLui7VZ8nTYI59HAExZZ8myZpwhJRvVSXaaC4KHf2TlYooZoaOamEIV7lc21tvt2qXaY7g4sOQdC068q6ssgx8HdondROyjvEq4fs-AY=w1283-h1400-no" alt="Year 2019 - Year in sports" title="Year 2019 - Year in sports"></p><p>Âõæ 9ÔºöYear in sports - Personal Best.</p><p>ÂàõËÆ∞ÂΩïÁöÑ‰∏ÄÂπ¥„ÄÇË∑ëÂä®Ë∑ùÁ¶ªÔºàÂåÖÊã¨Ë∑ëÊ≠•ÂíåÁΩëÁêÉÔºâËææÂà∞ 1300+ ÂÖ¨ÈáåÔºåÁõ∏ÂΩì‰∫é‰ªéÂåó‰∫¨Ë∑ëÂà∞‰∏äÊµ∑„ÄÇClimbing 14,652mÔºåÁõ∏ÂΩì‰∫éÊîÄÁôª‰∫Ü 1.7 ‰∏™Áè†Á©ÜÊúóÁéõÂ≥∞ÁöÑÈ´òÂ∫¶„ÄÇ</p><p>‰∏çÂõ†Â≤ÅÊúàË£πÊ≠•‰∏çÂâçÔºå‰∏çÂõ†Á£®ÈöæÊîæÂºÉÊ¢¶ÊÉ≥Ôºå‰∏çÂõ†ÊûÅÈôêÂÅúÊ≠¢ÂâçËøõ„ÄÇA journey of a thousand miles begins with a single step. Keep running!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;2019 Âπ¥ÊòØËøáÂéªÂçÅÂπ¥‰∏≠ÊúÄÂ∑ÆÁöÑ‰∏ÄÂπ¥Ôºå‰ΩÜÊàñËÆ∏‰ºöÊòØÊú™Êù•ÂçÅÂπ¥‰∏≠ÊúÄÂ•ΩÁöÑ‰∏ÄÂπ¥„ÄÇ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/img/Year%202019%20-%2001.jpg&quot; alt=&quot;Year 2019 - 01&quot; title=&quot;Year 2019 - 01&quot;&gt;&lt;/p&gt;

      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>AWS EKS for Fargate, with eksctl</title>
    <link href="https://terrencemiao.github.io/blog/2019/12/07/AWS-EKS-on-Fargate-with-eksctl/"/>
    <id>https://terrencemiao.github.io/blog/2019/12/07/AWS-EKS-on-Fargate-with-eksctl/</id>
    <published>2019-12-07T11:33:38.000Z</published>
    <updated>2019-12-11T04:59:14.124Z</updated>
    
    <content type="html"><![CDATA[<h2 id="AWS-EKS-with-eksctl"><a href="#AWS-EKS-with-eksctl" class="headerlink" title="AWS EKS, with eksctl"></a>AWS EKS, with eksctl</h2><p>Second try with AWS EKS on Fargate. This time with <code>eksctl</code>.</p><p>Create EKS cluster:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ eksctl create cluster --name sandpit --version 1.14 --region us-east-2 --fargate</span><br><span class="line">[‚Ñπ]  eksctl version 0.11.1</span><br><span class="line">[‚Ñπ]  using region us-east-2</span><br><span class="line">[‚Ñπ]  setting availability zones to [us-east-2b us-east-2a us-east-2c]</span><br><span class="line">[‚Ñπ]  subnets for us-east-2b - public:192.168.0.0/19 private:192.168.96.0/19</span><br><span class="line">[‚Ñπ]  subnets for us-east-2a - public:192.168.32.0/19 private:192.168.128.0/19</span><br><span class="line">[‚Ñπ]  subnets for us-east-2c - public:192.168.64.0/19 private:192.168.160.0/19</span><br><span class="line">[‚Ñπ]  using Kubernetes version 1.14</span><br><span class="line">[‚Ñπ]  creating EKS cluster "sandpit" in "us-east-2" region with Fargate profile</span><br><span class="line">[‚Ñπ]  if you encounter any issues, check CloudFormation console or try 'eksctl utils describe-stacks --region=us-east-2 --cluster=sandpit'</span><br><span class="line">[‚Ñπ]  CloudWatch logging will not be enabled for cluster "sandpit" in "us-east-2"</span><br><span class="line">[‚Ñπ]  you can enable it with 'eksctl utils update-cluster-logging --region=us-east-2 --cluster=sandpit'</span><br><span class="line">[‚Ñπ]  Kubernetes API endpoint access will use default of &#123;publicAccess=true, privateAccess=false&#125; for cluster "sandpit" in "us-east-2"</span><br><span class="line">[‚Ñπ]  1 task: &#123; create cluster control plane "sandpit" &#125;</span><br><span class="line">[‚Ñπ]  building cluster stack "eksctl-sandpit-cluster"</span><br><span class="line">[‚Ñπ]  deploying stack "eksctl-sandpit-cluster"</span><br><span class="line">[‚úî]  all EKS cluster resources for "sandpit" have been created</span><br><span class="line">[‚úî]  saved kubeconfig as "/Users/terrence/.kube/config"</span><br><span class="line">[‚Ñπ]  creating Fargate profile "fp-default" on EKS cluster "sandpit"</span><br><span class="line">[‚Ñπ]  created Fargate profile "fp-default" on EKS cluster "sandpit"</span><br><span class="line">[‚Ñπ]  "coredns" is now schedulable onto Fargate</span><br><span class="line">[‚Ñπ]  "coredns" is now scheduled onto Fargate</span><br><span class="line">[‚Ñπ]  "coredns" pods are now scheduled onto Fargate</span><br><span class="line">[‚Ñπ]  kubectl command should work with "/Users/terrence/.kube/config", try 'kubectl get nodes'</span><br><span class="line">[‚úî]  EKS cluster "sandpit" in "us-east-2" region is ready</span><br></pre></td></tr></table></figure><p><img src="/blog/img/AWS%20EKS%20on%20Fargate,%20with%20eksctl%20-%20Cluster.png" alt="AWS EKS on Fargate, with eksctl - Cluster" title="AWS EKS on Fargate, with eksctl - Cluster"></p><p>Create and add EKS mansged node group:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ eksctl create nodegroup --cluster sandpit --name workers --node-type t3a.medium --ssh-access --ssh-public-key aws-us-key --managed</span><br><span class="line">[‚Ñπ]  eksctl version 0.11.1</span><br><span class="line">[‚Ñπ]  using region us-east-2</span><br><span class="line">[‚Ñπ]  will use version 1.14 for new nodegroup(s) based on control plane version</span><br><span class="line">[‚Ñπ]  using EC2 key pair %!!(MISSING)q(*string=&lt;nil&gt;)</span><br><span class="line">[‚Ñπ]  1 nodegroup (workers) was included (based on the include/exclude rules)</span><br><span class="line">[‚Ñπ]  will create a CloudFormation stack for each of 1 managed nodegroups in cluster "sandpit"</span><br><span class="line">[‚Ñπ]  1 task: &#123; 1 task: &#123; create managed nodegroup "workers" &#125; &#125;</span><br><span class="line">[‚Ñπ]  building managed nodegroup stack "eksctl-sandpit-nodegroup-workers"</span><br><span class="line">[‚Ñπ]  deploying stack "eksctl-sandpit-nodegroup-workers"</span><br><span class="line">[‚úî]  created 0 nodegroup(s) in cluster "sandpit"</span><br><span class="line">[‚Ñπ]  nodegroup "workers" has 2 node(s)</span><br><span class="line">[‚Ñπ]  node "ip-192-168-47-175.us-east-2.compute.internal" is ready</span><br><span class="line">[‚Ñπ]  node "ip-192-168-87-98.us-east-2.compute.internal" is ready</span><br><span class="line">[‚Ñπ]  waiting for at least 2 node(s) to become ready in "workers"</span><br><span class="line">[‚Ñπ]  nodegroup "workers" has 2 node(s)</span><br><span class="line">[‚Ñπ]  node "ip-192-168-47-175.us-east-2.compute.internal" is ready</span><br><span class="line">[‚Ñπ]  node "ip-192-168-87-98.us-east-2.compute.internal" is ready</span><br><span class="line">[‚úî]  created 1 managed nodegroup(s) in cluster "sandpit"</span><br><span class="line">[‚Ñπ]  checking security group configuration for all nodegroups</span><br><span class="line">[‚Ñπ]  all nodegroups have up-to-date configuration</span><br></pre></td></tr></table></figure><h2 id="Kubernetes-Dashboard"><a href="#Kubernetes-Dashboard" class="headerlink" title="Kubernetes Dashboard"></a>Kubernetes Dashboard</h2><p>Install Kubernetes Dashboard in Kubernetes cluster:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ kubectl get services  --all-namespaces</span><br><span class="line">NAMESPACE              NAME                        TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)         AGE</span><br><span class="line">default                kubernetes                  ClusterIP   10.100.0.1       &lt;none&gt;        443/TCP         70m</span><br><span class="line">kube-system            kube-dns                    ClusterIP   10.100.0.10      &lt;none&gt;        53/UDP,53/TCP   70m</span><br><span class="line">kube-system            metrics-server              ClusterIP   10.100.142.106   &lt;none&gt;        443/TCP         14m</span><br><span class="line">kubernetes-dashboard   dashboard-metrics-scraper   ClusterIP   10.100.91.78     &lt;none&gt;        8000/TCP        11m</span><br><span class="line">kubernetes-dashboard   kubernetes-dashboard        ClusterIP   10.100.75.0      &lt;none&gt;        443/TCP         11m</span><br><span class="line"></span><br><span class="line">ùúÜ kubectl get pods  --all-namespaces</span><br><span class="line">NAMESPACE              NAME                                         READY   STATUS    RESTARTS   AGE</span><br><span class="line">kube-system            aws-node-cnzrv                               1/1     Running   0          40m</span><br><span class="line">kube-system            aws-node-m9tjp                               1/1     Running   0          40m</span><br><span class="line">kube-system            coredns-7f5cccffc-h44mz                      1/1     Running   0          65m</span><br><span class="line">kube-system            coredns-7f5cccffc-hmx7g                      1/1     Running   0          65m</span><br><span class="line">kube-system            kube-proxy-7kn62                             1/1     Running   0          40m</span><br><span class="line">kube-system            kube-proxy-g57ph                             1/1     Running   0          40m</span><br><span class="line">kube-system            metrics-server-7fcf9cc98b-ftl4k              1/1     Running   0          14m</span><br><span class="line">kubernetes-dashboard   dashboard-metrics-scraper-677768c755-mxlmc   1/1     Running   0          11m</span><br><span class="line">kubernetes-dashboard   kubernetes-dashboard-995fd6fb4-xqcj5         1/1     Running   0          11m</span><br></pre></td></tr></table></figure><p>Connect Kubernetes Dashboard via proxy:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ cat .kube/config</span><br><span class="line">apiVersion: v1</span><br><span class="line">clusters:</span><br><span class="line">- cluster:</span><br><span class="line">    certificate-authority: /Users/terrence/.minikube/ca.crt</span><br><span class="line">    server: https://192.168.99.100:8443</span><br><span class="line">  name: minikube</span><br><span class="line">- cluster:</span><br><span class="line">    certificate-authority-data: LS0tLS1CRUd ... tLS0tLQo=</span><br><span class="line">    server: https://0559DE89F43B8766B56C7FD066C6C50F.yl4.us-east-2.eks.amazonaws.com</span><br><span class="line">  name: sandpit.us-east-2.eksctl.io</span><br><span class="line">contexts:</span><br><span class="line">- context:</span><br><span class="line">    cluster: sandpit.us-east-2.eksctl.io</span><br><span class="line">    user: ADMMiaoT@sandpit.us-east-2.eksctl.io</span><br><span class="line">  name: ADMMiaoT@sandpit.us-east-2.eksctl.io</span><br><span class="line">- context:</span><br><span class="line">    cluster: minikube</span><br><span class="line">    user: minikube</span><br><span class="line">  name: minikube</span><br><span class="line">current-context: ADMMiaoT@sandpit.us-east-2.eksctl.io</span><br><span class="line">kind: Config</span><br><span class="line">preferences: &#123;&#125;</span><br><span class="line">users:</span><br><span class="line">- name: ADMMiaoT@sandpit.us-east-2.eksctl.io</span><br><span class="line">  user:</span><br><span class="line">    exec:</span><br><span class="line">      apiVersion: client.authentication.k8s.io/v1alpha1</span><br><span class="line">      args:</span><br><span class="line">      - token</span><br><span class="line">      - -i</span><br><span class="line">      - sandpit</span><br><span class="line">      command: aws-iam-authenticator</span><br><span class="line">      env:</span><br><span class="line">      - name: AWS_PROFILE</span><br><span class="line">        value: paradise-dev</span><br><span class="line">- name: minikube</span><br><span class="line">  user:</span><br><span class="line">    client-certificate: /Users/terrence/.minikube/client.crt</span><br><span class="line">    client-key: /Users/terrence/.minikube/client.key</span><br><span class="line"></span><br><span class="line">ùúÜ kubectl -n kube-system get secret | grep eks-admin | awk '&#123;print $1&#125;'</span><br><span class="line">eks-admin-token-s2gf5</span><br><span class="line"></span><br><span class="line">ùúÜ kubectl -n kube-system describe secret eks-admin-token-s2gf5</span><br><span class="line">Name:         eks-admin-token-s2gf5</span><br><span class="line">Namespace:    kube-system</span><br><span class="line">Labels:       &lt;none&gt;</span><br><span class="line">Annotations:  kubernetes.io/service-account.name: eks-admin</span><br><span class="line">              kubernetes.io/service-account.uid: fa3cf514-18bc-11ea-bbdd-0a4cd5e8dc70</span><br><span class="line"></span><br><span class="line">Type:  kubernetes.io/service-account-token</span><br><span class="line"></span><br><span class="line">Data</span><br><span class="line">====</span><br><span class="line">ca.crt:     1025 bytes</span><br><span class="line">namespace:  11 bytes</span><br><span class="line">token:      eyJhbGciOiJSUzI1NiIs ... hpY8upQlA2q40g</span><br><span class="line"></span><br><span class="line">ùúÜ kubectl proxy</span><br></pre></td></tr></table></figure><p>Visit URL <em><a href="http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/#!/login" target="_blank" rel="noopener">http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/#!/login</a></em></p><p>Choose Token, paste the token output from the previous command into the Token field, and choose SIGN IN.</p><p><img src="/blog/img/AWS%20EKS%20on%20Fargate,%20with%20eksctl%20-%20Nodes.png" alt="AWS EKS on Fargate, with eksctl - Nodes" title="AWS EKS on Fargate, with eksctl - Nodes"></p><p>With AWS managed nodes, on Node EC2 Instance:</p><p><img src="/blog/img/AWS%20EKS%20on%20Fargate,%20with%20eksctl%20-%20EC2%20Instance.png" alt="AWS EKS on Fargate, with eksctl - EC2 Instance" title="AWS EKS on Fargate, with eksctl - EC2 Instance"></p><h2 id="First-Docker-application"><a href="#First-Docker-application" class="headerlink" title="First Docker application"></a>First Docker application</h2><p>Deploy first Docker application <code>react-typescript</code>, from Docker Hub <em><a href="https://hub.docker.com/r/jtech/react-typescript" target="_blank" rel="noopener">https://hub.docker.com/r/jtech/react-typescript</a></em>, into Kubernetes.</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ kubectl run react-typescript --image=jtech/react-typescript --port 3000</span><br><span class="line">kubectl run --generator=deployment/apps.v1 is DEPRECATED and will be removed in a future version. Use kubectl run --generator=run-pod/v1 or kubectl create instead.</span><br><span class="line">deployment.apps/react-typescript created</span><br><span class="line"></span><br><span class="line">ùúÜ kubectl describe deployments</span><br><span class="line">Name:                   react-typescript</span><br><span class="line">Namespace:              default</span><br><span class="line">CreationTimestamp:      Mon, 09 Dec 2019 14:56:09 +1100</span><br><span class="line">Labels:                 run=react-typescript</span><br><span class="line">Annotations:            deployment.kubernetes.io/revision: 1</span><br><span class="line">Selector:               run=react-typescript</span><br><span class="line">Replicas:               1 desired | 1 updated | 1 total | 0 available | 1 unavailable</span><br><span class="line">StrategyType:           RollingUpdate</span><br><span class="line">MinReadySeconds:        0</span><br><span class="line">RollingUpdateStrategy:  25% max unavailable, 25% max surge</span><br><span class="line">Pod Template:</span><br><span class="line">  Labels:  run=react-typescript</span><br><span class="line">  Containers:</span><br><span class="line">   react-typescript:</span><br><span class="line">    Image:        jtech/react-typescript</span><br><span class="line">    Port:         3000/TCP</span><br><span class="line">    Host Port:    0/TCP</span><br><span class="line">    Environment:  &lt;none&gt;</span><br><span class="line">    Mounts:       &lt;none&gt;</span><br><span class="line">  Volumes:        &lt;none&gt;</span><br><span class="line">Conditions:</span><br><span class="line">  Type           Status  Reason</span><br><span class="line">  ----           ------  ------</span><br><span class="line">  Available      False   MinimumReplicasUnavailable</span><br><span class="line">  Progressing    True    ReplicaSetUpdated</span><br><span class="line">OldReplicaSets:  &lt;none&gt;</span><br><span class="line">NewReplicaSet:   react-typescript-867c948446 (1/1 replicas created)</span><br><span class="line">Events:</span><br><span class="line">  Type    Reason             Age   From                   Message</span><br><span class="line">  ----    ------             ----  ----                   -------</span><br><span class="line">  Normal  ScalingReplicaSet  71s   deployment-controller  Scaled up replica set react-typescript-867c948446 to 1</span><br><span class="line"></span><br><span class="line">ùúÜ kubectl describe pods react-typescript</span><br><span class="line">Name:               react-typescript-867c948446-qtvrp</span><br><span class="line">Namespace:          default</span><br><span class="line">Priority:           2000001000</span><br><span class="line">PriorityClassName:  system-node-critical</span><br><span class="line">Node:               fargate-ip-192-168-183-250.us-east-2.compute.internal/192.168.183.250</span><br><span class="line">Start Time:         Mon, 09 Dec 2019 14:56:59 +1100</span><br><span class="line">Labels:             eks.amazonaws.com/fargate-profile=fp-default</span><br><span class="line">                    pod-template-hash=867c948446</span><br><span class="line">                    run=react-typescript</span><br><span class="line">Annotations:        kubernetes.io/psp: eks.privileged</span><br><span class="line">Status:             Running</span><br><span class="line">IP:                 192.168.183.250</span><br><span class="line">Controlled By:      ReplicaSet/react-typescript-867c948446</span><br><span class="line">Containers:</span><br><span class="line">  react-typescript:</span><br><span class="line">    Container ID:   containerd://2ea5f1ea4fb731eb844f0e267581e9e188d29ab7a639b7b8ca50c83cfb12b4c3</span><br><span class="line">    Image:          jtech/react-typescript</span><br><span class="line">    Image ID:       docker.io/jtech/react-typescript@sha256:0951fe4d9a24390123c7aa23612c8cdf1d8191a9d8e7d3cbc8bb4d8d763e0ce5</span><br><span class="line">    Port:           3000/TCP</span><br><span class="line">    Host Port:      0/TCP</span><br><span class="line">    State:          Running</span><br><span class="line">      Started:      Mon, 09 Dec 2019 14:57:28 +1100</span><br><span class="line">    Ready:          True</span><br><span class="line">    Restart Count:  0</span><br><span class="line">    Environment:    &lt;none&gt;</span><br><span class="line">    Mounts:</span><br><span class="line">      /var/run/secrets/kubernetes.io/serviceaccount from default-token-knpqq (ro)</span><br><span class="line">Conditions:</span><br><span class="line">  Type              Status</span><br><span class="line">  Initialized       True</span><br><span class="line">  Ready             True</span><br><span class="line">  ContainersReady   True</span><br><span class="line">  PodScheduled      True</span><br><span class="line">Volumes:</span><br><span class="line">  default-token-knpqq:</span><br><span class="line">    Type:        Secret (a volume populated by a Secret)</span><br><span class="line">    SecretName:  default-token-knpqq</span><br><span class="line">    Optional:    false</span><br><span class="line">QoS Class:       BestEffort</span><br><span class="line">Node-Selectors:  &lt;none&gt;</span><br><span class="line">Tolerations:     node.kubernetes.io/not-ready:NoExecute for 300s</span><br><span class="line">                 node.kubernetes.io/unreachable:NoExecute for 300s</span><br><span class="line">Events:</span><br><span class="line">  Type    Reason   Age   From                                                            Message</span><br><span class="line">  ----    ------   ----  ----                                                            -------</span><br><span class="line">  Normal  Pulling  76s   kubelet, fargate-ip-192-168-183-250.us-east-2.compute.internal  Pulling image "jtech/react-typescript"</span><br><span class="line">  Normal  Pulled   49s   kubelet, fargate-ip-192-168-183-250.us-east-2.compute.internal  Successfully pulled image "jtech/react-typescript"</span><br><span class="line">  Normal  Created  49s   kubelet, fargate-ip-192-168-183-250.us-east-2.compute.internal  Created container react-typescript</span><br><span class="line">  Normal  Started  49s   kubelet, fargate-ip-192-168-183-250.us-east-2.compute.internal  Started container react-typescript</span><br></pre></td></tr></table></figure><p>Expose service:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ kubectl expose deployment react-typescript --type="NodePort"</span><br><span class="line">service/react-typescript exposed</span><br><span class="line"></span><br><span class="line">ùúÜ kubectl describe services react-typescript</span><br><span class="line">Name:                     react-typescript</span><br><span class="line">Namespace:                default</span><br><span class="line">Labels:                   run=react-typescript</span><br><span class="line">Annotations:              &lt;none&gt;</span><br><span class="line">Selector:                 run=react-typescript</span><br><span class="line">Type:                     NodePort</span><br><span class="line">IP:                       10.100.54.37</span><br><span class="line">Port:                     &lt;unset&gt;  3000/TCP</span><br><span class="line">TargetPort:               3000/TCP</span><br><span class="line">NodePort:                 &lt;unset&gt;  31799/TCP</span><br><span class="line">Endpoints:                192.168.183.250:3000</span><br><span class="line">Session Affinity:         None</span><br><span class="line">External Traffic Policy:  Cluster</span><br><span class="line">Events:                   &lt;none&gt;</span><br><span class="line"></span><br><span class="line">ùúÜ kubectl get services  --all-namespaces</span><br><span class="line">NAMESPACE              NAME                        TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE</span><br><span class="line">default                kubernetes                  ClusterIP   10.100.0.1       &lt;none&gt;        443/TCP          46h</span><br><span class="line">default                react-typescript            NodePort    10.100.54.37     &lt;none&gt;        3000:31799/TCP   4m55s</span><br><span class="line">kube-system            kube-dns                    ClusterIP   10.100.0.10      &lt;none&gt;        53/UDP,53/TCP    46h</span><br><span class="line">kube-system            metrics-server              ClusterIP   10.100.142.106   &lt;none&gt;        443/TCP          45h</span><br><span class="line">kubernetes-dashboard   dashboard-metrics-scraper   ClusterIP   10.100.91.78     &lt;none&gt;        8000/TCP         45h</span><br><span class="line">kubernetes-dashboard   kubernetes-dashboard        ClusterIP   10.100.75.0      &lt;none&gt;        443/TCP          45h</span><br></pre></td></tr></table></figure><p>Run <code>kubectl proxy</code> and connect to <code>react-typscript</code> application on URL: <a href="http://localhost:8001/api/v1/namespaces/default/services/http:react-typescript:3000/proxy/" target="_blank" rel="noopener">http://localhost:8001/api/v1/namespaces/default/services/http:react-typescript:3000/proxy/</a></p><p><img src="/blog/img/AWS%20EKS%20on%20Fargate,%20with%20eksctl%20-%20React%20Typescript.png" alt="AWS EKS on Fargate, with eksctl - React Typescript" title="AWS EKS on Fargate, with eksctl - React Typescript"></p><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li><code>eksctl</code>, a simple CLI tool for creating clusters on Amazon‚Äôs new managed Kubernetes service for EC2 - EKS. Written in Go, uses CloudFormation, <em><a href="https://eksctl.io/" target="_blank" rel="noopener">https://eksctl.io/</a></em></li><li>AWS EKS, <em><a href="https://docs.aws.amazon.com/eks/latest/userguide/what-is-eks.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/eks/latest/userguide/what-is-eks.html</a></em></li><li>Tutorial: Deploy Kubernetes Dashboard, <em><a href="https://docs.aws.amazon.com/eks/latest/userguide/dashboard-tutorial.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/eks/latest/userguide/dashboard-tutorial.html</a></em></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;AWS-EKS-with-eksctl&quot;&gt;&lt;a href=&quot;#AWS-EKS-with-eksctl&quot; class=&quot;headerlink&quot; title=&quot;AWS EKS, with eksctl&quot;&gt;&lt;/a&gt;AWS EKS, with eksctl&lt;/h2&gt;&lt;p&gt;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>AWS EKS for Fargate</title>
    <link href="https://terrencemiao.github.io/blog/2019/12/05/AWS-EKS-with-Fargate/"/>
    <id>https://terrencemiao.github.io/blog/2019/12/05/AWS-EKS-with-Fargate/</id>
    <published>2019-12-04T23:26:58.000Z</published>
    <updated>2019-12-10T23:37:51.737Z</updated>
    
    <content type="html"><![CDATA[<h2 id="AWS-EKS"><a href="#AWS-EKS" class="headerlink" title="AWS EKS"></a>AWS EKS</h2><p>After AWS EKS for Fargate annouced in Re:Invent 2019 - <a href="https://aws.amazon.com/blogs/aws/amazon-eks-on-aws-fargate-now-generally-available/" target="_blank" rel="noopener">Amazon EKS on AWS Fargate Now Generally Available</a>, I have a quick spin.</p><p>General configuration:</p><p><img src="/blog/img/AWS%20EKS%20on%20Fargate%20-%20Configuration.png" alt="AWS EKS on Fargate - Configuration" title="AWS EKS on Fargate - Configuration"></p><p><img src="/blog/img/AWS%20EKS%20on%20Fargate%20-%20Configuration%20II.png" alt="AWS EKS on Fargate - Configuration" title="AWS EKS on Fargate - Configuration"></p><p>Fargate profile configuration:</p><p><img src="/blog/img/AWS%20EKS%20on%20Fargate%20-%20Profile.png" alt="AWS EKS on Fargate - Profile" title="AWS EKS on Fargate - Profile"></p><p>Fargate roles:</p><p><img src="/blog/img/AWS%20EKS%20on%20Fargate%20-%20Roles.png" alt="AWS EKS on Fargate - Roles" title="AWS EKS on Fargate - Roles"></p><p><code>CustomEKSRole</code> role has <code>AmazonEKSClusterPolicy</code> and <code>AmazonEKSServicePolicy</code>.</p><p><code>CustomEKSFargatePodExecutionRole</code> role has <code>AmazonEKSFargatePodExecutionRolePolicy</code>, and Trust relationships:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  "Version": "2012-10-17",</span><br><span class="line">  "Statement": [</span><br><span class="line">    &#123;</span><br><span class="line">      "Sid": "",</span><br><span class="line">      "Effect": "Allow",</span><br><span class="line">      "Principal": &#123;</span><br><span class="line">        "Service": "eks-fargate-pods.amazonaws.com"</span><br><span class="line">      &#125;,</span><br><span class="line">      "Action": "sts:AssumeRole"</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>CustomEKSWorkerNodeRole</code> role has <code>AmazonEKSWorkerNodePolicy</code>, <code>AmazonEKS_CNI_Policy</code>, <code>AmazonEC2ContainerRegistryReadOnly</code>, and Trust relationships:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  "Version": "2012-10-17",</span><br><span class="line">  "Statement": [</span><br><span class="line">    &#123;</span><br><span class="line">      "Effect": "Allow",</span><br><span class="line">      "Principal": &#123;</span><br><span class="line">        "Service": "ec2.amazonaws.com"</span><br><span class="line">      &#125;,</span><br><span class="line">      "Action": "sts:AssumeRole"</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Namespace for Fargate profile Pod Selectors is <code>default</code>.</p><p>Subnets for Fargate, including private subnets (subnet without Internet Gateway):</p><p><img src="/blog/img/AWS%20EKS%20on%20Fargate%20-%20Subnets.png" alt="AWS EKS on Fargate - Subnets" title="AWS EKS on Fargate - Subnets"></p><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li>Getting Started with AWS Fargate on Amazon EKS, <a href="https://docs.aws.amazon.com/eks/latest/userguide/fargate-getting-started.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/eks/latest/userguide/fargate-getting-started.html</a></li><li>Amazon EKS Worker Node IAM Role, <a href="https://docs.aws.amazon.com/eks/latest/userguide/worker_node_IAM_role.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/eks/latest/userguide/worker_node_IAM_role.html</a></li><li>EKS + Fargate = Extensibility of Kubernetes + Serverless Benefits, <a href="https://itnext.io/eks-fargate-extensibility-of-kubernetes-serverless-benefits-77599ac1763" target="_blank" rel="noopener">https://itnext.io/eks-fargate-extensibility-of-kubernetes-serverless-benefits-77599ac1763</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;AWS-EKS&quot;&gt;&lt;a href=&quot;#AWS-EKS&quot; class=&quot;headerlink&quot; title=&quot;AWS EKS&quot;&gt;&lt;/a&gt;AWS EKS&lt;/h2&gt;&lt;p&gt;After AWS EKS for Fargate annouced in Re:Invent 20
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Why React?</title>
    <link href="https://terrencemiao.github.io/blog/2019/12/01/Why-React/"/>
    <id>https://terrencemiao.github.io/blog/2019/12/01/Why-React/</id>
    <published>2019-12-01T02:40:56.000Z</published>
    <updated>2019-12-01T03:27:51.404Z</updated>
    
    <content type="html"><![CDATA[<p>A new pedigree of Frontend Development.</p><p>The following are the preferred technical choices for any new projects that do not have a ‚Äú<strong>hammer whats already there</strong>‚Äú constraint that have been chosen for consistency.</p><h2 id="Programming-Language-TypeScript"><a href="#Programming-Language-TypeScript" class="headerlink" title="Programming Language: TypeScript "></a>Programming Language: TypeScript </h2><p>Alternatives to avoid:</p><ul><li><strong>Raw JS</strong> / <a href="https://babeljs.io/" target="_blank" rel="noopener"><strong>Babel</strong></a>: Types can prevent a significant amount of bugs and provide a great means of documenting code that can be validated by a compiler. Therefore we will not dabble in untyped programming languages for Frontend development.</li><li>Other TypeSafe alternatives:<ul><li><a href="https://dart.dev/" target="_blank" rel="noopener"><strong>Dart</strong></a> / <a href="https://elm-lang.org/" target="_blank" rel="noopener"><strong>Elm</strong></a> / <a href="https://dotnet.microsoft.com/apps/aspnet/web-apps/blazor" target="_blank" rel="noopener"><strong>Blazor</strong></a> - typed compile to JavaScript languages: Browsers operate on JavaScript using a language that is too far removed from JS means people will need to learn two language and fix bugs at two levels.</li><li><a href="https://flow.org/" target="_blank" rel="noopener"><strong>Flow</strong></a> - A facebook alternative to TypeScript. Flow was a decent experiment into JavaScript type safety by the Facebook team, but news from inside Facebook (chats at conferences) is that it is not actively getting maintained. Therefore it should be avoided.</li></ul></li></ul><h2 id="UI-Library-React"><a href="#UI-Library-React" class="headerlink" title="UI Library: React"></a>UI Library: React</h2><p>Alternatives to avoid:</p><ul><li><a href="https://angular.io/" target="_blank" rel="noopener"><strong>Angular</strong></a>: <strong>Angular</strong> goes through significant breaking changes as can be <a href="https://github.com/angular/angular/blob/master/CHANGELOG.md" target="_blank" rel="noopener">witnessed by the changelog</a>. Also <strong>Angular</strong> is a full framework (as opposed to a library), but people rarely use it as a framework as there will be inevitable external dependencies for alternative (even better) community tools e.g. <a href="https://rxjs.dev/" target="_blank" rel="noopener"><strong>rxjs</strong></a> for state, <a href="https://github.com/axios/axios" target="_blank" rel="noopener"><strong>axios</strong></a> for api etc.</li><li><a href="https://vuejs.org/" target="_blank" rel="noopener"><strong>Vue</strong></a>: <strong>Vue</strong> is the third most popular choice. However it not backed by a major enterprise (Facebook for <strong>React</strong>, Google for <strong>Angular</strong>)</li><li><a href="https://svelte.dev/" target="_blank" rel="noopener"><strong>Svelte</strong></a>: Same reasons as <strong>Vue</strong>.</li></ul><h2 id="State-Management-MobX"><a href="#State-Management-MobX" class="headerlink" title="State Management: MobX"></a>State Management: <a href="https://mobx.js.org/" target="_blank" rel="noopener">MobX</a></h2><p>Alternatives to avoid:</p><ul><li><a href="https://redux.js.org/" target="_blank" rel="noopener"><strong>Redux</strong></a>: <strong>Redux</strong> is definitely the more popular choice in the React community. However most people will use it with some additional middleware library e.g. <a href="https://github.com/reduxjs/redux-thunk" target="_blank" rel="noopener">redux-thunk</a> or <a href="https://github.com/redux-saga/redux-saga/" target="_blank" rel="noopener">redux-saga</a> leading to multiple ways of doing Frontend. Also, <strong>Redux</strong> is significantly more verbose (because of always new object creation) and difficult to optimise (because of no internal knowledge of what changed).</li></ul><h2 id="Styles-CSS-in-JS"><a href="#Styles-CSS-in-JS" class="headerlink" title="Styles: CSS in JS"></a>Styles: CSS in JS</h2><p>Prefer <a href="https://github.com/emotion-js/emotion" target="_blank" rel="noopener">Emotion</a> or <a href="https://github.com/typestyle/typestyle" target="_blank" rel="noopener">TypeStyle</a> over others.</p><p>Alternatives to avoid:</p><ul><li>CSS preprocessor (e.g. <a href="https://sass-lang.com/" target="_blank" rel="noopener"><strong>sass</strong></a> / <a href="https://github.com/css-modules/css-modules" target="_blank" rel="noopener"><strong>css-modules</strong></a>). For CSS in JS there is an <a href="https://speakerdeck.com/vjeux/react-css-in-js" target="_blank" rel="noopener">excellent presentation</a> that you should checkout. Key reasons are clear code co-location and management practices for CSS, the same way <strong>React</strong> does it for Html (with JSX).</li></ul><h2 id="End-to-End-Testing-Cypress"><a href="#End-to-End-Testing-Cypress" class="headerlink" title="End to End Testing : Cypress"></a>End to End Testing : Cypress</h2><p><a href="https://www.cypress.io/" target="_blank" rel="noopener"><strong>Cypress</strong></a> for E2E testing.</p><p>Alternatives to avoid:</p><ul><li><a href="https://selenium.dev/" target="_blank" rel="noopener"><strong>Selenium</strong></a> based solutions (e.g. <a href="https://www.protractortest.org/#/" target="_blank" rel="noopener"><strong>Protractor</strong></a> / <a href="https://nightwatchjs.org/" target="_blank" rel="noopener"><strong>Nightwatch</strong></a>). <strong>Selenium</strong> operates over a wire transfer protocol that makes it impossible to provide many of the debugging features provided by <strong>Cypress</strong>. <strong>Cypress</strong> operates in process with the tests making automatic retries with greater flake resistance and a significantly improved debugging experience.</li></ul><h2 id="HTTP-Requests"><a href="#HTTP-Requests" class="headerlink" title="HTTP Requests"></a>HTTP Requests</h2><p>Prefer <a href="https://github.com/axios/axios" target="_blank" rel="noopener"><strong>axios</strong></a> due to is built in TypeScript definitions, great browser support and community guidance.</p><p>Alternatives to avoid:</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank" rel="noopener"><strong>fetch</strong></a>: Needs polyfill and needs explicit calls for json de-serialization.</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;A new pedigree of Frontend Development.&lt;/p&gt;
&lt;p&gt;The following are the preferred technical choices for any new projects that do not have a 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>A PC person&#39;s guide to Mac</title>
    <link href="https://terrencemiao.github.io/blog/2019/11/28/A-PC-person-s-guide-to-Mac/"/>
    <id>https://terrencemiao.github.io/blog/2019/11/28/A-PC-person-s-guide-to-Mac/</id>
    <published>2019-11-28T03:24:25.000Z</published>
    <updated>2019-11-28T04:02:20.838Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Prelude"><a href="#Prelude" class="headerlink" title="Prelude"></a>Prelude</h2><p>This is a re-posted article I published on May 19th, 2012, long long time ago on the currently already died Google Plus.</p><hr><p>Bought a lowest entry level Macbook Pro 13‚Äù i5 refurbished during the week. This is the <strong>first ever</strong> Apple product I bought. I‚Äôm not a fan boy of sleeky, popular iPhone. I keep poo-pooing iPad. But because of the admiration of MBP‚Äôs impeccable design and high quality, moreover as a tribute to Steve Jobs, I join the cohort of yuppies, with a silver MPB on my laptop.</p><p><img src="https://lh3.googleusercontent.com/BGvvjxE0er3Z13L3GD179L7GyNDnoA18g1E85DttP87f1NGD_z97L-D7xZHgS58bCV7FeoEO8J1GZ8cUnTZKROhoJyEr3Hya0LIG5aO-Fj79uthzsUnBLCwJwskyJAs1ul5u3XCmEFxLsBL_dM1-tFS3mMZj9adUePJlQLAo_W89ew-dAvM5OJyzhvnCOQ7qPhQDA2Kh72z9GF0xec4fWnkHt4Hoh_jFZyxCcGUSddtOI5ncRUdavLUQO5v3fSTvxj-QC-iLw9q8yzRuwSH_ZwetD9IpaPwCif9wHyuzb1gcOmYyoEGRiZctfNJcgHYqTmbMJ9ngNXX0dkSYVK27Z6gyPJdd7fdS_imDexwstcdTUIpn--7KKg8_THWjOyQcz5KWr5z20XmdgPxwIkjLnEuCpaG8xsRhBE5PavX0eiWDQbhe7-mFvRZhAqvws9okEVFKW189BigBnYOCSeFDaMSpgYmJlSkPIq_Ep1ipA_dRkRrUbSmi62R1VdosPlTPOpFg-RDsu66ar761LuBj33WrfPUzrMtA6vAdNgCzuFMgJb6UWiHW750U7LUQN5itu32x6HxKwEsfq8tTORistz_bliyGtF01-3NpProC3b667ClCRvikdc5FV5IRlqeYiNImvY3AzMh4cAjwghDBEuXwBOt5kGy0r746wGFuxrX8Jr72fWnLpu8=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p><p>Macbook Pro package comes without Mac OS X Lion installation DVD. You have to re-install OS from internet.</p><p><img src="https://lh3.googleusercontent.com/hLcCUB3ESn3ySDBQArhnvV_L5xG29Z_WkGSCrwvOhyifUMsIR0tNW-dZ1Na5oeu3azv2kCmkVzxA-rjXY6myxGOY1jEjjlWet00T_CyM6Th6xGIkeGiDWjLdW5rTN26Im-CVpMtTHfsNiFWiXcICY7Qh52jbm4rXLlrTsKfaMy2KEuzp-iLv11IMWXw76WToN5hvIevnG7lJmHObDapF1J5G46Yc3GqCy2ya8wYingTUS_K7orrU5xFFMkWsTWBD5vGcVhEwtYrqh2nVqfO9fpt_WUPY3J8WbD6SbiGwxpm54xF-MDKtFtslG2AIifjjXUo6UF5PiQXbgOh6grXInp05maYYmnGiD-S7dZRYCGggnp4GhK6S0FT6W9Lslh_HMF6yjVozns7HdQ-tfjxG4u5ewWyloafP2rUkOVMhDC_y-G0mKckIhcAX7FhIdiwiTkSRO4IhLDARtXk8KzrkzYi7FwoLoMhRpZjoXvc7y7QuaHNirugN6umpYgNkgT43PpJeHhMdOj1NKfxDG4gg7qiQh9ZvElAld4Wi_1SNGfgduz2zCyQ-QUmguOitOkRTArSNO3cSUv3NvdYlFA-R5GRGiCEChYbjFT9x98NpduO-Ceb5WE2ymy5R80Z1RhVdlRQDMmb03_O3gPN1oV1f7wV8ZPbYSdoZpByy1w7FrJ7_GkEWVocYRA0=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p><p><img src="https://lh3.googleusercontent.com/01phhYjoe-dypsAlxX-yJ-dVacnilS4kqByR_DdSQ4Vs7GWCfK1twRNDXCXSUzramt7Tbf2zFSeZn96krFN3PT6uh1z577zJUFv118KiKzHZfhR3y_zb9xjx_cwrLdB65KN8EsT0Q8sZWn7RIue0nrlWyg3Ac23e2knLp4h8m3YeTyAKFYGi6fK6lg_gljr57mvc10juUSs2L598MF8I7E6wMu0TgdAAy8MDMm-umO2VAGJ8zx093L2kgYZ4sTvQH7lTTydldQAxuUNaZRmpqnu2Nf27BlN25nTWaSDpwIvHD5nBqb0WlQ7T5rIpYMLsKDnaMfZ5agr4Tv1bnEdKZZONLNnawIabNwllig4i-UxBosA6oSUzGmbHKOVwQKew8BEHooWoML9toiFDsVyo9A_kIKzXrfn4yQG43J3tdJR1_ZosvM9guQUAW2rNtO1DhD-599-jesOH_exmpIxDnWjOs_iXSkQOsEWr-j_K8zkRkd8QA2ROjdsYlwuo7pG2SvX_JmQB7ru394FdzZEFDSiw7ubvrT_XvI5Ia_pMxwuwNJ-HpqWTEh8rQqMCT-nFw7aHfLfLfkZpNDHAdpa-eBo74Gm58TDeMCq5sDklr5OK7oDpBbX9etE0qLqcVjs1BTHRdOCWJjh2dy4eXTrs1FXyZaeySvCfl52QrtS-QZU1lMebZH3YNkk=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p><p>Impeccable design and high quality product, even the refurbished one.</p><p><img src="https://lh3.googleusercontent.com/SKJqvDqwNERdXD-WGXfHVpOdRIyQ9_vI6WDVWIlDlIrSe96tmwSTSVklZZtcq4ZTDbmaGKXKLW4ZuSxVdjbcHwGjhy8wA1rasrvLUeKZGTCa7etj155vQLSehHtbqDNfiqIsQH70KzltjSi3oHSvNsLx2o5B3SobbQWT6x5R0ioYIfofXtsj0JZP3cQm0QWtrVnM2qXRs3MhTsRpTeocnA_IblzS8I2XADyECzn3pAxlgnGZehNYy31gw8SGPRS7uhaTwOd9PVHPc1XV6_0eD10hsUeDrCHFBYbbeB33pjKoFv9gt6uXiu9WKnX1CQXDQanVzcAVj9Sb-WCOkTeh_CUjqmM_35yV6i5x0gQ6VuP5c7Sc4xsDe1XmJkanyI9eVkesuAqweSUY0WxwIoUaaNIMsrPZ-6YmAoyzXB07HkMZBlZiqqp8W51VXvWGHua4up5f272wDmalAH1McjajHkpqWkIjP_UXXA8ZqIBSHFVDLwckEkgmDjgIDYMcX0g7-ogW5A6zqwhtrNtL_YKBBav4dRonGJJHekuzsaaXQdHAks8hn4Yc7CrJq7XiXCaicTCjsnHB0T0msIl6CCvJr5gZGG4cpOGvx4SHctstCNUE6LZLoc8mckcjED6t-PJKcQZJW3i8FBga02fWETzL57FU5eaE3Pugenc0Sni0aQgf9EQZpTxIta8=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p><p><img src="https://lh3.googleusercontent.com/E7MA1l8YSJu7TQ17E3jILf4QLXKIt3D4yI6umT92r4tEm9nLD22KN4w3c9SLgWkN2go3PEx31cFcuR78MeCFcGQTGgvsiAYlDSlAdvkAnuLomp_cR04q4_AG84N8u3vOINw16uNLcMSLXWWglo-wvgmVYldstefTxSl7dvmBBr78V6TAs1HtMXorL7J1wjE3eXgTiurvq6u3h-bXiMXmDdZb10hbhkEYv0Jwc9sZDDXs47KumA1uTy4cr28qLeDySXEqi36SOPjeRN6984mrPKMXBjzbTq3vdbqQ0BFgtd17JtMbFYUBGVq_5N24-i0hRrNqjPEr_MjsNuhtpT1f5h0Ppu5Va8eiWf2wb7_OO-nuqAAxQEh39wYSZ9Th_gSXmwj39-0ah-WOa73rarmPedH-5nzO6ManoRQx_O6YeO-TnMEbS2koqNaQzjMGljv0AIKXNla4_xPQ4aaAZV5fm9qIVUAS11v6iNh7B6oUGbHGDrc5JdpQ7u_mPJapSc4p1nG0PQ-oHrEIvge4nRS5tHKQ-jUoGD4Lf0wqLxx1I21R7zd7qaxRola1b4XmqYcqK2D62Vr8dXvzvQJa8E7GXgFIxj8j8BphHJhWwOWjvk955i_Qfqwq4JnGyyv0rhfAliJQ8UVWQlZ92ENVV_ozNvqpcSLdq8VsenO1P7bLeaaEPakNRiiRr9A=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p><p>However, as a typical PC person living a life of hacker. There should no boundary, no limitation, no rules can‚Äôt be broken. In order to maximise all the potentials inside this piece of hardware, and get my investment back, I also ordered 16GB DDR3 RAM, 240GB SATA3 SSD this week from two computer parts shops, at the best price I can find on the market. After some tweak to get rid of the bottleneck in the overall performance, finally this baby is muscled up.</p><p><img src="https://lh3.googleusercontent.com/X2dC7v9NrhCiNb89nne06HS9LJV_DYE_ggSoBAh5x8V6LF7xw1S-BiEcoXLdoGCMJ7QENy4dcbOikzttdx41Hf6to-YrHJwI68sCHrO4pS7aPdITe__7lu1CbfTKkJPshCO32C0laMpzQCMmNKu5ZXl48-dBLbTgGraIRJUJ9ylnUznA1BoWCeWvtPTNi_JFAMHjf_Lie5ppt--nJsU6kp6aIh7F9Is51ufkG5TudMcf0oZNVm7Er84sTURmUUJ4-NhbL6u6na43A8pF64-9okzxofK1OBW7LbSHSAmjRcpfjshycAFucIqIGNmsIEjOJJfZtsPsTHJeaEVEV8m7ejFQVWmB4jBRheS7iK-psS2ttgU7UnGQcN_6u7Z-bto5M35BHHvZeb87CSvuxXAe2-JrTYtqrAu3V6vMD6jyDvTRbvQvUGzoq4Nlo8VF2i3nxyJO5n6tqmRBg1MtQrlto8MyzZUJMkrfg1hRQ08giiIxILz4AEx8tIxhnrsWxDsc9IoHwMeGAuhk83LNpXAB-o_96-rtX_TpIcbQt0mSqpCDWkJ1DMhO-ORlRucg1kTyn4vn3wewMccBV5LH_vSidfDVFMW7THG3OyIZAFmol2nMsInE5GMnV9NU7fc6nBsn10uJNak-mX0yI4XwurGZ6lj5Zn3_u2WfC7B3UvbWqehimWiwcC6oSR8=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p><p><img src="https://lh3.googleusercontent.com/F9Pi4dCCeyYepZ9LY7VlO60eUeWJ5HG8fHKnbAN0i19Yf5BRtQpPPf6osx41LveIsZ_Q5GTmQSKjq5oUWFvHyPjVAr5P2FSeSf3tM7R6_1kCreaWzm-UgncAr68jwD8W4-cddwDRXNhavW-BfBuq67nNA6ZO80lhQk50WxYYPe60WK4N_r4Y_2e3g5LLsusq78e35NLcsQF4vW_y2iRIDircVI0ruJyQjcCFdzbmS2so46XZ82R_ehX7I44LJlxyimvmXN6FXX111QRttisZ4fQOcGY8vxpFZu-TBfJLKF35CPOY9EnCv-Z_9pqZJbxjsFCNsuIW5EIqEUW2sn7DFPRUfc4V6EMKJqPxcMEEacWEQxSCCU91txnrZaIdNqu1UnAnXq9mo6ucJ3b-3Wx89GWCoPP1w9FQKms7ceFHoCWsMfaXeRsqdsWQe_l666N7ezrrG33DMM6qRMk4rJ9KbGNjsiJt4y4XUBqtiiFeqnIuftrgqTB0f3c2E9iScy7XIiFF20Ot2ukLvouYgpSzExB7o2zFplrggjbjoJCUq26PSBBdJpjBwvkXGrfenfTPBkl64to30qLqbWG2qrtDnUmFECSpgxEDtDaca_aPFg-3jFVlI_r_JyG83YJM2H_uivxe41zp8dF68SJaCbVUqRbw0RY5EbphmQx8uZMLKMe7RJKB5o4zfw=w962-h1596-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p><p><img src="https://lh3.googleusercontent.com/mP--OFkadgH0bgMZ0XroA6-RNElxP4kd4gcCd-S24_tBokyhq1k8jKx_9FNURFKaWD7vXv7q2zNS1IVxIQ_Y8pcY2fY8g-T74gJbxv9shq8gyxJ15VI3IVvt9UU5M7u548--ktsWrUgArFweoVbiwqNdLvMeqdFvRtnEJplKtH4AlgeF-c3C4EUulvbSIPYTyZHBmg3hMkrz-WbUGs4UxAl4Rxf9PeCBD_j7Qu1AVxHtGwXqGh5D4fY0rL2zOGYr4VZWm7iP9EMBDpPbH4lkSRm7UqziJ55kW68rits4VgSVlwbOiAiKw9AuqLEvQa-KhlHmHoaI_ZDuDEnpsEim6CqnXI4pw-fNChVwelfIj6gU6N4cB9ZDSJMFcfhajqC2hbniLjQo6hvilo-EzZH1gAi6FES-TF8bASIMxBtreB_1xZ25l7pjsdt_l-bdbJawVbL-tFv61Dzg6GAStkWP6j_kz10E0lWeC9tlhngH5IrDjp8gf557xbRhxHlvAxGqm2OeQWgBF_nHbkXNDTdX8haA4c-wwriYIjpiD-Qr1WgQnmcVgdAoXTlMEii148MEk1wqv7F0_fLd-kM22YfI1mHo6bN5sBvAxGq8Ej1y8XqO_Xsc1K4sf0NSiz3KfGhMea_gU3ER8QZaazPGGHNSJxJDhy8pRdVOFoKQiIfGyKAFRb2y5MFR_Q=w962-h1596-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p><p><img src="https://lh3.googleusercontent.com/wQYJSUCUDukjObJV1GsyAcmJvlp8uqkdZO-hUewqgP6wqCBlCvjEL7BXx8dlpcjz-KXgfF-lzunPRJD_OkdDzg9uRO6gWvyo44JPR1j-owoMwnct7MJWKyBib5j9hvaXjYAfp-9HA4oW-jWtvi5uYRr8JKEc1Rs3cq07R92MMWfaqhybf2q6IJrgw0duOxUKepUbiuLAideB0DeL7rpeDKXNylzZ_18vq5X2D3X6bEZaZeGdZZrB3gB7IX6Gx9DPzZQQDuz37tt9eORz9WwENYO7Lf76ff0pAfh456fulQMdfqQQxn1Et9csRvTl-pA0OlnbGdoyAMAGHQ5d4e7nklNqrcpAVl85rVEiOzgSHRMmmdViqQqsX8AT_TYvsgsZRu1iD4aTMrK9zO-4KyulV8hkqA2khfJpxzimebltYY4Z4uGN2JeiueTHZXYSXGqjjmtWG4v1gByoSjuC-d0wiIaqRGuKASXE3B3M8osXYoPX-ilmiJ8T6Zqbc1NNl9AOO6jt466Mp9W-126GgflhkDGmioKxpmh6yJkvV_vRLNwQoOYpn30VkLOaIOokMffqGTOgHOH322UNIEDdj3Wp6vymKCJHhkWpWWF7LdLLTv3VgjdvRtECgU1qadey5OhINLM9RQAM938kZ7n6on7lN-l0ZrCr1aY9wL_MIzjlPpwAS1cM6dOoww=w962-h1596-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p><p><img src="https://lh3.googleusercontent.com/msr9NG3fQJx3J6aw1Ro-nykTMbQJpqDPfhsKCDx5CR7DwKrWpALoANwHVHVQnPQbdlEqG4jtQgULWP515CzHD02gjf0ZZE0mpYqurb46m5S5PqsQ6caF9PKSjpVEMdSn2anm99-eWw4GjwDFR3K-6ak6Oisk9hmqMwNl3Fv7wCFdVqK5TJ8TdqiI4Lu7VMViIQmP3OUvCvABl95JQFSWWHEk9FuXRNPpIItn273-8NXT24Nh9t6d0x4w-UgWEzrXyxFsi37JCDSy7RTooaOH1xiKqkZ23eCuQ84rDKktCsSuTWykK3MwsfP6nThSkfM2dksXWByol3tdH0gPYwYTSlpJi-idoSzGc3CacMhb3YaOJaZsW2pCvTDwY6nY6ljU1kyY7LfHZyq9NLXQ4FeVD9ia1eMORExalMswNyUHP7lfkn8V_Zz4iuPg0LC8WSaqEh_-Ge-FJNaNKiTDv4yU0ZtWIA4jkm7nJfeKWss2mm82sjt-c9XSJhKciT7NMliv9SrfIXUjySZ5IM9zkhxPVGHW9QKaFJCcWrSGV_bGs2CsALyu0T3ihRFCxrZ4dJJvj7mmSKOtnjsPSQ5q147B5HQL9PXuQTi3ExkbCIXBIZmVXMKZmHzhGLqanZUGDem0Z4xBLeTRoxpBIM_dQd9uptSIuUQY48Boop2s7BiB2LuQScrxBvm4pg=w962-h1596-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p><p><img src="https://lh3.googleusercontent.com/NTBHzPkDJXTeJT09ZTfIeBbNfX8-JHcWMTJbyOwnrdhXgByk0iJOCyAZoSbZa5WU-ZiH33Wp4ZTzrl1oIl4iCjRmgLcJAyerQEMCel_H9s8NRoYKcLD6rlRMOZm8BNZrFj_SLRZx4qZBnA91QH2JX-d4SfxahzDpNpNIbltVd3_TVe-uZlsYX1DUP2IIyiVxt21drcgGBtoR1ZNdyE2aEcT63tSKqxf0LGxq8Nm1Xxr9f-x-5s8Kp9HlugYljfl37G-jhoi2tX9CAjg658g-5Z54-H-oQ32zd1oifIt4TPJ4q2UyCAmXg1X3r3z3NNq8hpU10eFMxT0nDii5S7evQUJLD6gfxXra1ioZTttmD0EE6tLratSq7PWfq6to0ch2ZVB0uBMf7JFxbnAmLn2JkWjpwIqTxvYOcNNbNeuW8QwjJeqOqESbcMPRnspUShB50K7sC9KxpLm8hB6-wteOctylxO7dN7yIKVRxh_HMBJIlGB9SemyT5M_-DCh1QNxNu1o7wSdiSI6mnycr_hgor0eT913zRjFQp9ktHpXVTKg15whP1gx6q1irsmKovlxCvvxcnQX4MjdZMN_mpRGZybRtLnkMv_mN38NAOStOkhrbPOfti6vpdroMWUWZy_-y6vqjlgSmIjYtdjLWfYkyoN9vwfgryY5zo1KNexoQMrb0XMSmq7t3Qw=w962-h1596-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p><p>Refurbished MBP, $1189.00 paid on credit card with free shipping. 16GB Patriot DDR3 RAM for Mac, $150 on cash. Corsair Force SATA3 240GB SSD, $295 on cash. The happiness and achievement to get something done after a long time planning, researching, waiting, torture and agony, priceless. There is something money can‚Äôt buy. For everything else, there is a Mastercard. And you have to work harder to earn your dole and make this happen.</p><p><img src="https://lh3.googleusercontent.com/Ie4SbmL1Xw81fPc82BwUIVdVl4YGD32nKIZBAZiGDH13eDz9nzKL5_Eqyvp7pr5RCqO9sEB6OJRSNeB3_lj3fhm0O707ZIba4uYdaeFQIqttAL7YwGBVoIQAmePlu4rCZXBi3472QvPP-zQPESbYr1xH1hKrbP10TXhWl-NIFy18Eq7rvUL25o6wTzTHrpo9UrPgvgNGkhlmgd5Ge7i_4yTjpkV9jnxU-DpuLC33BKT2we2ltX0suqs5cSONhhCzpE3eZPWGUuz7Zfid6eUyeu2wa5jCYcSLZf08BpSslifT6e7p0MK_pv6vQp1R0Y0vK76L6env9pZa673BloYxovaGEttCbhjC6tCbLcMR32w4eUySkk3na6YDuVeGCjuZzhvzUjwL1nLupgkkPPynP51wWyAEFxa3e3T0JMxO0RryAjI4Ch3eB2QY7HLfcF_0hTWXgjWOP6KnBmbFb7sAbvEy2MFpBu3aPoWrrLRBzP0eA_8kruYoUjlkzbISDT-jzSwYLxt6irvf5aHy34HdHUTT6hrvbhFLNCI0Ien6iLqNBijTMwVOnMMq6lUAVW_DYeAgdXsbUndPTLUcXxauJSsBzmbNZ6Nty1tlSCmziIMNNKfL7TmsVfN2LCVb8oeYh2q-zHckoxaNHP3qdovnomVsZL1WIUQtv_jLz9zZYoW1kDEvJaPo2w=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p><p><img src="https://lh3.googleusercontent.com/1-8e18uwWTEu3MBJCWmIa3c2yKyr07Q_h6f5kqFXNDk5AxxD_zSTUEDNarWbfCAy9sroF7ZOaJpj6XGeW0vN3NcFuBM8mGUmhLJuhj7Yqcj9yrOBZensCY4CM3MedVRoOgyS1umogZl40ujbiXFEqusyw-Gn8dbyKi8Si-3SaFiEfchA2-p8EQn2ecFep-o2a57tWmawjgEszoeXTTSP_96m6NShUA2Qbyykl_E2LUKWfD4xbi5SvpLi0UyoOzn803e6DrzanOj9uce82Il4c-S-tXsLW5XydplFMu0H8smg66_-fucx1d3qb_-sucu050BjF0hluoaxT70wTmduyZMRIw0iXbSFlcNO7sgW-vgeCKhLiXxrmnNzFtDn27DVRUBdpbrrb6HfdT-bsfTOcPxIbyFIS5L4V5YrQjIYuII_jONDCVn7KqzgY2iDzyp25E15OfXB7-fpxvpMfmbfkwt1n6HbwCp43a2Mtzrang31weiK81Fc16KjPbhQ82cJYyfvPfiE7K7v6D3l3FDsyx0WBNKaPvmY_sow0bSlLjDX9oyWJhDwrJxIM_p4RfXdgFpvL696JD7fchFHeTjYRyvvOb-gMOj3h9oXsaj_cJPE144rF60M40_wxjyMklbd26EHGS3CRPcZhcvtLOEqF3nQly2z7FZ4qmyjYf2dBh3A8fVWbkRTCw=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p><hr><p>Totally under 1700 dollars investment will keep me happy for a long time. I reckon it will be good money spent on. If you see the used to be memory hogging applications like M$ Office and Eclipse , suddenly they all jump on your face when you click and open them, the blissful feeling is hardly to describe in a single word, especially you need reward and motivate yourself if you were kept in the shity work. Lifespan? Certainly not. Longevity? Probably not. However, what else you can do if you don‚Äôt hack it?</p><p>Need to change my PC mindset finally. Keep reminding me ‚ÄúDon‚Äôt panic, you are using a Mac.‚Äù</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Prelude&quot;&gt;&lt;a href=&quot;#Prelude&quot; class=&quot;headerlink&quot; title=&quot;Prelude&quot;&gt;&lt;/a&gt;Prelude&lt;/h2&gt;&lt;p&gt;This is a re-posted article I published on May 19t
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Run ssh and scp with AWS Session Manager</title>
    <link href="https://terrencemiao.github.io/blog/2019/11/22/Run-ssh-and-scp-with-AWS-Session-Manager/"/>
    <id>https://terrencemiao.github.io/blog/2019/11/22/Run-ssh-and-scp-with-AWS-Session-Manager/</id>
    <published>2019-11-22T01:09:05.000Z</published>
    <updated>2021-04-30T09:14:47.658Z</updated>
    
    <content type="html"><![CDATA[<h2 id="AWS-Session-Manager"><a href="#AWS-Session-Manager" class="headerlink" title="AWS Session Manager"></a>AWS Session Manager</h2><p>New AWS Systems Manager, including Session Manager is another step enhance security on Cloud. Here are step by step how to set up.</p><ul><li>You have <code>ec2-user</code> account on AWS EC2 instance. On localhost:</li></ul><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ cat .aws/config</span><br><span class="line">[default]</span><br><span class="line">output = json</span><br><span class="line">region = ap-southeast-2</span><br><span class="line"></span><br><span class="line">[session]</span><br><span class="line">output = json</span><br><span class="line">region = ap-southeast-2</span><br><span class="line"></span><br><span class="line">ùúÜ cat .aws/credentials</span><br><span class="line">[default]</span><br><span class="line">aws_access_key_id = ASIANPOWERHOUSEBLAHBLAH</span><br><span class="line">aws_secret_access_key = aGLMountainLionPIEXL0UK0TunalNB61Kt+GuavaVm4tAD</span><br><span class="line"></span><br><span class="line">[session]</span><br><span class="line">aws_access_key_id = ASIANPOWERHOUSEBLAHBLAH</span><br><span class="line">aws_secret_access_key = aGLMountainLionPIEXL0UK0TunalNB61Kt+GuavaVm4tAD</span><br><span class="line">aws_session_token = FwoGZXIvYXdzEB8aDDuzeYcE5QDFo0 ... z2h/Px7nUMEWaZOZZw==</span><br><span class="line"></span><br><span class="line">ùúÜ ssh -i .ssh/aws-key.pem -l ec2-user ec2-3-121-69-96.ap-southeast-2.compute.amazonaws.com</span><br><span class="line">Last login: Fri Nov 22 01:17:33 2019 from 155.144.114.41</span><br><span class="line"></span><br><span class="line">       __|  __|_  )</span><br><span class="line">       _|  (     /   Amazon Linux 2 AMI</span><br><span class="line">      ___|\___|___|</span><br><span class="line"></span><br><span class="line">https://aws.amazon.com/amazon-linux-2/</span><br></pre></td></tr></table></figure><p>NOTE: Need <strong>ROOT</strong> access key pair <code>ASIANPOWERHOUSEBLAHBLAH</code> above setup in <code>sandpit</code> profile to run <code>aws sts</code> command.</p><p>NOTE: <strong>IAM role</strong> for EC2 instance need to have <code>AmazonSSMManagedInstanceCore</code> policy. So create a customised role <code>CustomAmazonSSMManagedInstanceCore</code> in AWS IAM including <code>AmazonSSMManagedInstanceCore</code> policy, and bind this IAM role with EC2 instance, also with security group and key pair.</p><p><img src="/blog/img/AWS%20Session%20Manager%20-%20Managed%20instances.png" alt="AWS Session Manager - Managed instances" title="AWS Session Manager - Managed instances"></p><ul><li>Install all the dependencies<ol><li>latest Systems Manager Agent on your EC2 instance; enabled ‚Äú<strong>Agent auto update</strong>‚Äù under Managed Instances in AWS Systems Manager</li><li>latest AWS CLI on localhost</li><li>latest Session Manager Plugin on localhost</li></ol></li></ul><p><img src="/blog/img/AWS%20Session%20Manager%20-%20Agent%20auto%20update.png" alt="AWS Session Manager - Agent auto update" title="AWS Session Manager - Agent auto update"></p><ul><li>Add customised RunAs users via ‚ÄúRun Command‚Äù</li></ul><p>To elevated <code>SSM_pwr_user</code>, a customised user to allow login EC2 instance, with command:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ useradd -g wheel SSM_pwr_user</span><br><span class="line">ùúÜ echo "SSM_pwr_user ALL=(ALL) NOPASSWD:ALL" &gt; /etc/sudoers.d/SSM_pwr_user</span><br></pre></td></tr></table></figure><p><img src="/blog/img/AWS%20System%20Manager%20-%20Run%20a%20command.png" alt="AWS System Manager - Run a command" title="AWS System Manager - Run a command"></p><p>Updated solution if SSM throws error ‚Äú<strong>Unable to start shell: failed to start pty since RunAs user ssm-user does not exist</strong>‚Äú:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ useradd -g wheel ssm-user</span><br><span class="line">ùúÜ cd /etc/sudoers.d</span><br><span class="line">ùúÜ echo "ssm-user ALL=(ALL) NOPASSWD:ALL" &gt; ssm-agent-users</span><br></pre></td></tr></table></figure><ul><li>Update SSH config file on localhost to proxy commands through the AWS Session Manager for any EC2 instance id</li></ul><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ cat .ssh/config</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> SSH over Session Manager</span></span><br><span class="line">host i-* mi-*</span><br><span class="line">    ProxyCommand sh -c "aws ssm start-session --target %h --document-name AWS-StartSSHSession --parameters 'portNumber=%p'"</span><br></pre></td></tr></table></figure><ul><li>Generate session token</li></ul><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ date</span><br><span class="line">Thu 21 Nov 2019 04:33:03 UTC</span><br><span class="line"></span><br><span class="line">ùúÜ aws sts get-session-token --duration-seconds 129600 --profile sandpit</span><br><span class="line">&#123;</span><br><span class="line">    "Credentials": &#123;</span><br><span class="line">        "SecretAccessKey": "I7brpY8XWDWYwwyUdp5PLq7cxpskuMSHyBtPjPNE",</span><br><span class="line">        "SessionToken": "FwoGZXIvYXdzENL//////////wEaDKKdWTVmCrwKRiMbOSKCAbkQr ... YiNntciJszsZVRypXz1HTfa3gbcKoNXHon8=",</span><br><span class="line">        "Expiration": "2019-11-22T16:33:12Z",</span><br><span class="line">        "AccessKeyId": "ASIASZPQ3TMDVJVIGM7H"</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>If AWS user <code>ec2-user</code> has MFA enabled, generate session token like this:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ aws sts get-session-token --duration-seconds 129600 --serial-number arn:aws:iam::910218657901234:mfa/root-account-mfa-device --token-code 251556</span><br></pre></td></tr></table></figure><ul><li>Add session token in AWS credentials file on localhost, and test</li></ul><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ cat .aws/credentials</span><br><span class="line">[default]</span><br><span class="line">aws_access_key_id = ASIANPOWERHOUSEBLAHBLAH</span><br><span class="line">aws_secret_access_key = aGLMountainLionPIEXL0UK0TunalNB61Kt+GuavaVm4tAD</span><br><span class="line"></span><br><span class="line">[session]</span><br><span class="line">aws_access_key_id = ASIASZPQ3TMDVJVIGM7H</span><br><span class="line">aws_secret_access_key = I7brpY8XWDWYwwyUdp5PLq7cxpskuMSHyBtPjPNE</span><br><span class="line">aws_session_token = FwoGZXIvYXdzENL//////////wEaDKKdWTVmCrwKRiMbOSKCAbkQr ... YiNntciJszsZVRypXz1HTfa3gbcKoNXHon8=</span><br><span class="line"></span><br><span class="line">ùúÜ aws ssm start-session --target i-e2f189dashfdf65weqfwda2 --profile session</span><br><span class="line"></span><br><span class="line">Starting session with SessionId: ec2-user-094c34172bdc6fc22</span><br><span class="line">sh-4.2$ whoami</span><br><span class="line">ssm-user</span><br><span class="line"></span><br><span class="line">ùúÜ aws ssm send-command --instance-ids "i-e2f189dashfdf65weqfwda2" --document-name "AWS-RunShellScript" --comment "IP config" --parameters commands=ifconfig --output text</span><br><span class="line">COMMAND39e80533-376e-46fa-bb11-8daf040fe80fIP config00AWS-RunShellScript01574377262.95001574370062.9PendingPending1</span><br><span class="line">CLOUDWATCHOUTPUTCONFIGFalse</span><br><span class="line">INSTANCEIDSi-e2f189dashfdf65weqfwda2</span><br><span class="line">NOTIFICATIONCONFIG</span><br><span class="line">COMMANDSifconfig</span><br><span class="line"></span><br><span class="line">ùúÜ aws ssm list-command-invocations --command-id 39e80533-376e-46fa-bb11-8daf040fe80f --details --profile personal</span><br><span class="line">&#123;</span><br><span class="line">    "CommandInvocations": [</span><br><span class="line">        &#123;</span><br><span class="line">            "Comment": "IP config",</span><br><span class="line">            "Status": "Success",</span><br><span class="line">            "CommandPlugins": [</span><br><span class="line">                &#123;</span><br><span class="line">                    "Status": "Success",</span><br><span class="line">                    "ResponseStartDateTime": 1574370063.609,</span><br><span class="line">                    "StandardErrorUrl": "",</span><br><span class="line">                    "OutputS3BucketName": "",</span><br><span class="line">                    "OutputS3Region": "ap-southeast-2",</span><br><span class="line">                    "OutputS3KeyPrefix": "",</span><br><span class="line">                    "ResponseCode": 0,</span><br><span class="line">                    "Output": "eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 9001\n        inet 172.31.9.155  netmask 255.255.240.0  broadcast 172.31.15.255\n        inet6 fe80::69:c9ff:fe76:91ae  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 02:69:c9:76:91:ae  txqueuelen 1000  (Ethernet)\n        RX packets 60339  bytes 17254584 (16.4 MiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 56971  bytes 13112880 (12.5 MiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\n",</span><br><span class="line">                    "ResponseFinishDateTime": 1574370063.634,</span><br><span class="line">                    "StatusDetails": "Success",</span><br><span class="line">                    "StandardOutputUrl": "",</span><br><span class="line">                    "Name": "aws:runShellScript"</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            "ServiceRole": "",</span><br><span class="line">            "CloudWatchOutputConfig": &#123;</span><br><span class="line">                "CloudWatchLogGroupName": "",</span><br><span class="line">                "CloudWatchOutputEnabled": false</span><br><span class="line">            &#125;,</span><br><span class="line">            "InstanceId": "i-e2f189dashfdf65weqfwda2",</span><br><span class="line">            "DocumentName": "AWS-RunShellScript",</span><br><span class="line">            "NotificationConfig": &#123;</span><br><span class="line">                "NotificationArn": "",</span><br><span class="line">                "NotificationEvents": [],</span><br><span class="line">                "NotificationType": ""</span><br><span class="line">            &#125;,</span><br><span class="line">            "DocumentVersion": "",</span><br><span class="line">            "StatusDetails": "Success",</span><br><span class="line">            "StandardOutputUrl": "",</span><br><span class="line">            "StandardErrorUrl": "",</span><br><span class="line">            "InstanceName": "",</span><br><span class="line">            "CommandId": "39e80533-376e-46fa-bb11-8daf040fe80f",</span><br><span class="line">            "RequestedDateTime": 1574370062.995</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>Monitor AWS Session Manager log <code>/var/log/amazon/ssm/amazon-ssm-agent.log</code> on EC2 instance</p></li><li><p>Test <code>ssh</code> command with session token</p></li></ul><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ ssh -i .ssh/aws-key.pem -l ec2-user i-e2f189dashfdf65weqfwda2</span><br><span class="line">Last login: Fri Nov 22 00:19:32 2019 from localhost</span><br><span class="line"></span><br><span class="line">       __|  __|_  )</span><br><span class="line">       _|  (     /   Amazon Linux 2 AMI</span><br><span class="line">      ___|\___|___|</span><br><span class="line"></span><br><span class="line">https://aws.amazon.com/amazon-linux-2/</span><br></pre></td></tr></table></figure><ul><li>Test <code>scp</code> command with session token</li></ul><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ scp -i .ssh/aws-key.pem /tmp/adobegc.log ec2-user@i-e2f189dashfdf65weqfwda2:/tmp</span><br><span class="line">stack-overflow.log                                                                 100%   67KB 437.0KB/s   00:00</span><br></pre></td></tr></table></figure><p>Transferring files directly is not possible with the AWS Session Manager. You should use S3 bucket and the AWS CLI to exchange data. Doing so is not quite the same as using <code>scp</code>.</p><h2 id="OKTA"><a href="#OKTA" class="headerlink" title="OKTA"></a>OKTA</h2><p>Set up integrated OKTA authentication with session. Have you OKTA AWS CLI installed at first, and configure it:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ cat ~/.okta-aws</span><br><span class="line">[default]</span><br><span class="line">base-url = hello.paradise.org</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># The remaining parameters are optional.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># You will be prompted for them, if they're not included here.</span></span></span><br><span class="line">username = terrence.miao@paradise.org</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Current choices are: GOOGLE or OKTA</span></span><br><span class="line">factor = OKTA</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> AWS role name (match one of the options prompted <span class="keyword">for</span> by <span class="string">"Please select the AWS role"</span> when this parameter is not specified</span></span><br><span class="line">role =</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Found <span class="keyword">in</span> Okta<span class="string">'s configuration for your AWS account.</span></span></span><br><span class="line">app-link = https://hello.paradise.org/home/amazon_aws/0oa1ch3l6/272</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> duration <span class="keyword">in</span> seconds to request a session token <span class="keyword">for</span>, make sure your accounts (both AWS itself and the associated okta application) allow <span class="keyword">for</span> large durations. default: 3600</span></span><br><span class="line">duration = 28800</span><br></pre></td></tr></table></figure><p>Create session:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ bin/okta/okta --okta-profile default --force --profile session</span><br><span class="line">Enter password:</span><br><span class="line">Multi-factor Authentication required.</span><br><span class="line">Pick a factor:</span><br><span class="line">[ 0 ] Okta Verify App: SmartPhone_Android: ONEPLUS A5010</span><br><span class="line">[ 1 ] token:software:totp( OKTA ) : terrence.miao@paradise.org</span><br><span class="line">Selection: 0</span><br><span class="line">1: arn:aws:iam::004385754915:role/federation/DeveloperPowerUser</span><br><span class="line">2: arn:aws:iam::254184710243:role/federation/DeveloperPowerUser</span><br><span class="line">3: arn:aws:iam::755034721059:role/federation/DeveloperPowerUser</span><br><span class="line">4: arn:aws:iam::844986439712:role/federation/DeveloperPowerUser</span><br><span class="line">5: arn:aws:iam::844986439712:role/federation/Operations</span><br><span class="line">6: arn:aws:iam::915951833499:role/federation/DeveloperPowerUser</span><br><span class="line">Please select the AWS role: 3</span><br><span class="line">Session token expires on: 2019-12-05 06:30:18+00:00</span><br></pre></td></tr></table></figure><p>Login EC2 instance, overwritting default <code>ap-southeast-2</code> region:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ aws ssm start-session --target i-04ee902e33625c4f3 --profile session --region us-east-2 --debug</span><br><span class="line"></span><br><span class="line">Starting session with SessionId: terrence.miao@paradise.org-05411f2e2d5a58b0b</span><br></pre></td></tr></table></figure><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li>Troubleshooting Systems Manager Run Command, <em><a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/troubleshooting-remote-commands.html#systems-manager-ssm-agent-log-files" target="_blank" rel="noopener">https://docs.aws.amazon.com/systems-manager/latest/userguide/troubleshooting-remote-commands.html#systems-manager-ssm-agent-log-files</a></em></li><li>Provides Okta authentication for awscli, <em><a href="https://github.com/jmhale/okta-awscli" target="_blank" rel="noopener">https://github.com/jmhale/okta-awscli</a></em></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;AWS-Session-Manager&quot;&gt;&lt;a href=&quot;#AWS-Session-Manager&quot; class=&quot;headerlink&quot; title=&quot;AWS Session Manager&quot;&gt;&lt;/a&gt;AWS Session Manager&lt;/h2&gt;&lt;p&gt;Ne
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>A simple approach to export / import AWS DynamoDB table items</title>
    <link href="https://terrencemiao.github.io/blog/2019/04/23/A-simple-approach-to-export-import-AWS-DynamoDB-table-items/"/>
    <id>https://terrencemiao.github.io/blog/2019/04/23/A-simple-approach-to-export-import-AWS-DynamoDB-table-items/</id>
    <published>2019-04-23T08:59:29.000Z</published>
    <updated>2019-04-23T09:35:48.021Z</updated>
    
    <content type="html"><![CDATA[<p>Try to export items from AWS Test environment DynamoDB tables into Production. A simple Bash SHELL script, with a few commands and AWS CLI could do the work.</p><ul><li>In AWS DynamoDB console, export selected items into .csv file like this:</li></ul><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ cat dws-tile-publisher-ptest-tile.csv</span><br><span class="line">"id (S)","available_to (SS)","benefit_type (S)","category_id (S)","created_date (S)","created_user (S)","description (S)","image_bucket (S)","image_key (S)","last_modified_date (S)","last_modified_user (S)","status (S)","sub_category_id (S)","title (S)","valid_from (S)","valid_to (S)","claim_url (S)","discount_code (S)"</span><br><span class="line">"950c529b-d6ae-472b-b44a-510ec201c167","&#123; ""0b1b9ed4-e171-4eaf-9d20-1a870ab7cc7c"", ""2df9daf4-da50-4ff9-9322-969d02c178f4"", ""b6fdcdc7-ffe6-4007-ae56-f5ab545768ec"", ""bc1c7285-ac47-4d06-b4c6-6f3780cbfb3f"" &#125; ","DISCOUNT","8d27fb2d-c5f8-487a-a869-2ffd0e476eb6","2019-04-23T01:02:18.123","Angelo.Woods@test.npe.paradise.org","Testing descriptions","dws-tile-images-ptest","Samsung-Galaxy-10-Leak.jpg","2019-04-23T01:02:18.125","Angelo.Woods@test.npe.paradise.org","ARCHIVED","6936a6ed-fa97-4439-9129-c43e288011b3","Samsung Galaxy 10","2019-03-24T01:00","2021-02-25T23:00","http://www.google.com",</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">"095cc9b4-fd64-4479-8817-0b35b8ddcbc2","&#123; ""0b1b9ed4-e171-4eaf-9d20-1a870ab7cc7c"", ""2df9daf4-da50-4ff9-9322-969d02c178f4"", ""b6fdcdc7-ffe6-4007-ae56-f5ab545768ec"", ""bc1c7285-ac47-4d06-b4c6-6f3780cbfb3f"" &#125; ","DISCOUNT","1f028ecb-4115-4378-b00e-3fcd4cbdf54d","2019-04-23T03:50:31.226","Angelo.Woods@test.npe.paradise.org","&lt;div&gt;Employees now have access to an exclusive member offers portal through the Samsung Employee Purchase program. Get up to 35% off the RRP across a wide range of products including mobile phones, tablets, televisions, refrigerators, washing machines, monitors and more.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;","dws-tile-images-ptest","samsung.jpg","2019-04-23T03:50:31.228","Angelo.Woods@test.npe.paradise.org","PUBLISHED","ce07c19b-dd87-4890-9ad3-6acfe0998496","Samsung","2019-04-17T01:00","2025-01-01T23:00","https://shop.samsung.com/au/multistore/auepp/austpost_au/","Simply go to link provided to access the site. Browse our categories, add your products to cart and checkout. Happy Shopping! "</span><br></pre></td></tr></table></figure><ul><li>Generate a key:value hashtable used later. Key is ‚Äúid‚Äù column, value is ‚Äúimage_key‚Äù colomn:</li></ul><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ awk -F"\",\"" '&#123;print $1 ":" $9 "\""&#125;' dws-tile-publisher-test-tile.csv | sed 's/jpg/json/' | sed 's/png/json/' | sed -n '1d;p'</span><br><span class="line">"950c529b-d6ae-472b-b44a-510ec201c167:Samsung-Galaxy-10-Leak.json"</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">"095cc9b4-fd64-4479-8817-0b35b8ddcbc2:samsung.json"</span><br></pre></td></tr></table></figure><ul><li>Run the bash script and retrieve item from AWS DyanmoDB table, tranform it and output into a JSON file for import into AWS Production production table:</li></ul><script src="https://gist.github.com/TerrenceMiao/de10c70aa6adf212fae6e9fc4d63c025.js"></script><ul><li>A generated JSON file looks like this:</li></ul><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">ùúÜ cat Samsung-Galaxy-10-Leak.json</span><br><span class="line">&#123;</span><br><span class="line">    "status": &#123;</span><br><span class="line">        "S": "PUBLISHED"</span><br><span class="line">    &#125;,</span><br><span class="line">    "valid_from": &#123;</span><br><span class="line">        "S": "2019-03-24T01:00"</span><br><span class="line">    &#125;,</span><br><span class="line">    "sub_category_id": &#123;</span><br><span class="line">        "S": "6936a6ed-fa97-4439-9129-c43e288011b3"</span><br><span class="line">    &#125;,</span><br><span class="line">    "description": &#123;</span><br><span class="line">        "S": "Testing descriptions"</span><br><span class="line">    &#125;,</span><br><span class="line">    "image_key": &#123;</span><br><span class="line">        "S": "Samsung-Galaxy-10-Leak.jpg"</span><br><span class="line">    &#125;,</span><br><span class="line">    "claim_url": &#123;</span><br><span class="line">        "S": "http://www.google.com"</span><br><span class="line">    &#125;,</span><br><span class="line">    "last_modified_date": &#123;</span><br><span class="line">        "S": "2019-04-23T01:02:18.125"</span><br><span class="line">    &#125;,</span><br><span class="line">    "valid_to": &#123;</span><br><span class="line">        "S": "2021-02-25T23:00"</span><br><span class="line">    &#125;,</span><br><span class="line">    "created_user": &#123;</span><br><span class="line">        "S": "Noel.French@paradise.org"</span><br><span class="line">    &#125;,</span><br><span class="line">    "benefit_type": &#123;</span><br><span class="line">        "S": "DISCOUNT"</span><br><span class="line">    &#125;,</span><br><span class="line">    "last_modified_user": &#123;</span><br><span class="line">        "S": "Noel.French@paradise.org"</span><br><span class="line">    &#125;,</span><br><span class="line">    "created_date": &#123;</span><br><span class="line">        "S": "2019-04-23T01:02:18.123"</span><br><span class="line">    &#125;,</span><br><span class="line">    "title": &#123;</span><br><span class="line">        "S": "Samsung Galaxy 10"</span><br><span class="line">    &#125;,</span><br><span class="line">    "category_id": &#123;</span><br><span class="line">        "S": "8d27fb2d-c5f8-487a-a869-2ffd0e476eb6"</span><br><span class="line">    &#125;,</span><br><span class="line">    "image_bucket": &#123;</span><br><span class="line">        "S": "dws-tile-images-prod"</span><br><span class="line">    &#125;,</span><br><span class="line">    "id": &#123;</span><br><span class="line">        "S": "950c529b-d6ae-472b-b44a-510ec201c167"</span><br><span class="line">    &#125;,</span><br><span class="line">    "available_to": &#123;</span><br><span class="line">        "SS": [</span><br><span class="line">            "0b1b9ed4-e171-4eaf-9d20-1a870ab7cc7c",</span><br><span class="line">            "2df9daf4-da50-4ff9-9322-969d02c178f4",</span><br><span class="line">            "b6fdcdc7-ffe6-4007-ae56-f5ab545768ec",</span><br><span class="line">            "bc1c7285-ac47-4d06-b4c6-6f3780cbfb3f"</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Now run the bash script and import JSON file into AWS Production DynamoDB table:</li></ul><script src="https://gist.github.com/TerrenceMiao/c61f7721fe9721d7f6983cce821e7929.js"></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Try to export items from AWS Test environment DynamoDB tables into Production. A simple Bash SHELL script, with a few commands and AWS CL
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Keep running</title>
    <link href="https://terrencemiao.github.io/blog/2019/01/11/Keep-running/"/>
    <id>https://terrencemiao.github.io/blog/2019/01/11/Keep-running/</id>
    <published>2019-01-11T00:27:56.000Z</published>
    <updated>2019-01-11T00:42:07.667Z</updated>
    
    <content type="html"><![CDATA[<p>ËÆ∏Â§öÊù∞Âá∫ÁöÑ‰∫∫Áâ©ÈÉΩÊòØÈïøË∑ëÁà±Â•ΩËÄÖÔºåÊØîÂ¶ÇÈòøÂÖ∞¬∑ÂõæÁÅµ„ÄÇ</p><p>ÂõæÁÅµÁöÑÂ§¥Ë°îÊúâÂæàÂ§öÔºå‰º†Â•áÊÄßÁöÑÊï∞Â≠¶ÂÆ∂„ÄÅÈÄªËæëÂ≠¶ÂÆ∂„ÄÅÁé∞‰ª£ËÆ°ÁÆóÊú∫‰πãÁà∂„ÄÇ‰ΩÜÂæàÂ∞ë‰∫∫Áü•ÈÅì‰ªñ‰πüÊòØ‰∏Ä‰ΩçÂá∫Ëâ≤ÁöÑË∑ëËÄÖÔºåÁîöËá≥Â∑ÆÁÇπÁ´ô‰∏ä‰∫ÜÂ••Ëøê‰ºöÁöÑËàûÂè∞„ÄÇ</p><p>ÂõæÁÅµ‰ªé‰∏≠Â≠¶Â∞±ÂºÄÂßãË∑ëÊ≠•Ôºå‰ΩÜÁõ¥Âà∞ 30 Â§öÂ≤ÅÊâçÊ≠£ÂºèËøõË°åÈïøË∑ëËÆ≠ÁªÉ„ÄÇ</p><p>Ë∑ëÈÅì‰∏äÁöÑÂõæÁÅµ‚ÄúÂ§ßÂô®ÊôöÊàê‚ÄùÔºåÂá∫Ëâ≤ÁöÑËøêÂä®Â§©Ëµã‰∏ùÊØ´‰∏çÈÄäËâ≤‰∫é‰ªñÁöÑÂ§¥ËÑë„ÄÇ</p><p>14 Â≤ÅÈÇ£Âπ¥Ôºå‰ªñÂú®Ë∞¢‰ºØÊÅ©ÂØÑÂÆøÈ´ò‰∏≠Â∞±ËØªÁöÑÁ¨¨‰∏ÄÊó•ÔºåÁî±‰∫éÂ§ßÁΩ¢Â∑•ÔºåÂΩìÂú∞ÁöÑÂÖ¨ÂÖ±‰∫§ÈÄöËÆæÊñΩÂÖ®ÈÉ®ÂÅúËøê„ÄÇÂõæÁÅµÊ≤°ÊúâÁ≠âÂà∞‰∫§ÈÄöÊÅ¢Â§çÔºåÂ∞±‰ªéÂçóÂÆâÊôÆÊï¶‰∏ÄÂè£Ê∞îÈ™ëË°å 96 ÂÖ¨ÈáåÂà∞Ëææ‰Ωç‰∫éÂ§öÂ°ûÁâπÈÉ°Ë•øÂåóÁöÑÂ≠¶Ê†°‰∏äÂ≠¶ÔºåÂºïÂèëÂÖ®Ê†°ËΩ∞Âä®„ÄÇ</p><p>1931 Âπ¥ÔºåÂΩì‰ªñËøõÂÖ•ÂâëÊ°•ÂõΩÁéãÂ≠¶Èô¢Â≠¶‰π†Êó∂Ôºå‰ªñÊõæÂ§öÊ¨°Âú®Â≠¶Ê†°Âíå‰ºäÂà©Èïá‰πãÈó¥ËøõË°åÊäòËøîË∑ëÔºå‰∏Ä‰∏™Êù•ÂõûÂ∞±Â∑Æ‰∏çÂ§ö 50 ÂÖ¨Èáå„ÄÇ</p><p>1947 Âπ¥ÔºåÂú®Ëé±ÊñØÁâπÈÉ°ÊãâÂ§´Â†°ÔºàLoughboroughÔºâÂ§ßÂ≠¶‰ΩìËÇ≤Âú∫‰∏æË°åÁöÑËã±ÂõΩ‰∏ö‰ΩôÁî∞ÂæÑÂçè‰ºöÈ©¨ÊãâÊùæÈî¶Ê†áËµõ‰∏äÔºåÂõæÁÅµË∑ëÂá∫‰∫Ü‰ªñÂú®È©¨ÊãâÊùæËµõ‰∏≠ÁöÑ‰∏™‰∫∫ÊúÄÂ•ΩÊàêÁª© 2 Â∞èÊó∂ 46 ÂàÜ 03 ÁßíÔºåÂú®ÈÇ£Âú∫ÊØîËµõ‰∏≠ÂêçÂàóÁ¨¨‰∫î„ÄÇ</p><p>Âú® 1948 Âπ¥‰º¶Êï¶ÁöÑÂ••Ëøê‰ºöÈ©¨ÊãâÊùæÊØîËµõ‰∏äÔºåÂΩìÊó∂ÂÜ†ÂÜõÁöÑÊàêÁª©ÊòØ 2 Â∞èÊó∂ 34 ÂàÜ 52 Áßí„ÄÇÂõæÁÅµ‰ªÖÊØîÈáëÁâåÂæó‰∏ªÊÖ¢‰∫Ü 11 ÂàÜÈíü„ÄÇËÄåÊçÆËã±ÂõΩ„ÄäÊ≥∞Êô§Â£´Êä•„ÄãÊä•ÈÅìÔºåÂõæÁÅµÁöÑÊúÄÂ•ΩÊàêÁª©Âú®ÂΩìÂπ¥Ôºà1947Âπ¥ÔºâË∂≥‰ª•ÊéíÂêç‰∏ñÁïåÂâç‰∏â„ÄÇ</p><p><img src="https://therunnereclectic.files.wordpress.com/2014/11/alan-turing-running.jpg" alt="Alan Turning running" title="Alan Turning running"></p><p>When Alan Turing was asked why he punished himself so much in training. He said ‚ÄúI have such a stressful job that the only way I can get it out of my mind is by running hard; its the only way I can get some release.‚Äù</p><p>Â••ÊñØÂç°ÊúÄ‰Ω≥ÊîπÁºñÂâßÊú¨ÁîµÂΩ±„ÄäÊ®°‰ªøÊ∏∏Êàè„ÄãThe Imitation Game ÊòØÊ†πÊçÆ‰ªñÁöÑ‰º†ËÆ∞„ÄäAlan Turing: The Enigma„ÄãÊãçÊëÑÁöÑ„ÄÇ</p><p><img src="https://img01.mgo-images.com/image/thumbnail/v2/content/MMV23F9EE71557457EFE04D2B6E4DBBA320A.jpeg" alt="The Imitation Game" title="The Imitation Game"></p><p><img src="https://static.gamesurf.it/immagini/2014/11272/big/the_imitation_game_584289.jpg" alt="Movie scene: Alan Turning running" title="Movie scene: Alan Turning running"></p><p>ËãπÊûúÂÖ¨Âè∏ÁöÑÂïÜÊ†á‰∏ÄÂ∫¶Ë¢´ËØØËÆ§‰∏∫ÊòØÊ∫ê‰∫éÂõæÁÅµËá™ÊùÄÊó∂Âí¨‰∏ãÁöÑËãπÊûúÔºå‰ΩÜËØ•ÂõæÊ°àÁöÑËÆæËÆ°Â∏àÂíåËãπÊûúÂÖ¨Âè∏ÈÉΩÂê¶ËÆ§Ëøô‰∏ÄËØ¥Ê≥ï„ÄÇ</p><p>Stephen Fry said on the BBC show QI XL in 2011 that his friend Steve Jobs said of the Turing tale, ‚ÄúIt isn‚Äôt true, but God we wish it were!‚Äù</p><p>‰πîÂ∏ÉÊñØË¢´Ëã±ÂõΩÂπøÊí≠ÂÖ¨Âè∏ÁîµËßÜËäÇÁõÆ„ÄäQI„Äã‰∏ªÊåÅ‰∫∫Âè≤ËíÇËä¨¬∑ÂºóËé±ÈóÆÂà∞Ê≠§‰∫ãÊó∂ËØ¥Ôºö‚ÄúËøôÔºàLOGO ÂêëÂõæÁÅµËá¥Êï¨Ôºâ‰∏çÊòØÁúüÁöÑÔºå‰ΩÜÊòØ‰∏äÂ∏ùÂïäÔºåÊàë‰ª¨Â∏åÊúõÂÆÉÊòØÁúüÁöÑ„ÄÇ‚Äù</p><p><img src="https://www.fineprintart.com/images/blog/history-of-apple-logo/Apple-Logo-by-Rob-Janoff.svg" alt="&quot;Apple logo&quot;" title="Apple logo"></p><p>Keep running.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ËÆ∏Â§öÊù∞Âá∫ÁöÑ‰∫∫Áâ©ÈÉΩÊòØÈïøË∑ëÁà±Â•ΩËÄÖÔºåÊØîÂ¶ÇÈòøÂÖ∞¬∑ÂõæÁÅµ„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂõæÁÅµÁöÑÂ§¥Ë°îÊúâÂæàÂ§öÔºå‰º†Â•áÊÄßÁöÑÊï∞Â≠¶ÂÆ∂„ÄÅÈÄªËæëÂ≠¶ÂÆ∂„ÄÅÁé∞‰ª£ËÆ°ÁÆóÊú∫‰πãÁà∂„ÄÇ‰ΩÜÂæàÂ∞ë‰∫∫Áü•ÈÅì‰ªñ‰πüÊòØ‰∏Ä‰ΩçÂá∫Ëâ≤ÁöÑË∑ëËÄÖÔºåÁîöËá≥Â∑ÆÁÇπÁ´ô‰∏ä‰∫ÜÂ••Ëøê‰ºöÁöÑËàûÂè∞„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂõæÁÅµ‰ªé‰∏≠Â≠¶Â∞±ÂºÄÂßãË∑ëÊ≠•Ôºå‰ΩÜÁõ¥Âà∞ 30 Â§öÂ≤ÅÊâçÊ≠£ÂºèËøõË°åÈïøË∑ëËÆ≠ÁªÉ„ÄÇ&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Add final and javadoc for auto-generated getters and setters in IntelliJ</title>
    <link href="https://terrencemiao.github.io/blog/2019/01/11/Add-final-and-javadoc-for-auto-generated-getters-and-setters-in-IntelliJ/"/>
    <id>https://terrencemiao.github.io/blog/2019/01/11/Add-final-and-javadoc-for-auto-generated-getters-and-setters-in-IntelliJ/</id>
    <published>2019-01-10T23:29:06.000Z</published>
    <updated>2019-01-11T00:19:41.628Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Default-final-modifier"><a href="#Default-final-modifier" class="headerlink" title="Default final modifier"></a>Default final modifier</h2><p>To satisfy Checkstyle setup. In IntelliJ (version 2018.3.2) Preferences | Editor &gt; Code Style &gt; Java, select ‚ÄúCode Generation‚Äù tab, check ‚ÄúMake generated parameters final‚Äù</p><p><img src="/blog/img/IntelliJ%20-%20final%20modifier.png" alt="Final Modifier" title="Final Modifier"></p><h2 id="javadoc-for-auto-generated-getters-and-setters"><a href="#javadoc-for-auto-generated-getters-and-setters" class="headerlink" title="javadoc for auto-generated getters and setters"></a>javadoc for auto-generated getters and setters</h2><p>Create customised Getter Template:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* Gets $field.name.</span><br><span class="line">*</span><br><span class="line">* @return value of $field.name</span><br><span class="line">*/</span><br><span class="line">#if($field.modifierStatic)</span><br><span class="line">static ##</span><br><span class="line">#end</span><br><span class="line">$field.type ##</span><br><span class="line">#set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))</span><br><span class="line">#if ($field.boolean &amp;&amp; $field.primitive)</span><br><span class="line">    is##</span><br><span class="line">#else</span><br><span class="line">    get##</span><br><span class="line">#end</span><br><span class="line">$&#123;name&#125;() &#123;</span><br><span class="line">    return $field.name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/blog/img/IntelliJ%20-%20Getter%20Template.png" alt="Getter Template" title="Getter Template"></p><p>Create customised Setter Template:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* Sets $field.name.</span><br><span class="line">*</span><br><span class="line">* @param $field.name value of $field.name</span><br><span class="line">*/</span><br><span class="line">#set($paramName = $helper.getParamName($field, $project))</span><br><span class="line">#if($field.modifierStatic)</span><br><span class="line">static ##</span><br><span class="line">#end</span><br><span class="line">void set$StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project)))($field.type $paramName) &#123;</span><br><span class="line">#if ($field.name == $paramName)</span><br><span class="line">    #if (!$field.modifierStatic)</span><br><span class="line">    this.##</span><br><span class="line">    #else</span><br><span class="line">        $classname.##</span><br><span class="line">    #end</span><br><span class="line">#end</span><br><span class="line">$field.name = $paramName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/blog/img/IntelliJ%20-%20Setter%20Template.png" alt="Setter Template" title="Setter Template"></p><p>Use the customised Getter and Setter templates when automatically generate getters and setters:</p><p><img src="/blog/img/IntelliJ%20-%20auto-generated%20getters%20setters.png" alt="auto-generated getters setters" title="auto-generated getters setters"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Default-final-modifier&quot;&gt;&lt;a href=&quot;#Default-final-modifier&quot; class=&quot;headerlink&quot; title=&quot;Default final modifier&quot;&gt;&lt;/a&gt;Default final modifi
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Year 2018 in the Rear View Mirror</title>
    <link href="https://terrencemiao.github.io/blog/2019/01/01/Year-2018-in-the-Rear-View-Mirror/"/>
    <id>https://terrencemiao.github.io/blog/2019/01/01/Year-2018-in-the-Rear-View-Mirror/</id>
    <published>2018-12-31T13:46:43.000Z</published>
    <updated>2018-12-31T13:58:01.466Z</updated>
    
    <content type="html"><![CDATA[<p>2018 ÊòØ‰∏Ä‰∏™ËÆ©‰∫∫Êï¨ÁïèÊÅêÊÉß‚ÄúÈÄ¢ÂÖ´ÂøÖÂèò‚ÄùÁöÑÂπ¥‰ªΩ„ÄÇ2018 ÊòØËøáÂéªÂçÅÂπ¥‰∏≠ÊúÄÁ≥üÁ≥ïÁöÑ‰∏ÄÂπ¥Ôºå‰ΩÜ‰πüËÆ∏ÊòØÊú™Êù•ÂçÅÂπ¥ÈáåÊúÄÂ•ΩÁöÑ‰∏ÄÂπ¥„ÄÇ</p><p>2018 Âπ¥ËøáÂéª‰∫ÜÔºåÊàëÂæàÊÄÄÂøµÂÆÉ„ÄÇ</p><p><img src="/blog/img/Year%202018%20-%2001.jpg" alt="Year 2018 - 01" title="Year 2018 - 01"></p><p>Âõæ 1Ôºö2018 Âπ¥ÊòØÂú®ËøáÂéªÂçÅÂπ¥‰∏≠ÂîØ‰∏ÄÁöÑÂêÑÈ°πÊäïËµÑÈÉΩ‰∏∫Ë¥üÂ¢ûÈïøÁöÑ‰∏ÄÂπ¥„ÄÇ</p><p><img src="/blog/img/Year%202018%20-%2002.jpg" alt="Year 2018 - 02" title="Year 2018 - 02"></p><p>Âõæ2ÔºöÁæéÂõΩËÇ°Â∏ÇËøõÂÖ•‰∏ãÂçäÂπ¥‰∏ÄÁõ¥Ë∑åË∑å‰∏ç‰ºë„ÄÇ‰ΩÜÂú® Boxing Day Âç¥ÂàõÈÄ†‰∫ÜÂçïÊó•Ê∂®ÂπÖÁöÑÁ∫™ÂΩï„ÄÇ</p><p><img src="/blog/img/Year%202018%20-%2003.jpg" alt="Year 2018 - 03" title="Year 2018 - 03"></p><p>Âõæ 3ÔºöÈªéÊõº Zeta ÂáΩÊï∞ÔºåÁî®‰∫éËÆ°ÁÆóÁ¥†Êï∞ÂàÜÂ∏É„ÄÇ2018 Âπ¥Â§ö‰∫∫Â£∞Áß∞ËØÅÊòé‰∫ÜÁôæÂπ¥Êú™Ëß£ÂÜ≥ÁöÑÈªéÊõºÁåúÊÉ≥Ôºå‰ΩÜÊúÄÁªàÈÉΩÊòØÈóπÂâßÊî∂Âú∫„ÄÇÈªéÊõºÁåúÊÉ≥‰æùÁÑ∂ÊúâÂ¶ÇÊúÄ‰∏∫Â£ÆÁæéÔºåÂ∑çÂ≥®ÔºåÈô©Â≥ªÁöÑÂ•áÂ±±ÔºåÁüóÁ´ãÂú®‰∫∫Á±ªÁöÑÊô∫ÂäõÂ∑ÖÂ≥∞‰πã‰∏ä„ÄÇ</p><p><img src="/blog/img/Year%202018%20-%2004.jpg" alt="Year 2018 - 04" title="Year 2018 - 04"></p><p>Âõæ 4ÔºöThe cost of livingÔºåcity by city„ÄÇÁîüÊ¥ªÊúâÂ§öË¥µÔºü‰∏≠ÂõΩÂÖ≠ÂüéÂ∏ÇÂÖ•ÈÄâÂÖ®ÁêÉÁîüÊ¥ªÊàêÊú¨ÊúÄÊòÇË¥µÁöÑ top 25 list.</p><p><img src="/blog/img/Year%202018%20-%2005.jpg" alt="Year 2018 - 05" title="Year 2018 - 05"></p><p>Âõæ 5ÔºöËÇØÂ∞º‰∫öÁöÑ Eliud Kipchoge Âú® 2018 Âπ¥ÊüèÊûóÈ©¨ÊãâÊùæ‰∏äÂàõÈÄ†ÁöÑ 2 Â∞èÊó∂ 1 ÂàÜ 39 ÁßíÁöÑÈ©¨ÊãâÊùæ‰∏ñÁïåÁ∫™ÂΩï„ÄÇ‰∫∫Á±ª‰ªçÁÑ∂Âú®ËØïÂõæÁ™ÅÁ†¥ 2 Â∞èÊó∂ÂÆåÊàêÈ©¨ÊãâÊùæÁöÑËøêÂä®ÊûÅÈôê„ÄÇ</p><p><img src="/blog/img/Year%202018%20-%2006.jpg" alt="Year 2018 - 06" title="Year 2018 - 06"></p><p>Âõæ 6Ôºö‰∏≠ÂõΩ¬∑‰∏äÊµ∑</p><p><img src="/blog/img/Year%202018%20-%2007.jpg" alt="Year 2018 - 07" title="Year 2018 - 07"></p><p>Âõæ 7ÔºöChinese President Xi Jinping,centre, arrives with Premier Li Keqiang, left, for the opening session of the Chinese People‚Äôs Political Consultative Conference in Beijing‚Äôs Great Hall of the People on March 3, 2018.</p><p><img src="/blog/img/Year%202018%20-%2008.jpg" alt="Year 2018 - 08" title="Year 2018 - 08"></p><p>Âõæ 8ÔºöChinese President Xi Jinping Speech.</p><p><img src="/blog/img/Year%202018%20-%2009.jpg" alt="Year 2018 - 09" title="Year 2018 - 09"></p><p>Âõæ 9ÔºöÂú® 2018 Âπ¥ Pantone Colour of the yearÔºåUltra Violet Á¥´Â§ñÂÖâÂêéÔºåÊΩòÈÄöÂ≠êÁªôÂá∫ 2019 Âπ¥Â∫¶ÊµÅË°åËâ≤ Living Coral  ÁèäÁëöÊ©ô„ÄÇ</p><p><img src="/blog/img/Year%202018%20-%2010.jpg" alt="Year 2018 - 10" title="Year 2018 - 10"></p><p>Âõæ 10Ôºö2018 Âπ¥Â∫¶Ê±âÂ≠óÔºåÁî± ‚ÄúÁ©∑‚Äù Âíå ‚Äú‰∏ë‚Äù Âêà‰ΩìÊâÄÁªÑÊàêÔºåËØªÈü≥ÊòØ ‚Äúqiou‚ÄùÔºàÈü≥ÂêåÁ≥óÔºâÔºåÂç≥ÂèàÁ©∑Âèà‰∏ëÁöÑÊÑèÊÄù„ÄÇ‰∏çÂ∞ëÁΩëÂèãË°®Á§∫ÔºåËøôÂ≠óÂ∫îËØ•Âøµ ‚Äúwo‚ÄùÔºàÊàëÔºâ„ÄÇ</p><p><img src="/blog/img/Year%202018%20-%2011.jpg" alt="Year 2018 - 11" title="Year 2018 - 11"></p><p>Âõæ 11ÔºöÁîµÂΩ±„ÄäÁî≤Êñπ‰πôÊñπ„ÄãÁöÑÁªìÂ±Ä„ÄÇÊù®Á´ãÊñ∞Ëµ∞Âà∞Èõ™Âú∞ÈáåÔºåÊä¨Ëµ∑Â§¥ÔºåÂíåÊØè‰∏™ÊôÆÈÄö‰∫∫ÈÉΩ‰∏ÄÊ†∑ÔºåË¶ÅÁªßÁª≠Èù¢ÂØπÈ£éÈõ™„ÄÇÂ±ãÂ≠êÈáåÈù¢ÊòØÁ∫¢ÁÅØÁ¨ºÔºå‰∫ÆÂ†ÇÂ†ÇÁöÑ„ÄÇÂ§ñÈù¢Â∑≤ÁªèÊòØÂÜ∑Ëâ≤Ë∞É‰∫Ü„ÄÇÂ§ñÈù¢Â∞±ÊòØÁé∞ÂÆûÁöÑÁîüÊ¥ª„ÄÇ</p><p>‚ÄúÊàëÂæàÊÄÄÂøµÂÆÉ‚ÄùÔºåÁªèÂéÜË∂äÂ§öÔºåËøôÂè•ËØùÂ∏¶Êù•ÁöÑÊÑüËß¶Â∞±Ë∂äÂéöÈáç„ÄÇ</p><p>Êó∂Èó¥ÔºåÊ¢¶ÊÉ≥ÂíåÁà±ÔºåÈÉΩÊòØÂ¶ÇÊ≠§„ÄÇ</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;2018 ÊòØ‰∏Ä‰∏™ËÆ©‰∫∫Êï¨ÁïèÊÅêÊÉß‚ÄúÈÄ¢ÂÖ´ÂøÖÂèò‚ÄùÁöÑÂπ¥‰ªΩ„ÄÇ2018 ÊòØËøáÂéªÂçÅÂπ¥‰∏≠ÊúÄÁ≥üÁ≥ïÁöÑ‰∏ÄÂπ¥Ôºå‰ΩÜ‰πüËÆ∏ÊòØÊú™Êù•ÂçÅÂπ¥ÈáåÊúÄÂ•ΩÁöÑ‰∏ÄÂπ¥„ÄÇ&lt;/p&gt;
&lt;p&gt;2018 Âπ¥ËøáÂéª‰∫ÜÔºåÊàëÂæàÊÄÄÂøµÂÆÉ„ÄÇ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/img/Year%202018%20-%2001.jpg&quot; al
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Step by step run Kafka on Mac</title>
    <link href="https://terrencemiao.github.io/blog/2018/12/10/Step-by-step-run-Kafka-on-Mac/"/>
    <id>https://terrencemiao.github.io/blog/2018/12/10/Step-by-step-run-Kafka-on-Mac/</id>
    <published>2018-12-10T04:45:51.000Z</published>
    <updated>2018-12-10T05:34:37.165Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>Download Kafka binary file from <em><a href="https://kafka.apache.org/downloads" target="_blank" rel="noopener">https://kafka.apache.org/downloads</a></em> and install it</p></li><li><p>Set up Kafka listen on <strong>PLAINTEXT://localhost:9092</strong></p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">terrence@igloo /usr/<span class="built_in">local</span>/kafka</span><br><span class="line">15:51:25 ùúÜ diff config/server.properties config/server.properties.orig</span><br><span class="line">31c31</span><br><span class="line">&lt; listeners=PLAINTEXT://localhost:9092</span><br><span class="line">---</span><br><span class="line">&gt; <span class="comment">#listeners=PLAINTEXT://:9092</span></span><br></pre></td></tr></table></figure><ul><li>Start Zookeeper</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">igloo:kafka root<span class="comment"># bin/zookeeper-server-start.sh config/zookeeper.properties</span></span><br></pre></td></tr></table></figure><ul><li>Start Kafka</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">igloo:kafka root<span class="comment"># bin/kafka-server-start.sh config/server.properties</span></span><br></pre></td></tr></table></figure><ul><li>Create a new Kafka topic named ‚Äútest‚Äù</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">igloo:kafka root<span class="comment"># bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test</span></span><br></pre></td></tr></table></figure><ul><li>Initialise Producer in Console</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">terrence@igloo /usr/<span class="built_in">local</span>/kafka_2.12-2.1.0</span><br><span class="line">16:04:19 ùúÜ bin/kafka-console-producer.sh --broker-list localhost:9092 --topic <span class="built_in">test</span></span><br><span class="line">&gt;Hello World</span><br><span class="line">&gt;Wow</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><ul><li>Initialize Consumer in Console to receive the messages</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">terrence@igloo /usr/<span class="built_in">local</span>/kafka_2.12-2.1.0</span><br><span class="line">16:06:11 ùúÜ bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic <span class="built_in">test</span> --from-beginning</span><br><span class="line">Hello World</span><br><span class="line">Wow</span><br></pre></td></tr></table></figure><p>Run Kafka Manager, an UI tool for managing Kafka.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">terrence@igloo ~/bin/kafka-manager-1.3.3.18</span><br><span class="line">16:16:47 ùúÜ env ZK_HOSTS=<span class="string">"localhost:2181"</span> bin/kafka-manager</span><br></pre></td></tr></table></figure><p>Then visit <em><a href="http://localhost:9000" target="_blank" rel="noopener">http://localhost:9000</a></em></p><p>Create a Kafka cluster at first:</p><p><img src="/blog/img/Kafka%20Cluster.png" alt="Kafka Cluster" title="Kafka Cluster"></p><p>Visit ‚Äútest‚Äù topic in Kafka cluster:</p><p><img src="/blog/img/Kafka%20Manager.png" alt="Kafka Manager" title="Kafka Manager"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;&lt;p&gt;Download Kafka binary file from &lt;em&gt;&lt;a href=&quot;https://kafka.apache.org/downloads&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://kafka.ap
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>This is how I feel when my code runs without a single bug</title>
    <link href="https://terrencemiao.github.io/blog/2018/12/07/This-is-how-I-feel-when-my-code-runs-without-a-single-bug/"/>
    <id>https://terrencemiao.github.io/blog/2018/12/07/This-is-how-I-feel-when-my-code-runs-without-a-single-bug/</id>
    <published>2018-12-06T21:35:50.000Z</published>
    <updated>2018-12-06T21:37:47.324Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://lh3.googleusercontent.com/7WmOU85cMfllK056ZWJQ_ffILt0z3AQTOHhv9WDXmEUuzAePf_XFb8Kk2PvqPmjpJpldKK33fFTMLz49jNsRygrmExaRvzPZXrbGUHwrCnhig7ll8Acr_zm8mZo-2h_E5IYw_sFDsSafCcfv8NfVc7mnv_Vt6Vm3sPUGsDADaADySvnHw2P-EV935D7N6B9Eb8w9iJV-9mP1rsvjOBwHFTC-shj5LGuxrdDk628b4spTrRqlj-E-poJN0Ja90gjTn2Y_327m9d7YjDcNtU_m8dscEW1atVqshFQGjPffvrzni7BOwrDRL4c5ec4JF88bh6L9v2t_hs9UV84EAQon8ef0lVAdHGMAEHv0ji82n8Hz9v2iJhIVsu-vYBp3z7VJ04C1xQkdCK1Cj1Hjo78p-dCTL4fwnR4T-SZvfjUzvN2sTitZbBp0mMFPshB4TBg1MEDSUovVz2cd1JqR4sSM5ZAx-h4N1CqXhYXUNICRHE9ThYKZ2Oe9Pf27CRnA5mcmJkKHN8BQUM8Q1454lYKk3osfg-hoAPnowQh4bjJV8VfsdiGD5lHeVnj_F9u-ifJo_kX_lCYeyiXFES71m3U4lFzaUWJQiR5QbewKWbjtoMuoxe0mh4VkWCIP8TNh7OCWlAWmAdPexblCKiw9Zy38Bk8Mdg=w460-h266-no" alt="This is how I feel when my code runs without a single bug" title="This is how I feel when my code runs without a single bug"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://lh3.googleusercontent.com/7WmOU85cMfllK056ZWJQ_ffILt0z3AQTOHhv9WDXmEUuzAePf_XFb8Kk2PvqPmjpJpldKK33fFTMLz49jNsRygrmExaRv
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Bind customised KeyStore,TrustStore and PoolingHttpClientConnectionManager in Apache Camel</title>
    <link href="https://terrencemiao.github.io/blog/2018/12/03/Bind-customised-KeyStore-TrustStore-and-PoolingHttpClientConnectionManager-in-Apache-Camel/"/>
    <id>https://terrencemiao.github.io/blog/2018/12/03/Bind-customised-KeyStore-TrustStore-and-PoolingHttpClientConnectionManager-in-Apache-Camel/</id>
    <published>2018-12-03T07:54:16.000Z</published>
    <updated>2018-12-03T22:18:36.680Z</updated>
    
    <content type="html"><![CDATA[<p>In Apache HTTPClient 4.x, PoolingHttpClientConnectionManager and BasicHttpClientConnectionManager can be used as Connection Managers for HTTP Client. By default, above two Connection Managers load <strong>cacerts</strong> trust store, from $JRE_HOME/lib/security directory, not programmatically specified.</p><p>Since Apache Camel starts supporting HTTP4 Component, camel-http4 is using Apache HTTPClient 4.x. The following is a solution how to customise PoolingHttpClientConnectionManager and SSLContext to use specified KeyStore and TrustStore.</p><script src="https://gist.github.com/TerrenceMiao/fefc0d10359146c3612fde33046b95d0.js"></script><p>In <strong>application.properties</strong> file defined environment specified KeyStore and TrustStore:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">keystore.location=classpath:certificates/client-certs.jks</span><br><span class="line">keystore.password=client123</span><br><span class="line">truststore.location=classpath:certificates/trusted-cacerts.jks</span><br><span class="line">truststore.password=changeit</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>Without Connection Managers like PoolingHttpClientConnectionManager and BasicHttpClientConnectionManager in Apache HTTPClient 4.x, Apache Camel Route can be written in this way, binding programmatically specified KeyStore and TrustStore.</p><script src="https://gist.github.com/TerrenceMiao/ecdb7cb674887a7f82199ac880987224.js"></script><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li>Apache Camel HTTP4 Component, <em><a href="http://camel.apache.org/http4.html" target="_blank" rel="noopener">http://camel.apache.org/http4.html</a></em></li><li>Java SSL with Multiple KeyStores, <em><a href="http://codyaray.com/2013/04/java-ssl-with-multiple-keystores" target="_blank" rel="noopener">http://codyaray.com/2013/04/java-ssl-with-multiple-keystores</a></em></li><li>Multiple Keystores in Apache Camel/HttpClient, <em><a href="http://codyaray.com/2013/05/multiple-keystores-in-apache-camelhttpclient" target="_blank" rel="noopener">http://codyaray.com/2013/05/multiple-keystores-in-apache-camelhttpclient</a></em></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;In Apache HTTPClient 4.x, PoolingHttpClientConnectionManager and BasicHttpClientConnectionManager can be used as Connection Managers for 
      
    
    </summary>
    
    
  </entry>
  
</feed>
