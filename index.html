<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=330279473"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '330279473');
</script>
<!-- End Google Analytics -->

  
  <title>Terrence Miao&#39;s Adventures</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
    <meta name="description" content="Veni, vidi, vici">
  
  
  
    <link rel="alternate" href="/blog/atom.xml" title="Terrence Miao's Adventures" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/blog/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/blog/css/style.css">

  
    
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.min.css">

  
  
  
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7274218747178099" crossorigin="anonymous"></script>
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">Terrence Miao&#39;s Adventures</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog/" id="subtitle">A journey of a thousand miles begins with a single step</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/blog/."><i class="fa fa-home"></i> Home</a>
        
          <a class="main-nav-link" href="/blog/archives/"><i class="fa fa-archive"></i> Archive</a>
        
          <a class="main-nav-link" href="/blog/about/"><i class="fa fa-user"></i> About</a>
        
          <a class="main-nav-link" href="/blog/atom.xml"><i class="fa fa-rss"></i> RSS</a>
        
      </nav>
    </div>
    <div id="search-form">
      <div id="result-mask" class="hide"></div>
      <label><input id="search-key" type="text" autocomplete="off" placeholder="search"></label>
      <div id="result-wrap" class="hide">
        <div id="search-result"></div>
      </div>
      <div class="hide">
        <template id="search-tpl">
          <div class="item">
            <a href="/{path}" title="{title}">
              <div class="title">{title}</div>
              <div class="time">{date}</div>
              <div class="tags">{tags}</div>
            </a>
          </div>
        </template>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  <article id="post-Proxmox-over-Wireless" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2025/05/21/Proxmox-over-Wireless/">Proxmox over Wireless</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2025-05-21T01:16:37.000Z" itemprop="datePublished">2025-05-21</time>
</span>
      
      
      
<a href="/blog/2025/05/21/Proxmox-over-Wireless/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>With <code>Proxmox</code> latest version <strong>8.4.1</strong> which has <em>WiFi 7</em> support. A <strong>IntelÂ® Wi-Fi 7 BE200</strong> network adapter <em><a target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/products/sku/230078/intel-wifi-7-be200/specifications.html">https://www.intel.com/content/www/us/en/products/sku/230078/intel-wifi-7-be200/specifications.html</a></em> is in action.</p>
<p>Setup wireless network as main network for <code>Proxmox</code>. <strong>TP-Link Deco BE85&#x2F;BE95 Mesh WiFi 7 System</strong> as the Access Point, with DHCP enabled for the clients.</p>
<p>On <code>Proxmox</code> host, PCI devices:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">root@mini:~# lspci</span><br><span class="line">00:00.0 Host bridge: Intel Corporation Device 4617</span><br><span class="line">00:02.0 VGA compatible controller: Intel Corporation Alder Lake-N [UHD Graphics]</span><br><span class="line">...</span><br><span class="line">00:02.7 VGA compatible controller: Intel Corporation Alder Lake-N [UHD Graphics]</span><br><span class="line">00:0d.0 USB controller: Intel Corporation Alder Lake-N Thunderbolt 4 USB Controller</span><br><span class="line">00:14.0 USB controller: Intel Corporation Alder Lake-N PCH USB 3.2 xHCI Host Controller</span><br><span class="line">00:14.2 RAM memory: Intel Corporation Alder Lake-N PCH Shared SRAM</span><br><span class="line">00:16.0 Communication controller: Intel Corporation Alder Lake-N PCH HECI Controller</span><br><span class="line">00:17.0 SATA controller: Intel Corporation Alder Lake-N SATA AHCI Controller</span><br><span class="line">00:1c.0 PCI bridge: Intel Corporation Alder Lake-N PCI Express Root Port</span><br><span class="line">00:1c.6 PCI bridge: Intel Corporation Alder Lake-N PCI Express Root Port</span><br><span class="line">00:1d.0 PCI bridge: Intel Corporation Alder Lake-N PCI Express Root Port</span><br><span class="line">00:1d.1 PCI bridge: Intel Corporation Alder Lake-N PCI Express Root Port</span><br><span class="line">00:1d.3 PCI bridge: Intel Corporation Alder Lake-N PCI Express Root Port</span><br><span class="line">00:1f.0 ISA bridge: Intel Corporation Alder Lake-N PCH eSPI Controller</span><br><span class="line">00:1f.3 Multimedia audio controller: Intel Corporation Alder Lake-N PCH High Definition Audio Controller</span><br><span class="line">00:1f.4 SMBus: Intel Corporation Alder Lake-N SMBus</span><br><span class="line">00:1f.5 Serial bus controller: Intel Corporation Alder Lake-N SPI (flash) Controller</span><br><span class="line">01:00.0 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)</span><br><span class="line">01:00.1 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)</span><br><span class="line">01:10.0 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)</span><br><span class="line">...</span><br><span class="line">01:10.7 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)</span><br><span class="line">01:11.0 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)</span><br><span class="line">...</span><br><span class="line">01:11.7 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)</span><br><span class="line">02:00.0 Ethernet controller: Intel Corporation Ethernet Controller I226-V (rev 04)</span><br><span class="line">03:00.0 Ethernet controller: Intel Corporation Ethernet Controller I226-V (rev 04)</span><br><span class="line">04:00.0 Network controller: Intel Corporation Wi-Fi 7(802.11be) AX1775*/AX1790*/BE20*/BE401/BE1750* 2x2 (rev 1a)</span><br><span class="line">05:00.0 Non-Volatile memory controller: Micron/Crucial Technology T500 NVMe PCIe SSD (rev 01)</span><br></pre></td></tr></table></figure>
<p>network interfaces:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">root@mini:~# cat /etc/network/interfaces</span><br><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line"></span><br><span class="line">iface enp2s0 inet manual</span><br><span class="line">iface enp3s0 inet manual</span><br><span class="line"></span><br><span class="line">iface enp1s0f0 inet manual</span><br><span class="line">iface enp1s0f1 inet manual</span><br><span class="line"></span><br><span class="line">iface enp1s0f0v0 inet manual</span><br><span class="line">...</span><br><span class="line">iface enp1s0f0v7 inet manual</span><br><span class="line"></span><br><span class="line">iface enp1s0f1v0 inet manual</span><br><span class="line">...</span><br><span class="line">iface enp1s0f1v7 inet manual</span><br><span class="line"></span><br><span class="line">auto wlp4s0f0</span><br><span class="line">iface wlp4s0f0 inet dhcp</span><br><span class="line">        wpa-ssid &quot;igloo studio&quot;</span><br><span class="line">        wpa-psk &quot;igloo studio password&quot;</span><br><span class="line"></span><br><span class="line">auto vmbr0</span><br><span class="line">iface vmbr0 inet static</span><br><span class="line">        address 10.0.1.1/24</span><br><span class="line">        bridge-ports none</span><br><span class="line">        bridge-stp off</span><br><span class="line">        bridge-fd 0</span><br><span class="line"></span><br><span class="line">        # Enable IP forwarding</span><br><span class="line">        post-up echo 1 &gt; /proc/sys/net/ipv4/ip_forward</span><br><span class="line"></span><br><span class="line">        # Allow all forwarding from VM network to WAN</span><br><span class="line">        post-up   iptables -A FORWARD -i vmbr0 -o wlp4s0f0 -j ACCEPT</span><br><span class="line">        post-down iptables -D FORWARD -i vmbr0 -o wlp4s0f0 -j ACCEPT</span><br><span class="line"></span><br><span class="line">        # Single NAT rule for all traffic</span><br><span class="line">        post-up   iptables -t nat -A POSTROUTING -s &#x27;10.0.1.0/24&#x27; -o wlp4s0f0 -j MASQUERADE</span><br><span class="line">        post-down iptables -t nat -D POSTROUTING -s &#x27;10.0.1.0/24&#x27; -o wlp4s0f0 -j MASQUERADE</span><br><span class="line"></span><br><span class="line">auto vmbr1</span><br><span class="line">iface vmbr1 inet manual</span><br><span class="line">        bridge-ports enp1s0f0</span><br><span class="line">        bridge-stp off</span><br><span class="line">        bridge-fd 0</span><br><span class="line"></span><br><span class="line">auto vmbr2</span><br><span class="line">iface vmbr2 inet manual</span><br><span class="line">        bridge-ports enp1s0f1</span><br><span class="line">        bridge-stp off</span><br><span class="line">        bridge-fd 0</span><br><span class="line"></span><br><span class="line">source /etc/network/interfaces.d/*</span><br></pre></td></tr></table></figure>

<p><code>dnsmasq</code> for VMsâ DNS and DHCP management:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">root@mini:~# cat /etc/dnsmasq.conf</span><br><span class="line">...</span><br><span class="line">## Proxmox</span><br><span class="line"># Hosts dnsmasq on vmbr0</span><br><span class="line">interface=vmbr0</span><br><span class="line"></span><br><span class="line"># The IP-address range that should be used for the clients (virtual machines/containers):</span><br><span class="line"># dhcp-range=first_available_ip, last_available_ip, net_mask, lease_time (&lt;number&gt;h)</span><br><span class="line">dhcp-range=10.0.1.100, 10.0.1.200, 255.255.255.0, 12h</span><br><span class="line"></span><br><span class="line"># Just making sure dnsmasq knows the routers IP-address</span><br><span class="line"># dhcp-option=3,vmbr0_ip</span><br><span class="line">dhcp-option=3,10.0.1.1</span><br></pre></td></tr></table></figure>

<p><code>Proxmox</code> host allocated wireless IP e.g. <code>192.168.68.58</code>. Set this IP in <strong>&#x2F;etc&#x2F;hosts</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@mini:~# cat /etc/hosts</span><br><span class="line">127.0.0.1 localhost.localdomain localhost</span><br><span class="line">192.168.68.58 mini.local mini</span><br><span class="line"></span><br><span class="line"># The following lines are desirable for IPv6 capable hosts</span><br><span class="line"></span><br><span class="line">::1     ip6-localhost ip6-loopback</span><br><span class="line">fe00::0 ip6-localnet</span><br><span class="line">ff00::0 ip6-mcastprefix</span><br><span class="line">ff02::1 ip6-allnodes</span><br><span class="line">ff02::2 ip6-allrouters</span><br><span class="line">ff02::3 ip6-allhosts</span><br></pre></td></tr></table></figure>

<p>then access <code>Proxmox</code> web UI via URL <strong><a target="_blank" rel="noopener" href="https://192.168.68.58:8006/">https://192.168.68.58:8006</a></strong>.</p>
<p>Reboot <code>Proxmox</code> host:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">root@mini:~# ip a</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host noprefixroute</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: enp2s0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000</span><br><span class="line">    link/ether a8:b8:e0:05:96:4f brd ff:ff:ff:ff:ff:ff</span><br><span class="line">3: enp3s0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000</span><br><span class="line">    link/ether a8:b8:e0:05:96:50 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">4: enp1s0f0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq master vmbr1 state UP group default qlen 1000</span><br><span class="line">    link/ether a8:b8:e0:05:96:4d brd ff:ff:ff:ff:ff:ff</span><br><span class="line">5: enp1s0f1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq master vmbr2 state UP group default qlen 1000</span><br><span class="line">    link/ether a8:b8:e0:05:96:4e brd ff:ff:ff:ff:ff:ff</span><br><span class="line">7: enp1s0f0v1: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000</span><br><span class="line">    link/ether de:11:ed:5f:a6:d5 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">...</span><br><span class="line">13: enp1s0f0v7: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000</span><br><span class="line">    link/ether 3e:45:70:0c:fd:98 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">14: enp1s0f1v0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000</span><br><span class="line">    link/ether 06:72:73:c2:7a:fc brd ff:ff:ff:ff:ff:ff</span><br><span class="line">...</span><br><span class="line">21: enp1s0f1v7: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000</span><br><span class="line">    link/ether 6a:06:68:af:7a:dc brd ff:ff:ff:ff:ff:ff</span><br><span class="line">22: wlp4s0f0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000</span><br><span class="line">    link/ether e0:8f:4c:b2:58:95 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.68.58/22 brd 192.168.71.255 scope global dynamic wlp4s0f0</span><br><span class="line">       valid_lft 3800sec preferred_lft 3800sec</span><br><span class="line">    inet6 fda5:9d5d:ff57:10:e28f:4cff:feb2:5895/64 scope global dynamic mngtmpaddr</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 2403:5802:8c44:10:e28f:4cff:feb2:5895/64 scope global dynamic mngtmpaddr</span><br><span class="line">       valid_lft 5371sec preferred_lft 1768sec</span><br><span class="line">    inet6 fe80::e28f:4cff:feb2:5895/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">23: vmbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default qlen 1000</span><br><span class="line">    link/ether 00:00:00:00:00:00 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 10.0.1.1/24 scope global vmbr0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::643d:cdff:fe59:f79/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">24: vmbr1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000</span><br><span class="line">    link/ether a8:b8:e0:05:96:4d brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet6 fda5:9d5d:ff57:10:aab8:e0ff:fe05:964d/64 scope global dynamic mngtmpaddr</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 2403:5802:8c44:10:aab8:e0ff:fe05:964d/64 scope global dynamic mngtmpaddr</span><br><span class="line">       valid_lft 5372sec preferred_lft 1768sec</span><br><span class="line">    inet6 fe80::aab8:e0ff:fe05:964d/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">25: vmbr2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000</span><br><span class="line">    link/ether a8:b8:e0:05:96:4e brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet6 fda5:9d5d:ff57:10:aab8:e0ff:fe05:964e/64 scope global dynamic mngtmpaddr</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 2403:5802:8c44:10:aab8:e0ff:fe05:964e/64 scope global dynamic mngtmpaddr</span><br><span class="line">       valid_lft 5372sec preferred_lft 1768sec</span><br><span class="line">    inet6 fe80::aab8:e0ff:fe05:964e/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<p><code>Proxmox</code> Network settings:</p>
<p><img src="/blog/img/Proxmox%20Wireless%20-%20Network.png" alt="Proxmox Wireless - Network" title="Proxmox Wireless - Network"></p>
<p><strong>Linux&#x2F;Ubuntu VM</strong> in <code>Proxmox</code>:</p>
<p><img src="/blog/img/Proxmox%20Wireless%20-%20Ubuntu%20VM.png" alt="Proxmox Wireless - Ubuntu VM" title="Proxmox Wireless - Ubuntu VM"></p>
<p><strong>Windows VM</strong> in <code>Proxmox</code>:</p>
<p><img src="/blog/img/Proxmox%20Wireless%20-%20Windows%20VM.png" alt="Proxmox Wireless - Windows VM" title="Proxmox Wireless - Windows VM"></p>
<p><strong>Windows VM</strong> in <code>Proxmox</code>âs network:</p>
<p><img src="/blog/img/Proxmox%20Wireless%20-%20Windows%20VM%20Network.png" alt="Proxmox Wireless - Windows VM Network" title="Proxmox Wireless - Windows VM Network"></p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li>Setting Up Proxmox on a Laptop Without an Ethernet Port <em><a target="_blank" rel="noopener" href="https://dev.to/varungujarathi9/setting-up-proxmox-on-a-laptop-without-an-ethernet-port-28n8">https://dev.to/varungujarathi9/setting-up-proxmox-on-a-laptop-without-an-ethernet-port-28n8</a></em></li>
<li>Setting up Proxmox over wifi <em><a target="_blank" rel="noopener" href="https://github.com/ThomasRives/Proxmox-over-wifi">https://github.com/ThomasRives/Proxmox-over-wifi</a></em></li>
</ul>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-ZeroTier-on-TrueNAS-Scale" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2025/01/25/ZeroTier-on-TrueNAS-Scale/">ZeroTier on TrueNAS Scale</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2025-01-25T02:01:25.000Z" itemprop="datePublished">2025-01-25</time>
</span>
      
      
      
<a href="/blog/2025/01/25/ZeroTier-on-TrueNAS-Scale/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Step by steyp to install <code>ZeroTier</code> on <code>TrueNAS Scale</code>.</p>
<p>Latest version <code>TrueNAS Scale</code> <strong>ElectricEel 24.10</strong>:</p>
<p><img src="/blog/img/ZeroTier%20-%20TrueNAS.png" alt="ZeroTier - TrueNAS" title="ZeroTier - TrueNAS"></p>
<p>Add <code>ZeroTier</code> <strong>Network ID</strong>; enable <strong>Host Network</strong>; leave <strong>Auth Token</strong>, <strong>Identity Public</strong> and <strong>Identity Secret</strong> empty:</p>
<p><img src="/blog/img/ZeroTier%20-%20Configuration.png" alt="ZeroTier - Configuration" title="ZeroTier - Configuration"></p>
<p>On <code>ZeroTier</code> console, authorise <code>TrueNAS</code> access the network:</p>
<p><img src="/blog/img/ZeroTier%20-%20Network.png" alt="ZeroTier - Network" title="ZeroTier - Network"></p>
<p><code>ZeroTier</code> is happily running in <code>TrueNAS</code>:</p>
<p><img src="/blog/img/ZeroTier%20-%20Running.png" alt="ZeroTier - Running" title="ZeroTier - Running"></p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li>How to install zerotier on TrueNas Scale? <em><a target="_blank" rel="noopener" href="https://www.reddit.com/r/truenas/comments/1dvdp36/how_to_install_zerotier_on_truenas_scale/">https://www.reddit.com/r/truenas/comments/1dvdp36/how_to_install_zerotier_on_truenas_scale/</a></em></li>
</ul>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Xray-X-UI-Reality-protocol-Vision-flow-on-Oracle-Cloud" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2025/01/22/Xray-X-UI-Reality-protocol-Vision-flow-on-Oracle-Cloud/">Xray, X-UI, Reality protocol, Vision flow on Oracle Cloud</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2025-01-22T02:34:40.000Z" itemprop="datePublished">2025-01-22</time>
</span>
      
      
      
<a href="/blog/2025/01/22/Xray-X-UI-Reality-protocol-Vision-flow-on-Oracle-Cloud/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><code>Oracle Cloud</code> instance, which runs <code>Oracle Linux</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -i .ssh/id_rsa_ -l opc 19.214.86.113</span><br><span class="line"></span><br><span class="line">$ sudo -i</span><br><span class="line">[root@apocalypse ~]#</span><br></pre></td></tr></table></figure>

<p>Install <code>X-UI</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@apocalypse ~]# bash &lt;(curl -Ls https://raw.githubusercontent.com/FranzKafkaYu/x-ui/master/install_en.sh)</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">2025-01-21 23:05:50 (100 MB/s) - â/usr/bin/x-uiâ saved [25637/25637]</span><br><span class="line"></span><br><span class="line">Install/update finished need to modify panel settings out of security</span><br><span class="line">are you continue,if you type n will skip this at this time[y/n]: y</span><br><span class="line">please set up your username: admin</span><br><span class="line">your username will be: admin</span><br><span class="line">please set up your password: password</span><br><span class="line">your password will be: password</span><br><span class="line">please set up the panel port: 10080</span><br><span class="line">your panel port is: 10080</span><br><span class="line">initializing,wait some time here...</span><br><span class="line">set username and password success</span><br><span class="line">account name and password set down!</span><br><span class="line">set port 10080 successpanel port set down!</span><br><span class="line">x-ui v0.3.4.4 install finished,it is working now...</span><br><span class="line"></span><br><span class="line">x-ui control menu usages: </span><br><span class="line">----------------------------------------------</span><br><span class="line">x-ui              - Enter     control menu</span><br><span class="line">x-ui start        - Start     x-ui </span><br><span class="line">x-ui stop         - Stop      x-ui </span><br><span class="line">x-ui restart      - Restart   x-ui </span><br><span class="line">x-ui status       - Show      x-ui status</span><br><span class="line">x-ui enable       - Enable    x-ui on system startup</span><br><span class="line">x-ui disable      - Disable   x-ui on system startup</span><br><span class="line">x-ui log          - Check     x-ui logs</span><br><span class="line">x-ui update       - Update    x-ui </span><br><span class="line">x-ui install      - Install   x-ui </span><br><span class="line">x-ui uninstall    - Uninstall x-ui </span><br><span class="line">x-ui geo          - Update    geo  data</span><br><span class="line">----------------------------------------------</span><br></pre></td></tr></table></figure>

<p>Find the root path of <code>X-UI</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@ip-237-45-6-183 ~]# x-ui</span><br><span class="line"></span><br><span class="line">  x-ui control menu</span><br><span class="line">  0. exit</span><br><span class="line">ââââââââââââââââ</span><br><span class="line">  1. install   x-ui</span><br><span class="line">  2. update    x-ui</span><br><span class="line">  3. uninstall x-ui</span><br><span class="line">ââââââââââââââââ</span><br><span class="line">  4. reset username</span><br><span class="line">  5. reset panel</span><br><span class="line">  6. reset panel port</span><br><span class="line">  7. check panel info</span><br><span class="line">ââââââââââââââââ</span><br><span class="line">  8. start x-ui</span><br><span class="line">  9. stop  x-ui</span><br><span class="line">  10. restart x-ui</span><br><span class="line">  11. check x-ui status</span><br><span class="line">  12. check x-ui logs</span><br><span class="line">ââââââââââââââââ</span><br><span class="line">  13. enable  x-ui on system startup</span><br><span class="line">  14. disable x-ui on system startup</span><br><span class="line">ââââââââââââââââ</span><br><span class="line">  15. enable bbr </span><br><span class="line">  16. issuse certs</span><br><span class="line">  17. x-ui cron jobs</span><br><span class="line"> </span><br><span class="line">x-ui status: running</span><br><span class="line">enable on system startup: yes</span><br><span class="line">xray status: running</span><br><span class="line"></span><br><span class="line">please input a legal number[0-16],input 7 for checking login info:7</span><br><span class="line">[INF] å½åé¢æ¿ä¿¡æ¯[current panel info]:</span><br><span class="line">é¢æ¿çæ¬[version]: 0.3.4.4:20230717</span><br><span class="line">ç¨æ·å[username]: admin</span><br><span class="line">å¯ç [userpasswd]: password</span><br><span class="line">çå¬ç«¯å£[port]: 10080</span><br><span class="line">æ ¹è·¯å¾[rootPath]: /xui/ </span><br></pre></td></tr></table></figure>

<p>Add new Inbound:</p>
<p><img src="/blog/img/X-UI%20-%20Oracle%20Cloud%20Inbound.png" alt="X-UI - Oracle Cloud Inbound" title="X-UI - Oracle Cloud Inbound"></p>
<p>Open <code>X-UI</code> panel port and <code>VLESS</code> port in <code>Oracle Cloud</code> firewall:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@apocalypse ~]# firewall-cmd --zone=public --permanent --add-port=10080/tcp</span><br><span class="line">success</span><br><span class="line"></span><br><span class="line">[root@apocalypse ~]# firewall-cmd --zone=public --permanent --add-port=32854/tcp</span><br><span class="line">success</span><br><span class="line"></span><br><span class="line">[root@apocalypse ~]# firewall-cmd --reload</span><br><span class="line">success</span><br></pre></td></tr></table></figure>

<p>Open <code>X-UI</code> panel port and <code>VLESS</code> port in <code>Oracle Cloud</code> <strong>Security List Ingress Rules</strong>:</p>
<p><img src="/blog/img/X-UI%20-%20Oracle%20Cloud.png" alt="X-UI - Oracle Cloud" title="X-UI - Oracle Cloud"></p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li>Host an XTLS Vless+Vision+REALITY server on Oracle Always Free <em><a target="_blank" rel="noopener" href="https://iopq.wordpress.com/2024/02/27/host-an-xtls-vlessvisionreality-server-on-oracle/">https://iopq.wordpress.com/2024/02/27/host-an-xtls-vlessvisionreality-server-on-oracle/</a></em></li>
<li>Oracle Database Cloud â Open Ports on OCI <em><a target="_blank" rel="noopener" href="https://medium.com/@fathi.ria/oracle-database-cloud-open-ports-on-oci-1af24f4eb9f2">https://medium.com/@fathi.ria/oracle-database-cloud-open-ports-on-oci-1af24f4eb9f2</a></em></li>
</ul>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Xray-X-UI-Reality-protocol-Vision-flow-on-Amazon-Linux" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2025/01/22/Xray-X-UI-Reality-protocol-Vision-flow-on-Amazon-Linux/">Xray, X-UI, Reality protocol, Vision flow on Amazon Linux</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2025-01-21T22:48:08.000Z" itemprop="datePublished">2025-01-22</time>
</span>
      
      
      
<a href="/blog/2025/01/22/Xray-X-UI-Reality-protocol-Vision-flow-on-Amazon-Linux/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>AWS EC2 instance, which runs <code>Amazon Linux</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -i .ssh/aws-free-tier.pem -l ec2-user ec2-203-129-56-97.ap-southeast-2.compute.amazonaws.com</span><br><span class="line">   ,     #_</span><br><span class="line">   ~\_  ####_        Amazon Linux 2023</span><br><span class="line">  ~~  \_#####\</span><br><span class="line">  ~~     \###|</span><br><span class="line">  ~~       \#/ ___   https://aws.amazon.com/linux/amazon-linux-2023</span><br><span class="line">   ~~       V~&#x27; &#x27;-&gt;</span><br><span class="line">    ~~~         /</span><br><span class="line">      ~~._.   _/</span><br><span class="line">         _/ _/</span><br><span class="line">       _/m/&#x27;</span><br><span class="line"></span><br><span class="line">$ sudo -i</span><br><span class="line">[root@ip-237-45-6-183 ~]#</span><br></pre></td></tr></table></figure>

<p>Install <code>X-UI</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@ip-237-45-6-183 ~]# bash &lt;(curl -Ls https://raw.githubusercontent.com/FranzKafkaYu/x-ui/master/install_en.sh)</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">2025-01-21 23:05:50 (100 MB/s) - â/usr/bin/x-uiâ saved [25637/25637]</span><br><span class="line"></span><br><span class="line">Install/update finished need to modify panel settings out of security</span><br><span class="line">are you continue,if you type n will skip this at this time[y/n]: y</span><br><span class="line">please set up your username: admin</span><br><span class="line">your username will be: admin</span><br><span class="line">please set up your password: password</span><br><span class="line">your password will be: password</span><br><span class="line">please set up the panel port: 10080</span><br><span class="line">your panel port is: 10080</span><br><span class="line">initializing,wait some time here...</span><br><span class="line">set username and password success</span><br><span class="line">account name and password set down!</span><br><span class="line">set port 10080 successpanel port set down!</span><br><span class="line">x-ui v0.3.4.4 install finished,it is working now...</span><br><span class="line"></span><br><span class="line">x-ui control menu usages: </span><br><span class="line">----------------------------------------------</span><br><span class="line">x-ui              - Enter     control menu</span><br><span class="line">x-ui start        - Start     x-ui </span><br><span class="line">x-ui stop         - Stop      x-ui </span><br><span class="line">x-ui restart      - Restart   x-ui </span><br><span class="line">x-ui status       - Show      x-ui status</span><br><span class="line">x-ui enable       - Enable    x-ui on system startup</span><br><span class="line">x-ui disable      - Disable   x-ui on system startup</span><br><span class="line">x-ui log          - Check     x-ui logs</span><br><span class="line">x-ui update       - Update    x-ui </span><br><span class="line">x-ui install      - Install   x-ui </span><br><span class="line">x-ui uninstall    - Uninstall x-ui </span><br><span class="line">x-ui geo          - Update    geo  data</span><br><span class="line">----------------------------------------------</span><br></pre></td></tr></table></figure>

<p>Change AWS security group, and open EC2 instance port <code>10080</code> to admin userâs IP address only.</p>
<p>Find the root path of <code>X-UI</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@ip-237-45-6-183 ~]# x-ui</span><br><span class="line"></span><br><span class="line">  x-ui control menu</span><br><span class="line">  0. exit</span><br><span class="line">ââââââââââââââââ</span><br><span class="line">  1. install   x-ui</span><br><span class="line">  2. update    x-ui</span><br><span class="line">  3. uninstall x-ui</span><br><span class="line">ââââââââââââââââ</span><br><span class="line">  4. reset username</span><br><span class="line">  5. reset panel</span><br><span class="line">  6. reset panel port</span><br><span class="line">  7. check panel info</span><br><span class="line">ââââââââââââââââ</span><br><span class="line">  8. start x-ui</span><br><span class="line">  9. stop  x-ui</span><br><span class="line">  10. restart x-ui</span><br><span class="line">  11. check x-ui status</span><br><span class="line">  12. check x-ui logs</span><br><span class="line">ââââââââââââââââ</span><br><span class="line">  13. enable  x-ui on system startup</span><br><span class="line">  14. disable x-ui on system startup</span><br><span class="line">ââââââââââââââââ</span><br><span class="line">  15. enable bbr </span><br><span class="line">  16. issuse certs</span><br><span class="line">  17. x-ui cron jobs</span><br><span class="line"> </span><br><span class="line">x-ui status: running</span><br><span class="line">enable on system startup: yes</span><br><span class="line">xray status: running</span><br><span class="line"></span><br><span class="line">please input a legal number[0-16],input 7 for checking login info:7</span><br><span class="line">[INF] å½åé¢æ¿ä¿¡æ¯[current panel info]:</span><br><span class="line">é¢æ¿çæ¬[version]: 0.3.4.4:20230717</span><br><span class="line">ç¨æ·å[username]: admin</span><br><span class="line">å¯ç [userpasswd]: password</span><br><span class="line">çå¬ç«¯å£[port]: 10080</span><br><span class="line">æ ¹è·¯å¾[rootPath]: /WMa7/ </span><br></pre></td></tr></table></figure>

<p>In <code>Firefox</code>, go to <em><a target="_blank" rel="noopener" href="http://203.129.56.97:10080/WMa7/">http://203.129.56.97:10080/WMa7/</a></em> and login as <strong>admin</strong> user:</p>
<p><img src="/blog/img/X-UI%20-%20Login.png" alt="X-UI - Login" title="X-UI - Login"></p>
<p><img src="/blog/img/X-UI%20-%20Panel.png" alt="X-UI - Panel" title="X-UI - Panel"></p>
<p>Switch to the latest version <code>Xray</code> e.g. <code>v24.12.31</code>:</p>
<p><img src="/blog/img/X-UI%20-%20Xray.png" alt="X-UI - Xray" title="X-UI - Xray"></p>
<p>Add new Inbound:</p>
<p><img src="/blog/img/X-UI%20-%20Inbound.png" alt="X-UI - Inbound" title="X-UI - Inbound"></p>
<p>Open up port <strong>32609</strong> to the world <strong>0.0.0.0&#x2F;0</strong> in AWS security group.</p>
<p>Copy inbound QR link:</p>
<p><img src="/blog/img/X-UI%20-%20QR.png" alt="X-UI - QR" title="X-UI - QR"></p>
<p><img src="/blog/img/X-UI%20-%20QR%20Link.png" alt="X-UI - QR Link" title="X-UI - QR Link"></p>
<p>and paste to <code>Xray</code> Windows client e.g. <code>v2rayN</code>:</p>
<p><img src="/blog/img/X-UI%20-%20v2rayN.png" alt="X-UI - v2rayN" title="X-UI - v2rayN"></p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li>æ æç Xray â Reality åè®®ï¼Vless + Realityåè®® + Visionæµæ§ï¼æ¯å¦è½å¤æå¹³ä¸åé¡¾èï¼ <em><a target="_blank" rel="noopener" href="https://v2rayssr.com/reality.html">https://v2rayssr.com/reality.html</a></em></li>
<li>æ³¢ä»åäº« - æ æç Xray - Reality åè®®ï¼æ é¡»åååè¯ä¹¦ç Reality åè®® + Vision æµæ§ï¼æ¯å¦è½å¤æå¹³ä¸åé¡¾èï¼Reality æåç½ç«å¯»æ¾ï¼Reality å®¢æ·ç«¯æ¨èï¼å³èèç¹æ­å»º&#x2F;ç§å­¦ä¸ç½ï¼<em><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=DO1_C9YWOYY">https://www.youtube.com/watch?v=DO1_C9YWOYY</a></em></li>
<li>x-ui <em><a target="_blank" rel="noopener" href="https://github.com/FranzKafkaYu/x-ui/">https://github.com/FranzKafkaYu/x-ui/</a></em></li>
<li>Qualys. SSL Labs <em><a target="_blank" rel="noopener" href="https://www.ssllabs.com/ssltest/index.html">https://www.ssllabs.com/ssltest/index.html</a></em></li>
</ul>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-How-to-install-and-run-Tailscale-client-on-OpenWrt" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2024/12/21/How-to-install-and-run-Tailscale-client-on-OpenWrt/">How to install and run Tailscale client on OpenWrt</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2024-12-21T03:44:32.000Z" itemprop="datePublished">2024-12-21</time>
</span>
      
      
      
<a href="/blog/2024/12/21/How-to-install-and-run-Tailscale-client-on-OpenWrt/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Install <code>Tailscale</code> package <strong>iptables-nft</strong> and <strong>tailscale</strong> from <code>OpenWrt</code> console:</p>
<p><img src="/blog/img/OpenWrt%20-%20Tailscale%20iptables-nft.png" alt="OpenWrt - Tailscale iptables-nft" title="OpenWrt - Tailscale iptables-nft"></p>
<p><img src="/blog/img/OpenWrt%20-%20Tailscale.png" alt="OpenWrt - Tailscale" title="OpenWrt - Tailscale"></p>
<p>Enable and connect <code>Tailscale</code> service in <code>OpenWrt</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -l root SenseWrt</span><br><span class="line">root@SenseWrt&#x27;s password: </span><br><span class="line"></span><br><span class="line">BusyBox v1.36.1 (2024-12-03 11:41:08 UTC) built-in shell (ash)</span><br><span class="line"></span><br><span class="line">  _______                     ________        __</span><br><span class="line"> |       |.-----.-----.-----.|  |  |  |.----.|  |_</span><br><span class="line"> |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|</span><br><span class="line"> |_______||   __|_____|__|__||________||__|  |____|</span><br><span class="line">          |__| W I R E L E S S   F R E E D O M</span><br><span class="line"> -----------------------------------------------------</span><br><span class="line"> OpenWrt 24.10.0-rc2, r28161-ea17e958b9</span><br><span class="line"> -----------------------------------------------------</span><br><span class="line"> </span><br><span class="line">root@SenseWrt:~# tailscale up --netfilter-mode=off --advertise-routes=192.168.88.0/24 --accept-routes</span><br><span class="line">Warning: netfilter=off; configure iptables yourself.</span><br><span class="line">Warning: UDP GRO forwarding is suboptimally configured on eth1, UDP forwarding throughput capability will increase with a configuration change.</span><br><span class="line">See https://tailscale.com/s/ethtool-config-udp-gro</span><br><span class="line"></span><br><span class="line">To authenticate, visit:</span><br><span class="line"></span><br><span class="line">	https://login.tailscale.com/a/98c452901c4ba</span><br><span class="line"></span><br><span class="line">Success.</span><br></pre></td></tr></table></figure>

<p><strong>NOTE:</strong> <strong>192.168.88.0&#x2F;24</strong> is the ip range of local network setup in <code>OpenWrt</code>.</p>
<p>Disable key expiry for <code>OpenWrt</code> machine in <code>Tailscale</code> console, then enable all <code>OpenWrt</code> clients access <code>Tailscale</code> network:</p>
<p><img src="/blog/img/OpenWrt%20-%20Tailscale%20Machines.png" alt="OpenWrt - Tailscale Machines" title="OpenWrt - Tailscale Machines"></p>
<p>Now add <code>Tailscale</code> virtual network as a new interface in <code>OpenWrt</code>:</p>
<p><img src="/blog/img/OpenWrt%20-%20Tailscale%20Network%20Interface.png" alt="OpenWrt - Tailscale Network Interface" title="OpenWrt - Tailscale Network Interface"></p>
<p>Create firewall for <code>Tailscale</code> virtual network interface in <code>OpenWrt</code>:</p>
<p><img src="/blog/img/OpenWrt%20-%20Tailscale%20Firewall.png" alt="OpenWrt - Tailscale Firewall" title="OpenWrt - Tailscale Firewall"></p>
<p>Configure firewall for <code>Tailscale</code> virtual network interface in <code>OpenWrt</code>:</p>
<p><img src="/blog/img/OpenWrt%20-%20Tailscale%20Firewall%20General%20Settings.png" alt="OpenWrt - Tailscale Firewall General Settings" title="OpenWrt - Tailscale Firewall General Settings"></p>
<p><strong>NOTE:</strong> <strong>opt</strong> network is for the downstream DHCP clients.</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li>é©é£ Talk - Tailscale ç©æ³ä¹åç½ç©¿éãå¼å°ç»ç½ãå¨é§éæ¨¡å¼ãçº¯ IP çåæ  DERP æ­å»ºãHeadscale åè°æå¡å¨æ­å»ºï¼ç¨ä¸ææå®ï¼çä¸çä¸äºå§ï¼<em><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=mgDpJX3oNvI">https://www.youtube.com/watch?v=mgDpJX3oNvI</a></em></li>
</ul>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-How-to-install-and-run-ZeroTier-client-on-OpenWrt" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2024/12/21/How-to-install-and-run-ZeroTier-client-on-OpenWrt/">How to install and run ZeroTier client on OpenWrt</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2024-12-21T00:08:18.000Z" itemprop="datePublished">2024-12-21</time>
</span>
      
      
      
<a href="/blog/2024/12/21/How-to-install-and-run-ZeroTier-client-on-OpenWrt/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Install <code>ZeroTier</code> package <strong>zerotier</strong> from <code>OpenWrt</code> console:</p>
<p><img src="/blog/img/OpenWrt%20-%20ZeroTier.png" alt="OpenWrt - ZeroTier" title="OpenWrt - ZeroTier"></p>
<p>Enable <code>ZeroTier</code> service in <code>OpenWrt</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -l root SenseWrt</span><br><span class="line">root@SenseWrt&#x27;s password: </span><br><span class="line"></span><br><span class="line">BusyBox v1.36.1 (2024-12-03 11:41:08 UTC) built-in shell (ash)</span><br><span class="line"></span><br><span class="line">  _______                     ________        __</span><br><span class="line"> |       |.-----.-----.-----.|  |  |  |.----.|  |_</span><br><span class="line"> |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|</span><br><span class="line"> |_______||   __|_____|__|__||________||__|  |____|</span><br><span class="line">          |__| W I R E L E S S   F R E E D O M</span><br><span class="line"> -----------------------------------------------------</span><br><span class="line"> OpenWrt 24.10.0-rc2, r28161-ea17e958b9</span><br><span class="line"> -----------------------------------------------------</span><br><span class="line"></span><br><span class="line">root@SenseWrt:~# cat /etc/config/zerotier </span><br><span class="line"></span><br><span class="line">config zerotier &#x27;global&#x27;</span><br><span class="line">	# Sets whether ZeroTier is enabled or not</span><br><span class="line">	option enabled 1</span><br><span class="line">	# Sets the ZeroTier listening port (default 9993; set to 0 for random)</span><br><span class="line">	#option port &#x27;9993&#x27;</span><br><span class="line">	# Client secret (leave blank to generate a secret on first run)</span><br><span class="line">	option secret &#x27;&#x27;</span><br><span class="line">	# Path of the optional file local.conf (see documentation at</span><br><span class="line">	# https://docs.zerotier.com/config#local-configuration-options)</span><br><span class="line">	#option local_conf_path &#x27;/etc/zerotier.conf&#x27;</span><br><span class="line">	# Persistent configuration directory (to perform other configurations such</span><br><span class="line">	# as controller mode or moons, etc.)</span><br><span class="line">	#option config_path &#x27;/etc/zerotier&#x27;</span><br><span class="line">	# Copy the contents of the persistent configuration directory to memory</span><br><span class="line">	# instead of linking it, this avoids writing to flash</span><br><span class="line">	#option copy_config_path &#x27;1&#x27;</span><br><span class="line"></span><br><span class="line"># Network configuration, you can have as many configurations as networks you</span><br><span class="line"># want to join (the network name is optional)</span><br><span class="line">config network &#x27;earth&#x27;</span><br><span class="line">	# Identifier of the network you wish to join</span><br><span class="line">	option id &#x27;8ca917257083e297&#x27;</span><br><span class="line">	# Network configuration parameters (all are optional, if not indicated the</span><br><span class="line">	# default values are set, see documentation at</span><br><span class="line">	# https://docs.zerotier.com/config/#network-specific-configuration)</span><br><span class="line">	option allow_managed &#x27;1&#x27;</span><br><span class="line">	option allow_global &#x27;0&#x27;</span><br><span class="line">	option allow_default &#x27;0&#x27;</span><br><span class="line">	option allow_dns &#x27;0&#x27;</span><br><span class="line"></span><br><span class="line"># Example of a second network (unnamed as it is optional)</span><br><span class="line">#config network</span><br><span class="line">#	option id &#x27;1234567890123456&#x27;</span><br><span class="line">#	option allow_managed &#x27;1&#x27;</span><br><span class="line">#	option allow_global &#x27;0&#x27;</span><br><span class="line">#	option allow_default &#x27;0&#x27;</span><br><span class="line">#	option allow_dns &#x27;0&#x27;</span><br></pre></td></tr></table></figure>

<p>Restart <code>ZeroTier</code> service:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ root@SenseWrt:~# /etc/init.d/zerotier restart</span><br><span class="line">Generating secret - please wait... done.</span><br></pre></td></tr></table></figure>

<p>Verify <code>ZeroTier</code> client status, which <strong>ztks555nye</strong> is the virtual network interface created on <code>OpenWrt</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@SenseWrt:~# zerotier-cli listnetworks</span><br><span class="line">200 listnetworks &lt;nwid&gt; &lt;name&gt; &lt;mac&gt; &lt;status&gt; &lt;type&gt; &lt;dev&gt; &lt;ZT assigned ips&gt;</span><br><span class="line">200 listnetworks 8ca917257083e297 igloo.studio 9a:09:7b:41:3d:26 OK PRIVATE ztks555nye 192.168.196.176/24</span><br></pre></td></tr></table></figure>

<p>Enable and authorise the new <code>ZeroTier</code> client <code>OpenWrt</code> in <em><a target="_blank" rel="noopener" href="https://my.zerotier.com/">https://my.zerotier.com/</a></em>.</p>
<p>Now add <code>ZeroTier</code> virtual network as a new interface in <code>OpenWrt</code>:</p>
<p><img src="/blog/img/OpenWrt%20-%20ZeroTier%20Network%20Interface.png" alt="OpenWrt - ZeroTier Network Interface" title="OpenWrt - ZeroTier Network Interface"></p>
<p>Create firewall for <code>ZeroTier</code> virtual network interface in <code>OpenWrt</code>:</p>
<p><img src="/blog/img/OpenWrt%20-%20ZeroTier%20Firewall.png" alt="OpenWrt - ZeroTier Firewall" title="OpenWrt - ZeroTier Firewall"></p>
<p>Configure firewall for <code>ZeroTier</code> virtual network interface in <code>OpenWrt</code>:</p>
<p><img src="/blog/img/OpenWrt%20-%20ZeroTier%20Firewall%20General%20Settings.png" alt="OpenWrt - ZeroTier Firewall General Settings" title="OpenWrt - ZeroTier Firewall General Settings"></p>
<p><strong>NOTE:</strong> <strong>opt</strong> network is for the downstream DHCP clients.</p>
<p>Add <strong>Allow-ZeroTier</strong> firewall rule:</p>
<p><img src="/blog/img/OpenWrt%20-%20ZeroTier%20Firewall%20Rule.png" alt="OpenWrt - ZeroTier Firewall Rule" title="OpenWrt - ZeroTier Firewall Rule"></p>
<p>Restart <code>ZeroTier</code> service again:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ root@SenseWrt:~# /etc/init.d/zerotier restart</span><br><span class="line">Generating secret - please wait... done.</span><br></pre></td></tr></table></figure>

<p>Then all <code>OpenWrt</code> clients can access <code>ZeroTier</code> network now.</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li>é©é£ Talk - åç½ç©¿éå·¥å· ZeroTierï¼ä»ç®åå°å¤æçç©æ³ï¼æ ä¿çï¼ä¸æå¨æ¾é <em><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=pa0tkch3lss">https://www.youtube.com/watch?v=pa0tkch3lss</a></em></li>
<li>ZeroTier Terminology - Planet server, Moon server and client node (LEAF) <em><a target="_blank" rel="noopener" href="https://www.wlink-tech.com/art/about-zerotier">https://www.wlink-tech.com/art/about-zerotier</a></em></li>
</ul>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Connecting-OpenWRT-to-internet" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2024/12/05/Connecting-OpenWRT-to-internet/">Connecting OpenWRT to internet</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2024-12-05T03:19:34.000Z" itemprop="datePublished">2024-12-05</time>
</span>
      
      
      
<a href="/blog/2024/12/05/Connecting-OpenWRT-to-internet/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><code>OpenWRT</code> is running on <code>Proxmox</code>. Now setting up it to connect internet.</p>
<p>Add new network interface <strong>OPT</strong> on <strong>eth2</strong> adapter:</p>
<p><img src="/blog/img/OpenWRT%20-%20OPT%20Interface.png" alt="OpenWRT - OPT Interface" title="OpenWRT - OPT Interface"></p>
<p><img src="/blog/img/OpenWRT%20-%20OPT%20Advanced%20Settings.png" alt="OpenWRT - OPT Advanced Settings" title="OpenWRT - OPT Advanced Settings"></p>
<p><img src="/blog/img/OpenWRT%20-%20OPT%20Firewall%20Settings.png" alt="OpenWRT - OPT Firewall Settings" title="OpenWRT - OPT Firewall Settings"></p>
<p><img src="/blog/img/OpenWRT%20-%20OPT%20DHCP%20Server%20General%20Setup.png" alt="OpenWRT - OPT DHCP Server General Setup" title="OpenWRT - OPT DHCP Server General Setup"></p>
<p><img src="/blog/img/OpenWRT%20-%20OPT%20DHCP%20Server%20Advanced%20Settings.png" alt="OpenWRT - OPT DHCP Server Advanced Settings" title="OpenWRT - OPT DHCP Server Advanced Settings"></p>
<p><img src="/blog/img/OpenWRT%20-%20OPT%20DHCP%20Server%20IPv6%20Settings.png" alt="OpenWRT - OPT DHCP Server IPv6 Settings" title="OpenWRT - OPT DHCP Server IPv6 Settings"></p>
<p><img src="/blog/img/OpenWRT%20-%20OPT%20DHCP%20Server%20IPv6%20RA%20Settings.png" alt="OpenWRT - OPT DHCP Server IPv6 RA Settings" title="OpenWRT - OPT DHCP Server IPv6 RA Settings"></p>
<p><img src="/blog/img/OpenWRT%20-%20OPT.png" alt="OpenWRT - OPT" title="OpenWRT - OPT"></p>
<p>Add a new Firewall Zone, from network <strong>opt</strong> to <strong>wan</strong>:</p>
<p><img src="/blog/img/OpenWRT%20-%20Firewall%20Zone%20General%20Settings.png" alt="OpenWRT - Firewall Zone General Settings" title="OpenWRT - Firewall Zone General Settings"></p>
<p><img src="/blog/img/OpenWRT%20-%20Firewall%20Zone%20Advanced%20Settings.png" alt="OpenWRT - Firewall Zone Advanced Settings" title="OpenWRT - Firewall Zone Advanced Settings"></p>
<p><img src="/blog/img/OpenWRT%20-%20Firewall%20Zone%20Conntrack%20Settings.png" alt="OpenWRT - Firewall Zone Conntrack Settings" title="OpenWRT - Firewall Zone Conntrack Settings"></p>
<p><img src="/blog/img/OpenWRT%20-%20Firewall%20Zone.png" alt="OpenWRT - Firewall Zone" title="OpenWRT - Firewall Zone"></p>
<p>Add a new Firewall Traffic Rule for network <strong>opt</strong>:</p>
<p><img src="/blog/img/OpenWRT%20-%20Firewall%20Traffic%20Rule%20General%20Settings.png" alt="OpenWRT - Firewall Traffic Rule General Settings" title="OpenWRT - Firewall Traffic Rule General Settings"></p>
<p><img src="/blog/img/OpenWRT%20-%20Firewall%20Traffic%20Rule%20Advanced%20Settings.png" alt="OpenWRT - Firewall Traffic Rule Advanced Settings" title="OpenWRT - Firewall Traffic Rule Advanced Settings"></p>
<p><img src="/blog/img/OpenWRT%20-%20Firewall%20Traffic%20Rule%20Time%20Restrictions.png" alt="OpenWRT - Firewall Traffic Rule Time Restrictions" title="OpenWRT - Firewall Traffic Rule Time Restrictions"></p>
<p><img src="/blog/img/OpenWRT%20-%20Firewall%20Traffic%20Rule.png" alt="OpenWRT - Firewall Traffic Rule" title="OpenWRT - Firewall Traffic Rule"></p>
<p>Setup DHCP clientsâ static IP addresses:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -l root 192.168.2.1</span><br><span class="line">root@192.168.2.1&#x27;s password:</span><br><span class="line"></span><br><span class="line">BusyBox v1.36.1 (2024-09-23 12:34:46 UTC) built-in shell (ash)</span><br><span class="line"></span><br><span class="line">  _______                     ________        __</span><br><span class="line"> |       |.-----.-----.-----.|  |  |  |.----.|  |_</span><br><span class="line"> |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|</span><br><span class="line"> |_______||   __|_____|__|__||________||__|  |____|</span><br><span class="line">          |__| W I R E L E S S   F R E E D O M</span><br><span class="line"> -----------------------------------------------------</span><br><span class="line"> OpenWrt 23.05.5, r24106-10cc5fcd00</span><br><span class="line"> -----------------------------------------------------</span><br><span class="line"></span><br><span class="line">root@OpenWRT:~# cat /etc/config/dhcp</span><br><span class="line">config dnsmasq</span><br><span class="line">	option domainneeded &#x27;1&#x27;</span><br><span class="line">	option localise_queries &#x27;1&#x27;</span><br><span class="line">	option rebind_protection &#x27;1&#x27;</span><br><span class="line">	option rebind_localhost &#x27;1&#x27;</span><br><span class="line">	option local &#x27;/local/&#x27;</span><br><span class="line">	option domain &#x27;local&#x27;</span><br><span class="line">	option expandhosts &#x27;1&#x27;</span><br><span class="line">	option cachesize &#x27;1000&#x27;</span><br><span class="line">	option authoritative &#x27;1&#x27;</span><br><span class="line">	option readethers &#x27;1&#x27;</span><br><span class="line">	option leasefile &#x27;/tmp/dhcp.leases&#x27;</span><br><span class="line">	option resolvfile &#x27;/tmp/resolv.conf.d/resolv.conf.auto&#x27;</span><br><span class="line">	option localservice &#x27;1&#x27;</span><br><span class="line">	option ednspacket_max &#x27;1232&#x27;</span><br><span class="line">...</span><br><span class="line">config host</span><br><span class="line">	option name &#x27;TL-SX3016F&#x27;</span><br><span class="line">	option ip &#x27;192.168.2.100&#x27;</span><br><span class="line">	option mac &#x27;3C:52:A1:47:23:5D&#x27;</span><br><span class="line"></span><br><span class="line">config host</span><br><span class="line">	option name &#x27;MikroTik&#x27;</span><br><span class="line">	option ip &#x27;192.168.2.110&#x27;</span><br><span class="line">	option mac &#x27;78:9A:18:D0:20:ED&#x27;</span><br><span class="line"></span><br><span class="line">config domain</span><br><span class="line">	option name &#x27;TL-SX3016F&#x27;</span><br><span class="line">	option ip &#x27;192.168.2.100&#x27;</span><br><span class="line"></span><br><span class="line">config domain</span><br><span class="line">	option name &#x27;MikroTik&#x27;</span><br><span class="line">	option ip &#x27;192.168.2.110&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/blog/img/OpenWRT%20-%20DHCP%20and%20DNS.png" alt="OpenWRT - DHCP and DNS" title="OpenWRT - DHCP and DNS"></p>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Running-OpenWRT-on-Proxmox" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2024/12/03/Running-OpenWRT-on-Proxmox/">Running OpenWRT on Proxmox</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2024-12-03T01:46:37.000Z" itemprop="datePublished">2024-12-03</time>
</span>
      
      
      
<a href="/blog/2024/12/03/Running-OpenWRT-on-Proxmox/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>Create <code>OpenWRT</code> VM in <code>Proxmox</code></li>
</ul>
<p><img src="/blog/img/OpenWRT%20-%20VM%20General.png" alt="OpenWRT - VM General" title="OpenWRT - VM General"></p>
<p><img src="/blog/img/OpenWRT%20-%20VM%20OS.png" alt="OpenWRT - VM OS" title="OpenWRT - VM OS"></p>
<p><img src="/blog/img/OpenWRT%20-%20VM%20System.png" alt="OpenWRT - VM System" title="OpenWRT - VM System"></p>
<p><img src="/blog/img/OpenWRT%20-%20VM%20Disks.png" alt="OpenWRT - VM Disks" title="OpenWRT - VM Disks"></p>
<p><img src="/blog/img/OpenWRT%20-%20VM%20CPU.png" alt="OpenWRT - VM CPU" title="OpenWRT - VM CPU"></p>
<p><img src="/blog/img/OpenWRT%20-%20VM%20Memory.png" alt="OpenWRT - VM Memory" title="OpenWRT - VM Memory"></p>
<p><img src="/blog/img/OpenWRT%20-%20VM%20Network.png" alt="OpenWRT - VM Network" title="OpenWRT - VM Network"></p>
<p>This is the <strong>LAN</strong>, and Firewall is <strong>DISABLED</strong>.</p>
<p><img src="/blog/img/OpenWRT%20-%20VM%20Confirm.png" alt="OpenWRT - VM Confirm" title="OpenWRT - VM Confirm"></p>
<p>Add <strong>WAN</strong> into VM, and Firewall is <strong>DISABLED</strong>.</p>
<p>Detach and delete current <strong>Hard Disk</strong>.</p>
<p>From <code>Proxmox</code> Console, download the latest OpenWRT image:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@sense:~# wget https://downloads.openwrt.org/releases/23.05.5/targets/x86/64/openwrt-23.05.5-x86-64-generic-ext4-combined.img.gz</span><br><span class="line">--2024-12-03 12:20:33--  https://downloads.openwrt.org/releases/23.05.5/targets/x86/64/openwrt-23.05.5-x86-64-generic-ext4-combined.img.gz</span><br><span class="line">Resolving downloads.openwrt.org (downloads.openwrt.org)... 2a04:4e42:13::644, 151.101.82.132</span><br><span class="line">Connecting to downloads.openwrt.org (downloads.openwrt.org)|2a04:4e42:13::644|:443... failed: No route to host.</span><br><span class="line">Connecting to downloads.openwrt.org (downloads.openwrt.org)|151.101.82.132|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 11352149 (11M) [application/octet-stream]</span><br><span class="line">Saving to: âopenwrt-23.05.5-x86-64-generic-ext4-combined.img.gzâ</span><br><span class="line"></span><br><span class="line">openwrt-23.05.5-x86-64-generic-ext4-combined.img.gz  100%[===================================================&gt;]  10.83M  --.-KB/s  in 0.1s    </span><br></pre></td></tr></table></figure>

<p>Create disk image for VM:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@sense:~# gunzip openwrt-23.05.5-x86-64-generic-ext4-combined.img.gz</span><br><span class="line"></span><br><span class="line">root@sense:~# mv openwrt-23.05.5-x86-64-generic-ext4-combined.img openwrt.raw</span><br><span class="line"></span><br><span class="line"># increase the raw disk</span><br><span class="line">root@sense:~# qemu-img resize -f raw ./openwrt.raw 1024M</span><br><span class="line">Image resized.</span><br></pre></td></tr></table></figure>

<p>Convert <code>OpenWRT</code> image to VM disk:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># import the raw disk to OpenWRT VM</span><br><span class="line">root@sense:~# qm importdisk 104 openwrt.raw local-lvm</span><br><span class="line">Use of uninitialized value $dev in hash element at /usr/share/perl5/PVE/QemuServer/Drive.pm line 555.</span><br><span class="line">importing disk &#x27;openwrt.raw&#x27; to VM 104 ...</span><br><span class="line">  Logical volume &quot;vm-104-disk-0&quot; created.</span><br><span class="line">transferred 0.0 B of 1.0 GiB (0.00%)</span><br><span class="line">...</span><br><span class="line">transferred 1.0 GiB of 1.0 GiB (100.00%)</span><br><span class="line">unused0: successfully imported disk &#x27;local-lvm:vm-104-disk-0&#x27;</span><br></pre></td></tr></table></figure>

<p>Double click the <strong>Unused Disk</strong>, then click the Add button:</p>
<p><img src="/blog/img/OpenWRT%20-%20VM%20Unused%20Disk.png" alt="OpenWRT - VM Unused Disk" title="OpenWRT - VM Unused Disk"></p>
<p><img src="/blog/img/OpenWRT%20-%20VM%20Hardware.png" alt="OpenWRT - VM Hardware" title="OpenWRT - VM Hardware"></p>
<p><img src="/blog/img/OpenWRT%20-%20VM%20Boot%20Order.png" alt="OpenWRT - VM Boot Order" title="OpenWRT - VM Boot Order"></p>
<ul>
<li>Configure <code>OpenWRT</code></li>
</ul>
<p>Start up VM; change the user <strong>root</strong> password; set LAN ip address temporarily to <strong>192.168.2.3</strong> (Default: <strong>192.168.1.1</strong>):</p>
<p><img src="/blog/img/OpenWRT%20-%20Console.png" alt="OpenWRT - Console" title="OpenWRT - Console"></p>
<p>Login <code>OpenWRT</code> at <em><a target="_blank" rel="noopener" href="http://192.168.2.3/">http://192.168.2.3/</a></em>, via LAN port, and land on dashboard:</p>
<p><img src="/blog/img/OpenWRT%20-%20Login.png" alt="OpenWRT - Login" title="OpenWRT - Login"></p>
<p><img src="/blog/img/OpenWRT%20-%20Dashboard.png" alt="OpenWRT - Dashboard" title="OpenWRT - Dashboard"></p>
<ul>
<li>Themes</li>
</ul>
<p><strong>SSH</strong> login:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -l root 192.168.2.3</span><br><span class="line">The authenticity of host &#x27;192.168.2.3 (192.168.2.3)&#x27; can&#x27;t be established.</span><br><span class="line">ED25519 key fingerprint is SHA256:AggWAL1oU8+r1f84KoqpvcsYUylZOTfN0sXwHSby3b0.</span><br><span class="line">This key is not known by any other names.</span><br><span class="line">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span><br><span class="line">Warning: Permanently added &#x27;192.168.2.3&#x27; (ED25519) to the list of known hosts.</span><br><span class="line">root@192.168.2.3&#x27;s password: </span><br><span class="line">  _______                     ________        __</span><br><span class="line"> |       |.-----.-----.-----.|  |  |  |.----.|  |_</span><br><span class="line"> |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|</span><br><span class="line"> |_______||   __|_____|__|__||________||__|  |____|</span><br><span class="line">          |__| W I R E L E S S   F R E E D O M</span><br><span class="line"> -----------------------------------------------------</span><br><span class="line"> OpenWrt 23.05.5, r24106-10cc5fcd00</span><br><span class="line"> -----------------------------------------------------</span><br><span class="line"></span><br><span class="line">BusyBox v1.36.1 (2024-09-23 12:34:46 UTC) built-in shell (ash)</span><br></pre></td></tr></table></figure>

<p><code>OpenWRT</code> packages configuration:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">root@OpenWrt:~# ls -al /etc/opkg</span><br><span class="line">drwxr-xr-x    3 root     root          4096 Dec  6 02:46 .</span><br><span class="line">drwxr-xr-x   23 root     root          4096 Dec  6 02:41 ..</span><br><span class="line">-rw-r--r--    1 root     root           103 Sep 23 12:34 customfeeds.conf</span><br><span class="line">-rw-r--r--    1 root     root           555 Dec  6 02:46 distfeeds.conf</span><br><span class="line">drwxr-xr-x    2 root     root          4096 Sep 23 12:34 keys</span><br><span class="line"></span><br><span class="line">root@OpenWrt:~# ls -al /var/opkg-lists/</span><br><span class="line">drwxr-xr-x    2 root     root           320 Dec  6 03:15 .</span><br><span class="line">drwxrwxrwt   17 root     root           440 Dec  6 03:15 ..</span><br><span class="line">-rw-r--r--    1 root     root         72705 Dec  6 03:15 openwrt_base</span><br><span class="line">-rw-r--r--    1 root     root           142 Dec  6 03:15 openwrt_base.sig</span><br><span class="line">-rw-r--r--    1 root     root         10039 Dec  6 03:15 openwrt_core</span><br><span class="line">-rw-r--r--    1 root     root           142 Dec  6 03:15 openwrt_core.sig</span><br><span class="line">-rw-r--r--    1 root     root        100416 Dec  6 03:15 openwrt_kmods</span><br><span class="line">-rw-r--r--    1 root     root           142 Dec  6 03:15 openwrt_kmods.sig</span><br><span class="line">-rw-r--r--    1 root     root        197242 Dec  6 03:15 openwrt_luci</span><br><span class="line">-rw-r--r--    1 root     root           142 Dec  6 03:15 openwrt_luci.sig</span><br><span class="line">-rw-r--r--    1 root     root        516243 Dec  6 03:15 openwrt_packages</span><br><span class="line">-rw-r--r--    1 root     root           142 Dec  6 03:15 openwrt_packages.sig</span><br><span class="line">-rw-r--r--    1 root     root          9918 Dec  6 03:15 openwrt_routing</span><br><span class="line">-rw-r--r--    1 root     root           142 Dec  6 03:15 openwrt_routing.sig</span><br><span class="line">-rw-r--r--    1 root     root         58240 Dec  6 03:15 openwrt_telephony</span><br><span class="line">-rw-r--r--    1 root     root           142 Dec  6 03:15 openwrt_telephony.sig</span><br></pre></td></tr></table></figure>

<p>There is some issue with <strong>IPv6</strong> support in <code>OpenWRT</code> when download update. Errors thrown when <strong>wan</strong> connected to a <strong>IPv6</strong> router: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">root@OpenWrt:~# opkg update</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/targets/x86/64/packages/Packages.gz</span><br><span class="line">*** Failed to download the package list from https://downloads.openwrt.org/releases/23.05.5/targets/x86/64/packages/Packages.gz</span><br><span class="line">...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/telephony/Packages.gz</span><br><span class="line">*** Failed to download the package list from https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/telephony/Packages.gz</span><br><span class="line"></span><br><span class="line">Collected errors:</span><br><span class="line"> * opkg_download: Failed to download https://downloads.openwrt.org/releases/23.05.5/targets/x86/64/packages/Packages.gz, wget returned 4.</span><br><span class="line"> * opkg_download: Check your network settings and connectivity.</span><br><span class="line">...</span><br><span class="line"> * opkg_download: Failed to download https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/telephony/Packages.gz, wget returned 4.</span><br><span class="line"> * opkg_download: Check your network settings and connectivity.</span><br></pre></td></tr></table></figure>

<p>Turn off <strong>IPv6</strong> on router to workaround.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@OpenWRT:~# opkg update</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/targets/x86/64/packages/Packages.gz</span><br><span class="line">Updated list of available packages in /var/opkg-lists/openwrt_core</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/targets/x86/64/packages/Packages.sig</span><br><span class="line">Signature check passed.</span><br><span class="line">...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/telephony/Packages.gz</span><br><span class="line">Updated list of available packages in /var/opkg-lists/openwrt_telephony</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/telephony/Packages.sig</span><br><span class="line">Signature check passed.</span><br></pre></td></tr></table></figure>

<p>Install <code>OpenWRT2020</code> Theme <em><a target="_blank" rel="noopener" href="https://openwrt.org/docs/guide-user/luci/luci.themes">https://openwrt.org/docs/guide-user/luci/luci.themes</a></em>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@OpenWRT:~# opkg install luci-theme-openwrt-2020</span><br><span class="line">Installing luci-theme-openwrt-2020 (git-24.332.79522-a493155) to root...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/luci/luci-theme-openwrt-2020_git-24.332.79522-a493155_all.ipk</span><br><span class="line">Configuring luci-theme-openwrt-2020.</span><br></pre></td></tr></table></figure>

<p>Install Argon Theme <em><a target="_blank" rel="noopener" href="https://github.com/jerrykuku/luci-theme-argon">https://github.com/jerrykuku/luci-theme-argon</a></em>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">root@OpenWRT:~# opkg install luci-compat</span><br><span class="line">Installing luci-compat (git-24.332.79522-a493155) to root...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/luci/luci-compat_git-24.332.79522-a493155_all.ipk</span><br><span class="line">Installing liblua5.1.5 (5.1.5-11) to root...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/base/liblua5.1.5_5.1.5-11_x86_64.ipk</span><br><span class="line">Installing lua (5.1.5-11) to root...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/base/lua_5.1.5-11_x86_64.ipk</span><br><span class="line">Installing luci-lib-nixio (git-24.332.79522-a493155) to root...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/luci/luci-lib-nixio_git-24.332.79522-a493155_x86_64.ipk</span><br><span class="line">Installing luci-lib-ip (git-24.332.79522-a493155) to root...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/luci/luci-lib-ip_git-24.332.79522-a493155_x86_64.ipk</span><br><span class="line">Installing luci-lib-jsonc (git-24.332.79522-a493155) to root...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/luci/luci-lib-jsonc_git-24.332.79522-a493155_x86_64.ipk</span><br><span class="line">Installing liblucihttp-lua (2023-03-15-9b5b683f-1) to root...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/luci/liblucihttp-lua_2023-03-15-9b5b683f-1_x86_64.ipk</span><br><span class="line">Installing luci-lib-base (git-24.332.79522-a493155) to root...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/luci/luci-lib-base_git-24.332.79522-a493155_all.ipk</span><br><span class="line">Installing libubus-lua (2023-06-05-f787c97b-1) to root...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/base/libubus-lua_2023-06-05-f787c97b-1_x86_64.ipk</span><br><span class="line">Installing ucode-mod-lua (1) to root...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/luci/ucode-mod-lua_1_x86_64.ipk</span><br><span class="line">Installing luci-lua-runtime (git-24.332.79522-a493155) to root...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/luci/luci-lua-runtime_git-24.332.79522-a493155_x86_64.ipk</span><br><span class="line">Configuring liblua5.1.5.</span><br><span class="line">Configuring lua.</span><br><span class="line">Configuring luci-lib-nixio.</span><br><span class="line">Configuring luci-lib-ip.</span><br><span class="line">Configuring luci-lib-jsonc.</span><br><span class="line">Configuring liblucihttp-lua.</span><br><span class="line">Configuring luci-lib-base.</span><br><span class="line">Configuring libubus-lua.</span><br><span class="line">Configuring ucode-mod-lua.</span><br><span class="line">Configuring luci-lua-runtime.</span><br><span class="line">Configuring luci-compat.</span><br><span class="line"></span><br><span class="line">root@OpenWRT:~# opkg install luci-lib-ipkg</span><br><span class="line">Installing luci-lib-ipkg (git-24.332.79522-a493155) to root...</span><br><span class="line">Downloading https://downloads.openwrt.org/releases/23.05.5/packages/x86_64/luci/luci-lib-ipkg_git-24.332.79522-a493155_all.ipk</span><br><span class="line">Configuring luci-lib-ipkg.</span><br><span class="line"></span><br><span class="line">root@OpenWRT:~# wget --no-check-certificate -O luci-theme-argon.ipk https://github.com/jerrykuku/luci-theme-argon/releases/download/v2.3.1/luci-theme-argon_2.3.1_all.ipk</span><br><span class="line">root@OpenWRT:~# wget --no-check-certificate -O luci-app-argon-config.ipk https://github.com/jerrykuku/luci-app-argon-config/releases/download/v0.9/luci-app-argon-config_0.9_all.ipk</span><br></pre></td></tr></table></figure>

<p>There are ERRORS:</p>
<ul>
<li><em>&#x2F;&#x2F;usr&#x2F;lib&#x2F;opkg&#x2F;info&#x2F;luci-theme-argon.postinst: .: line 2: canât open â&#x2F;etc&#x2F;uci-defaults&#x2F;30_luci-theme-argonâ: No such file or directory</em></li>
<li><em>&#x2F;&#x2F;usr&#x2F;lib&#x2F;opkg&#x2F;info&#x2F;luci-app-argon-config.postinst: .: line 2: canât open â&#x2F;etc&#x2F;uci-defaults&#x2F;luci-argon-configâ: No such file or directory</em></li>
</ul>
<p>thrown when try to install these packages.</p>
<p>A workaround solution is modify <strong>&#x2F;lib&#x2F;functions.sh</strong> file, replace line: 282:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">( [ -f &quot;$i&quot; ] &amp;&amp; cd &quot;$(dirname $i)&quot; &amp;&amp; . &quot;$i&quot; ) &amp;&amp; rm -f &quot;$i&quot;</span><br></pre></td></tr></table></figure>

<p>with: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">( [ -f &quot;$i&quot; ] &amp;&amp; cd &quot;$(dirname $i)&quot; &amp;&amp; . &quot;$i&quot; ) &amp;&amp; echo</span><br></pre></td></tr></table></figure>

<p>temporarily. Then run installation:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@OpenWRT:~# opkg install luci-theme-argon.ipk </span><br><span class="line">Installing luci-theme-argon (2.3.1) to root...</span><br><span class="line">Configuring luci-theme-argon.</span><br><span class="line"></span><br><span class="line">root@OpenWRT:~# opkg install luci-app-argon-config.ipk </span><br><span class="line">Installing luci-app-argon-config (0.9) to root...</span><br><span class="line">Configuring luci-app-argon-config.</span><br></pre></td></tr></table></figure>

<ul>
<li>Upgrade</li>
</ul>
<p>To upgrade all of the <code>OpenWRT</code> packages:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@OpenWRT:~# opkg list-upgradable | cut -f 1 -d &#x27; &#x27; | xargs -r opkg upgrade  </span><br></pre></td></tr></table></figure>


<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li>Run an OpenWRT VM on Proxmox VE, <em><a target="_blank" rel="noopener" href="https://i12bretro.github.io/tutorials/0405.html">https://i12bretro.github.io/tutorials/0405.html</a></em></li>
<li>My Mobile HomeLab! (Travel Router with Proxmox, Docker, and OpenWRT), <em><a target="_blank" rel="noopener" href="https://technotim.live/posts/mobile-homelab/">https://technotim.live/posts/mobile-homelab/</a></em></li>
</ul>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Fixing-Multimedia-Audio-Controller-driver-missing-issue-in-Windows-11" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2024/11/25/Fixing-Multimedia-Audio-Controller-driver-missing-issue-in-Windows-11/">Fixing Multimedia Audio Controller driver missing issue in Windows 11</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2024-11-25T06:21:43.000Z" itemprop="datePublished">2024-11-25</time>
</span>
      
      
      
<a href="/blog/2024/11/25/Fixing-Multimedia-Audio-Controller-driver-missing-issue-in-Windows-11/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Error thrown while missing <strong>Multimedia Audio Driver</strong> driver in Device Manager in Windows 11:</p>
<p><img src="/blog/img/Windows%20-%20Multimedia%20Audio%20Controller.png" alt="Windows - Multimedia Audio Controller" title="Windows - Multimedia Audio Controller"></p>
<p>when runs on an Intel i3 N305 Mini PC <em><a target="_blank" rel="noopener" href="https://www.aliexpress.com/item/1005007278560105.html">https://www.aliexpress.com/item/1005007278560105.html</a></em> </p>
<p><img src="/blog/img/Intel%20Network%20-%20Mini%20PC.png" alt="Intel Network - Mini PC" title="Intel Network - Mini PC"></p>
<p>Need this handy tool to find all the missing parts:</p>
<p><img src="/blog/img/Windows%20-%20Driver%20Identifier.png" alt="Windows - Driver Identifier" title="Windows - Driver Identifier"></p>
<p><code>Driver Identifier</code>, a digital assistant for your systemâs hardware, can scan the device, identifies outdated or missing drivers, and provides a customized list of updates for your specific hardware:</p>
<p><img src="/blog/img/Windows%20-%20Drivers.png" alt="Windows - Drivers" title="Windows - Drivers"></p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li>DriverIdentifier is a powerful tool that takes the hassle out of managing and updating drivers on your computer, <em><a target="_blank" rel="noopener" href="https://www.driveridentifier.com/">https://www.driveridentifier.com/</a></em></li>
</ul>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Setting-up-DNS-Server-in-OPNsense" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2024/11/21/Setting-up-DNS-Server-in-OPNsense/">Setting up DNS Server in OPNsense</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2024-11-20T23:21:28.000Z" itemprop="datePublished">2024-11-21</time>
</span>
      
      
      
<a href="/blog/2024/11/21/Setting-up-DNS-Server-in-OPNsense/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Want to access Homelab network switchesâ web based administrator interface in a user friendly way, i.e., access via <a target="_blank" rel="noopener" href="http://tl-sx3016f.local/">http://TL-SX3016F.local/</a>, <a target="_blank" rel="noopener" href="http://tl-sx3008f.local/">http://TL-SX3008F.local/</a> and <a target="_blank" rel="noopener" href="http://mikrotik.local/">http://MikroTik.local/</a>.</p>
<p>In TP-Link Deco, which is the main Homelab network backbone, also provides DHCP service, firstly is to reserve IP addresses for these switches:</p>
<p><img src="/blog/img/DNS%20-%20TP-Link%20Deco%20Reservation.jpg" alt="DNS - TP-Link Deco Reservation" title="DNS - TP-Link Deco Reservation"></p>
<p>Then setup entries in <code>OPNsense Unbound DNS</code> server:</p>
<p><img src="/blog/img/DNS%20-%20Host%20Overrides.png" alt="DNS - Host Overrides" title="DNS - Host Overrides"></p>
<p>Then lookup a host on local network:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$ cat /etc/resolv.conf</span><br><span class="line">#</span><br><span class="line"># macOS Notice</span><br><span class="line">#</span><br><span class="line"># This file is not consulted for DNS hostname resolution, address</span><br><span class="line"># resolution, or the DNS query routing mechanism used by most</span><br><span class="line"># processes on this system.</span><br><span class="line">#</span><br><span class="line"># To view the DNS configuration used by this system, use:</span><br><span class="line">#   scutil --dns</span><br><span class="line">#</span><br><span class="line"># SEE ALSO</span><br><span class="line">#   dns-sd(1), scutil(8)</span><br><span class="line">#</span><br><span class="line"># This file is automatically generated.</span><br><span class="line">#</span><br><span class="line">search local</span><br><span class="line">nameserver 2403:5802:8c44:3:be24:11ff:fe21:3ce0</span><br><span class="line">nameserver 192.168.68.1</span><br><span class="line"></span><br><span class="line">$ nslookup MikroTik.local</span><br><span class="line">Server:		2403:5802:8c44:3:be24:11ff:fe21:3ce0</span><br><span class="line">Address:	2403:5802:8c44:3:be24:11ff:fe21:3ce0#53</span><br><span class="line"></span><br><span class="line">Name:	MikroTik.local</span><br><span class="line">Address: 192.168.68.54</span><br></pre></td></tr></table></figure>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>



    <nav id="page-nav">

<span class="page-number current">1</span><a class="page-number" href="/blog/page/2/">2</a><a class="page-number" href="/blog/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/13/">13</a><a class="extend next" rel="next" href="/blog/page/2/">Next</a>
</nav>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-posts"></i> Recent</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2025/05/21/Proxmox-over-Wireless/">Proxmox over Wireless</a>
          </li>
        
          <li>
            <a href="/blog/2025/01/25/ZeroTier-on-TrueNAS-Scale/">ZeroTier on TrueNAS Scale</a>
          </li>
        
          <li>
            <a href="/blog/2025/01/22/Xray-X-UI-Reality-protocol-Vision-flow-on-Oracle-Cloud/">Xray, X-UI, Reality protocol, Vision flow on Oracle Cloud</a>
          </li>
        
          <li>
            <a href="/blog/2025/01/22/Xray-X-UI-Reality-protocol-Vision-flow-on-Amazon-Linux/">Xray, X-UI, Reality protocol, Vision flow on Amazon Linux</a>
          </li>
        
          <li>
            <a href="/blog/2024/12/21/How-to-install-and-run-Tailscale-client-on-OpenWrt/">How to install and run Tailscale client on OpenWrt</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-archive"></i> Archive</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2025/">2025</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2024/">2024</a><span class="archive-list-count">30</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/">2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/">2022</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/">2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/">2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/">2019</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/">2018</a><span class="archive-list-count">31</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/">2017</a><span class="archive-list-count">25</span></li></ul>
    </div>
  </div>


  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-link"></i> Blogroll</h3>
    <div class="widget">
      <ul>
      
        <li>
          <a target="_blank" rel="noopener" href="https://www.linkedin.com/in/terrencemiao/">LinkedIn</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="https://github.com/TerrenceMiao">GitHub</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="https://twitter.com/TerrenceMiao">Twitter</a>
        </li>
      
      </ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <a id="totop" href="#top"></a>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        <a href="/blog/sitemap.xml">Site Map</a>
        <span> | </span><a href="/blog/atom.xml">Subscribe to this site</a>
        <span> | </span><a href="/blog/about/">Contact the blogger</a>
      </p>
      
        <p>
          <i class="fa fa-visitors"></i>
          <i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>
          ï¼
          <i class="fa fa-views"></i>
          <i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>
        </p>
      
      <p>
        <span>Copyright &copy; 2025 Terrence Miao.</span>
        <span>Theme by <a href="https://github.com/chaooo/hexo-theme-BlueLake/" target="_blank">BlueLake.</a></span>
        <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo.</a></span>
      </p>
    </div>
  </div>
</footer>

    </div>
  </div>
  
<script src="/blog/js/jquery-3.4.1.min.js"></script>


<script src="/blog/js/search.json.js"></script>


  
<script src="/blog/fancybox/jquery.fancybox.min.js"></script>




<script src="/blog/js/script.js"></script>






  
<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>








  



  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>
  <script src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML" async type="text/javascript"></script>

</body>
</html>