<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=330279473"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '330279473');
</script>
<!-- End Google Analytics -->

  
  <title>Terrence Miao&#39;s Adventures</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
    <meta name="description" content="Veni, vidi, vici">
  
  
  
    <link rel="alternate" href="/blog/atom.xml" title="Terrence Miao's Adventures" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/blog/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/blog/css/style.css">

  
    
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.min.css">

  
  
  
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7274218747178099" crossorigin="anonymous"></script>
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">Terrence Miao&#39;s Adventures</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog/" id="subtitle">A journey of a thousand miles begins with a single step</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/blog/."><i class="fa fa-home"></i> Home</a>
        
          <a class="main-nav-link" href="/blog/archives/"><i class="fa fa-archive"></i> Archive</a>
        
          <a class="main-nav-link" href="/blog/about/"><i class="fa fa-user"></i> About</a>
        
          <a class="main-nav-link" href="/blog/atom.xml"><i class="fa fa-rss"></i> RSS</a>
        
      </nav>
    </div>
    <div id="search-form">
      <div id="result-mask" class="hide"></div>
      <label><input id="search-key" type="text" autocomplete="off" placeholder="search"></label>
      <div id="result-wrap" class="hide">
        <div id="search-result"></div>
      </div>
      <div class="hide">
        <template id="search-tpl">
          <div class="item">
            <a href="/{path}" title="{title}">
              <div class="title">{title}</div>
              <div class="time">{date}</div>
              <div class="tags">{tags}</div>
            </a>
          </div>
        </template>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  <article id="post-Why-React" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2019/12/01/Why-React/">Why React?</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-12-01T02:40:56.000Z" itemprop="datePublished">2019-12-01</time>
</span>
      
      
      
<a href="/blog/2019/12/01/Why-React/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>A new pedigree of Frontend Development.</p>
<p>The following are the preferred technical choices for any new projects that do not have a “<strong>hammer whats already there</strong>“ constraint that have been chosen for consistency.</p>
<h2 id="Programming-Language-TypeScript"><a href="#Programming-Language-TypeScript" class="headerlink" title="Programming Language: TypeScript "></a>Programming Language: TypeScript </h2><p>Alternatives to avoid:</p>
<ul>
<li><strong>Raw JS</strong> &#x2F; <a target="_blank" rel="noopener" href="https://babeljs.io/"><strong>Babel</strong></a>: Types can prevent a significant amount of bugs and provide a great means of documenting code that can be validated by a compiler. Therefore we will not dabble in untyped programming languages for Frontend development.</li>
<li>Other TypeSafe alternatives:<ul>
<li><a target="_blank" rel="noopener" href="https://dart.dev/"><strong>Dart</strong></a> &#x2F; <a target="_blank" rel="noopener" href="https://elm-lang.org/"><strong>Elm</strong></a> &#x2F; <a target="_blank" rel="noopener" href="https://dotnet.microsoft.com/apps/aspnet/web-apps/blazor"><strong>Blazor</strong></a> - typed compile to JavaScript languages: Browsers operate on JavaScript using a language that is too far removed from JS means people will need to learn two language and fix bugs at two levels.</li>
<li><a target="_blank" rel="noopener" href="https://flow.org/"><strong>Flow</strong></a> - A facebook alternative to TypeScript. Flow was a decent experiment into JavaScript type safety by the Facebook team, but news from inside Facebook (chats at conferences) is that it is not actively getting maintained. Therefore it should be avoided.</li>
</ul>
</li>
</ul>
<h2 id="UI-Library-React"><a href="#UI-Library-React" class="headerlink" title="UI Library: React"></a>UI Library: React</h2><p>Alternatives to avoid:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://angular.io/"><strong>Angular</strong></a>: <strong>Angular</strong> goes through significant breaking changes as can be <a target="_blank" rel="noopener" href="https://github.com/angular/angular/blob/master/CHANGELOG.md">witnessed by the changelog</a>. Also <strong>Angular</strong> is a full framework (as opposed to a library), but people rarely use it as a framework as there will be inevitable external dependencies for alternative (even better) community tools e.g. <a target="_blank" rel="noopener" href="https://rxjs.dev/"><strong>rxjs</strong></a> for state, <a target="_blank" rel="noopener" href="https://github.com/axios/axios"><strong>axios</strong></a> for api etc.</li>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/"><strong>Vue</strong></a>: <strong>Vue</strong> is the third most popular choice. However it not backed by a major enterprise (Facebook for <strong>React</strong>, Google for <strong>Angular</strong>)</li>
<li><a target="_blank" rel="noopener" href="https://svelte.dev/"><strong>Svelte</strong></a>: Same reasons as <strong>Vue</strong>.</li>
</ul>
<h2 id="State-Management-MobX"><a href="#State-Management-MobX" class="headerlink" title="State Management: MobX"></a>State Management: <a target="_blank" rel="noopener" href="https://mobx.js.org/">MobX</a></h2><p>Alternatives to avoid:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://redux.js.org/"><strong>Redux</strong></a>: <strong>Redux</strong> is definitely the more popular choice in the React community. However most people will use it with some additional middleware library e.g. <a target="_blank" rel="noopener" href="https://github.com/reduxjs/redux-thunk">redux-thunk</a> or <a target="_blank" rel="noopener" href="https://github.com/redux-saga/redux-saga/">redux-saga</a> leading to multiple ways of doing Frontend. Also, <strong>Redux</strong> is significantly more verbose (because of always new object creation) and difficult to optimise (because of no internal knowledge of what changed).</li>
</ul>
<h2 id="Styles-CSS-in-JS"><a href="#Styles-CSS-in-JS" class="headerlink" title="Styles: CSS in JS"></a>Styles: CSS in JS</h2><p>Prefer <a target="_blank" rel="noopener" href="https://github.com/emotion-js/emotion">Emotion</a> or <a target="_blank" rel="noopener" href="https://github.com/typestyle/typestyle">TypeStyle</a> over others.</p>
<p>Alternatives to avoid:</p>
<ul>
<li>CSS preprocessor (e.g. <a target="_blank" rel="noopener" href="https://sass-lang.com/"><strong>sass</strong></a> &#x2F; <a target="_blank" rel="noopener" href="https://github.com/css-modules/css-modules"><strong>css-modules</strong></a>). For CSS in JS there is an <a target="_blank" rel="noopener" href="https://speakerdeck.com/vjeux/react-css-in-js">excellent presentation</a> that you should checkout. Key reasons are clear code co-location and management practices for CSS, the same way <strong>React</strong> does it for Html (with JSX).</li>
</ul>
<h2 id="End-to-End-Testing-Cypress"><a href="#End-to-End-Testing-Cypress" class="headerlink" title="End to End Testing : Cypress"></a>End to End Testing : Cypress</h2><p><a target="_blank" rel="noopener" href="https://www.cypress.io/"><strong>Cypress</strong></a> for E2E testing.</p>
<p>Alternatives to avoid:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://selenium.dev/"><strong>Selenium</strong></a> based solutions (e.g. <a target="_blank" rel="noopener" href="https://www.protractortest.org/#/"><strong>Protractor</strong></a> &#x2F; <a target="_blank" rel="noopener" href="https://nightwatchjs.org/"><strong>Nightwatch</strong></a>). <strong>Selenium</strong> operates over a wire transfer protocol that makes it impossible to provide many of the debugging features provided by <strong>Cypress</strong>. <strong>Cypress</strong> operates in process with the tests making automatic retries with greater flake resistance and a significantly improved debugging experience.</li>
</ul>
<h2 id="HTTP-Requests"><a href="#HTTP-Requests" class="headerlink" title="HTTP Requests"></a>HTTP Requests</h2><p>Prefer <a target="_blank" rel="noopener" href="https://github.com/axios/axios"><strong>axios</strong></a> due to is built in TypeScript definitions, great browser support and community guidance.</p>
<p>Alternatives to avoid:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"><strong>fetch</strong></a>: Needs polyfill and needs explicit calls for json de-serialization.</li>
</ul>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-A-PC-person-s-guide-to-Mac" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2019/11/28/A-PC-person-s-guide-to-Mac/">A PC person&#39;s guide to Mac</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-11-28T03:24:25.000Z" itemprop="datePublished">2019-11-28</time>
</span>
      
      
      
<a href="/blog/2019/11/28/A-PC-person-s-guide-to-Mac/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Prelude"><a href="#Prelude" class="headerlink" title="Prelude"></a>Prelude</h2><p>This is a re-posted article I published on May 19th, 2012, long long time ago on the currently already died Google Plus.</p>
<hr>
<p>Bought a lowest entry level Macbook Pro 13” i5 refurbished during the week. This is the <strong>first ever</strong> Apple product I bought. I’m not a fan boy of sleeky, popular iPhone. I keep poo-pooing iPad. But because of the admiration of MBP’s impeccable design and high quality, moreover as a tribute to Steve Jobs, I join the cohort of yuppies, with a silver MPB on my laptop.</p>
<p><img src="https://lh3.googleusercontent.com/BGvvjxE0er3Z13L3GD179L7GyNDnoA18g1E85DttP87f1NGD_z97L-D7xZHgS58bCV7FeoEO8J1GZ8cUnTZKROhoJyEr3Hya0LIG5aO-Fj79uthzsUnBLCwJwskyJAs1ul5u3XCmEFxLsBL_dM1-tFS3mMZj9adUePJlQLAo_W89ew-dAvM5OJyzhvnCOQ7qPhQDA2Kh72z9GF0xec4fWnkHt4Hoh_jFZyxCcGUSddtOI5ncRUdavLUQO5v3fSTvxj-QC-iLw9q8yzRuwSH_ZwetD9IpaPwCif9wHyuzb1gcOmYyoEGRiZctfNJcgHYqTmbMJ9ngNXX0dkSYVK27Z6gyPJdd7fdS_imDexwstcdTUIpn--7KKg8_THWjOyQcz5KWr5z20XmdgPxwIkjLnEuCpaG8xsRhBE5PavX0eiWDQbhe7-mFvRZhAqvws9okEVFKW189BigBnYOCSeFDaMSpgYmJlSkPIq_Ep1ipA_dRkRrUbSmi62R1VdosPlTPOpFg-RDsu66ar761LuBj33WrfPUzrMtA6vAdNgCzuFMgJb6UWiHW750U7LUQN5itu32x6HxKwEsfq8tTORistz_bliyGtF01-3NpProC3b667ClCRvikdc5FV5IRlqeYiNImvY3AzMh4cAjwghDBEuXwBOt5kGy0r746wGFuxrX8Jr72fWnLpu8=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p>
<p>Macbook Pro package comes without Mac OS X Lion installation DVD. You have to re-install OS from internet.</p>
<p><img src="https://lh3.googleusercontent.com/hLcCUB3ESn3ySDBQArhnvV_L5xG29Z_WkGSCrwvOhyifUMsIR0tNW-dZ1Na5oeu3azv2kCmkVzxA-rjXY6myxGOY1jEjjlWet00T_CyM6Th6xGIkeGiDWjLdW5rTN26Im-CVpMtTHfsNiFWiXcICY7Qh52jbm4rXLlrTsKfaMy2KEuzp-iLv11IMWXw76WToN5hvIevnG7lJmHObDapF1J5G46Yc3GqCy2ya8wYingTUS_K7orrU5xFFMkWsTWBD5vGcVhEwtYrqh2nVqfO9fpt_WUPY3J8WbD6SbiGwxpm54xF-MDKtFtslG2AIifjjXUo6UF5PiQXbgOh6grXInp05maYYmnGiD-S7dZRYCGggnp4GhK6S0FT6W9Lslh_HMF6yjVozns7HdQ-tfjxG4u5ewWyloafP2rUkOVMhDC_y-G0mKckIhcAX7FhIdiwiTkSRO4IhLDARtXk8KzrkzYi7FwoLoMhRpZjoXvc7y7QuaHNirugN6umpYgNkgT43PpJeHhMdOj1NKfxDG4gg7qiQh9ZvElAld4Wi_1SNGfgduz2zCyQ-QUmguOitOkRTArSNO3cSUv3NvdYlFA-R5GRGiCEChYbjFT9x98NpduO-Ceb5WE2ymy5R80Z1RhVdlRQDMmb03_O3gPN1oV1f7wV8ZPbYSdoZpByy1w7FrJ7_GkEWVocYRA0=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p>
<p><img src="https://lh3.googleusercontent.com/01phhYjoe-dypsAlxX-yJ-dVacnilS4kqByR_DdSQ4Vs7GWCfK1twRNDXCXSUzramt7Tbf2zFSeZn96krFN3PT6uh1z577zJUFv118KiKzHZfhR3y_zb9xjx_cwrLdB65KN8EsT0Q8sZWn7RIue0nrlWyg3Ac23e2knLp4h8m3YeTyAKFYGi6fK6lg_gljr57mvc10juUSs2L598MF8I7E6wMu0TgdAAy8MDMm-umO2VAGJ8zx093L2kgYZ4sTvQH7lTTydldQAxuUNaZRmpqnu2Nf27BlN25nTWaSDpwIvHD5nBqb0WlQ7T5rIpYMLsKDnaMfZ5agr4Tv1bnEdKZZONLNnawIabNwllig4i-UxBosA6oSUzGmbHKOVwQKew8BEHooWoML9toiFDsVyo9A_kIKzXrfn4yQG43J3tdJR1_ZosvM9guQUAW2rNtO1DhD-599-jesOH_exmpIxDnWjOs_iXSkQOsEWr-j_K8zkRkd8QA2ROjdsYlwuo7pG2SvX_JmQB7ru394FdzZEFDSiw7ubvrT_XvI5Ia_pMxwuwNJ-HpqWTEh8rQqMCT-nFw7aHfLfLfkZpNDHAdpa-eBo74Gm58TDeMCq5sDklr5OK7oDpBbX9etE0qLqcVjs1BTHRdOCWJjh2dy4eXTrs1FXyZaeySvCfl52QrtS-QZU1lMebZH3YNkk=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p>
<p>Impeccable design and high quality product, even the refurbished one.</p>
<p><img src="https://lh3.googleusercontent.com/SKJqvDqwNERdXD-WGXfHVpOdRIyQ9_vI6WDVWIlDlIrSe96tmwSTSVklZZtcq4ZTDbmaGKXKLW4ZuSxVdjbcHwGjhy8wA1rasrvLUeKZGTCa7etj155vQLSehHtbqDNfiqIsQH70KzltjSi3oHSvNsLx2o5B3SobbQWT6x5R0ioYIfofXtsj0JZP3cQm0QWtrVnM2qXRs3MhTsRpTeocnA_IblzS8I2XADyECzn3pAxlgnGZehNYy31gw8SGPRS7uhaTwOd9PVHPc1XV6_0eD10hsUeDrCHFBYbbeB33pjKoFv9gt6uXiu9WKnX1CQXDQanVzcAVj9Sb-WCOkTeh_CUjqmM_35yV6i5x0gQ6VuP5c7Sc4xsDe1XmJkanyI9eVkesuAqweSUY0WxwIoUaaNIMsrPZ-6YmAoyzXB07HkMZBlZiqqp8W51VXvWGHua4up5f272wDmalAH1McjajHkpqWkIjP_UXXA8ZqIBSHFVDLwckEkgmDjgIDYMcX0g7-ogW5A6zqwhtrNtL_YKBBav4dRonGJJHekuzsaaXQdHAks8hn4Yc7CrJq7XiXCaicTCjsnHB0T0msIl6CCvJr5gZGG4cpOGvx4SHctstCNUE6LZLoc8mckcjED6t-PJKcQZJW3i8FBga02fWETzL57FU5eaE3Pugenc0Sni0aQgf9EQZpTxIta8=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p>
<p><img src="https://lh3.googleusercontent.com/E7MA1l8YSJu7TQ17E3jILf4QLXKIt3D4yI6umT92r4tEm9nLD22KN4w3c9SLgWkN2go3PEx31cFcuR78MeCFcGQTGgvsiAYlDSlAdvkAnuLomp_cR04q4_AG84N8u3vOINw16uNLcMSLXWWglo-wvgmVYldstefTxSl7dvmBBr78V6TAs1HtMXorL7J1wjE3eXgTiurvq6u3h-bXiMXmDdZb10hbhkEYv0Jwc9sZDDXs47KumA1uTy4cr28qLeDySXEqi36SOPjeRN6984mrPKMXBjzbTq3vdbqQ0BFgtd17JtMbFYUBGVq_5N24-i0hRrNqjPEr_MjsNuhtpT1f5h0Ppu5Va8eiWf2wb7_OO-nuqAAxQEh39wYSZ9Th_gSXmwj39-0ah-WOa73rarmPedH-5nzO6ManoRQx_O6YeO-TnMEbS2koqNaQzjMGljv0AIKXNla4_xPQ4aaAZV5fm9qIVUAS11v6iNh7B6oUGbHGDrc5JdpQ7u_mPJapSc4p1nG0PQ-oHrEIvge4nRS5tHKQ-jUoGD4Lf0wqLxx1I21R7zd7qaxRola1b4XmqYcqK2D62Vr8dXvzvQJa8E7GXgFIxj8j8BphHJhWwOWjvk955i_Qfqwq4JnGyyv0rhfAliJQ8UVWQlZ92ENVV_ozNvqpcSLdq8VsenO1P7bLeaaEPakNRiiRr9A=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p>
<p>However, as a typical PC person living a life of hacker. There should no boundary, no limitation, no rules can’t be broken. In order to maximise all the potentials inside this piece of hardware, and get my investment back, I also ordered 16GB DDR3 RAM, 240GB SATA3 SSD this week from two computer parts shops, at the best price I can find on the market. After some tweak to get rid of the bottleneck in the overall performance, finally this baby is muscled up.</p>
<p><img src="https://lh3.googleusercontent.com/X2dC7v9NrhCiNb89nne06HS9LJV_DYE_ggSoBAh5x8V6LF7xw1S-BiEcoXLdoGCMJ7QENy4dcbOikzttdx41Hf6to-YrHJwI68sCHrO4pS7aPdITe__7lu1CbfTKkJPshCO32C0laMpzQCMmNKu5ZXl48-dBLbTgGraIRJUJ9ylnUznA1BoWCeWvtPTNi_JFAMHjf_Lie5ppt--nJsU6kp6aIh7F9Is51ufkG5TudMcf0oZNVm7Er84sTURmUUJ4-NhbL6u6na43A8pF64-9okzxofK1OBW7LbSHSAmjRcpfjshycAFucIqIGNmsIEjOJJfZtsPsTHJeaEVEV8m7ejFQVWmB4jBRheS7iK-psS2ttgU7UnGQcN_6u7Z-bto5M35BHHvZeb87CSvuxXAe2-JrTYtqrAu3V6vMD6jyDvTRbvQvUGzoq4Nlo8VF2i3nxyJO5n6tqmRBg1MtQrlto8MyzZUJMkrfg1hRQ08giiIxILz4AEx8tIxhnrsWxDsc9IoHwMeGAuhk83LNpXAB-o_96-rtX_TpIcbQt0mSqpCDWkJ1DMhO-ORlRucg1kTyn4vn3wewMccBV5LH_vSidfDVFMW7THG3OyIZAFmol2nMsInE5GMnV9NU7fc6nBsn10uJNak-mX0yI4XwurGZ6lj5Zn3_u2WfC7B3UvbWqehimWiwcC6oSR8=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p>
<p><img src="https://lh3.googleusercontent.com/F9Pi4dCCeyYepZ9LY7VlO60eUeWJ5HG8fHKnbAN0i19Yf5BRtQpPPf6osx41LveIsZ_Q5GTmQSKjq5oUWFvHyPjVAr5P2FSeSf3tM7R6_1kCreaWzm-UgncAr68jwD8W4-cddwDRXNhavW-BfBuq67nNA6ZO80lhQk50WxYYPe60WK4N_r4Y_2e3g5LLsusq78e35NLcsQF4vW_y2iRIDircVI0ruJyQjcCFdzbmS2so46XZ82R_ehX7I44LJlxyimvmXN6FXX111QRttisZ4fQOcGY8vxpFZu-TBfJLKF35CPOY9EnCv-Z_9pqZJbxjsFCNsuIW5EIqEUW2sn7DFPRUfc4V6EMKJqPxcMEEacWEQxSCCU91txnrZaIdNqu1UnAnXq9mo6ucJ3b-3Wx89GWCoPP1w9FQKms7ceFHoCWsMfaXeRsqdsWQe_l666N7ezrrG33DMM6qRMk4rJ9KbGNjsiJt4y4XUBqtiiFeqnIuftrgqTB0f3c2E9iScy7XIiFF20Ot2ukLvouYgpSzExB7o2zFplrggjbjoJCUq26PSBBdJpjBwvkXGrfenfTPBkl64to30qLqbWG2qrtDnUmFECSpgxEDtDaca_aPFg-3jFVlI_r_JyG83YJM2H_uivxe41zp8dF68SJaCbVUqRbw0RY5EbphmQx8uZMLKMe7RJKB5o4zfw=w962-h1596-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p>
<p><img src="https://lh3.googleusercontent.com/mP--OFkadgH0bgMZ0XroA6-RNElxP4kd4gcCd-S24_tBokyhq1k8jKx_9FNURFKaWD7vXv7q2zNS1IVxIQ_Y8pcY2fY8g-T74gJbxv9shq8gyxJ15VI3IVvt9UU5M7u548--ktsWrUgArFweoVbiwqNdLvMeqdFvRtnEJplKtH4AlgeF-c3C4EUulvbSIPYTyZHBmg3hMkrz-WbUGs4UxAl4Rxf9PeCBD_j7Qu1AVxHtGwXqGh5D4fY0rL2zOGYr4VZWm7iP9EMBDpPbH4lkSRm7UqziJ55kW68rits4VgSVlwbOiAiKw9AuqLEvQa-KhlHmHoaI_ZDuDEnpsEim6CqnXI4pw-fNChVwelfIj6gU6N4cB9ZDSJMFcfhajqC2hbniLjQo6hvilo-EzZH1gAi6FES-TF8bASIMxBtreB_1xZ25l7pjsdt_l-bdbJawVbL-tFv61Dzg6GAStkWP6j_kz10E0lWeC9tlhngH5IrDjp8gf557xbRhxHlvAxGqm2OeQWgBF_nHbkXNDTdX8haA4c-wwriYIjpiD-Qr1WgQnmcVgdAoXTlMEii148MEk1wqv7F0_fLd-kM22YfI1mHo6bN5sBvAxGq8Ej1y8XqO_Xsc1K4sf0NSiz3KfGhMea_gU3ER8QZaazPGGHNSJxJDhy8pRdVOFoKQiIfGyKAFRb2y5MFR_Q=w962-h1596-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p>
<p><img src="https://lh3.googleusercontent.com/wQYJSUCUDukjObJV1GsyAcmJvlp8uqkdZO-hUewqgP6wqCBlCvjEL7BXx8dlpcjz-KXgfF-lzunPRJD_OkdDzg9uRO6gWvyo44JPR1j-owoMwnct7MJWKyBib5j9hvaXjYAfp-9HA4oW-jWtvi5uYRr8JKEc1Rs3cq07R92MMWfaqhybf2q6IJrgw0duOxUKepUbiuLAideB0DeL7rpeDKXNylzZ_18vq5X2D3X6bEZaZeGdZZrB3gB7IX6Gx9DPzZQQDuz37tt9eORz9WwENYO7Lf76ff0pAfh456fulQMdfqQQxn1Et9csRvTl-pA0OlnbGdoyAMAGHQ5d4e7nklNqrcpAVl85rVEiOzgSHRMmmdViqQqsX8AT_TYvsgsZRu1iD4aTMrK9zO-4KyulV8hkqA2khfJpxzimebltYY4Z4uGN2JeiueTHZXYSXGqjjmtWG4v1gByoSjuC-d0wiIaqRGuKASXE3B3M8osXYoPX-ilmiJ8T6Zqbc1NNl9AOO6jt466Mp9W-126GgflhkDGmioKxpmh6yJkvV_vRLNwQoOYpn30VkLOaIOokMffqGTOgHOH322UNIEDdj3Wp6vymKCJHhkWpWWF7LdLLTv3VgjdvRtECgU1qadey5OhINLM9RQAM938kZ7n6on7lN-l0ZrCr1aY9wL_MIzjlPpwAS1cM6dOoww=w962-h1596-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p>
<p><img src="https://lh3.googleusercontent.com/msr9NG3fQJx3J6aw1Ro-nykTMbQJpqDPfhsKCDx5CR7DwKrWpALoANwHVHVQnPQbdlEqG4jtQgULWP515CzHD02gjf0ZZE0mpYqurb46m5S5PqsQ6caF9PKSjpVEMdSn2anm99-eWw4GjwDFR3K-6ak6Oisk9hmqMwNl3Fv7wCFdVqK5TJ8TdqiI4Lu7VMViIQmP3OUvCvABl95JQFSWWHEk9FuXRNPpIItn273-8NXT24Nh9t6d0x4w-UgWEzrXyxFsi37JCDSy7RTooaOH1xiKqkZ23eCuQ84rDKktCsSuTWykK3MwsfP6nThSkfM2dksXWByol3tdH0gPYwYTSlpJi-idoSzGc3CacMhb3YaOJaZsW2pCvTDwY6nY6ljU1kyY7LfHZyq9NLXQ4FeVD9ia1eMORExalMswNyUHP7lfkn8V_Zz4iuPg0LC8WSaqEh_-Ge-FJNaNKiTDv4yU0ZtWIA4jkm7nJfeKWss2mm82sjt-c9XSJhKciT7NMliv9SrfIXUjySZ5IM9zkhxPVGHW9QKaFJCcWrSGV_bGs2CsALyu0T3ihRFCxrZ4dJJvj7mmSKOtnjsPSQ5q147B5HQL9PXuQTi3ExkbCIXBIZmVXMKZmHzhGLqanZUGDem0Z4xBLeTRoxpBIM_dQd9uptSIuUQY48Boop2s7BiB2LuQScrxBvm4pg=w962-h1596-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p>
<p><img src="https://lh3.googleusercontent.com/NTBHzPkDJXTeJT09ZTfIeBbNfX8-JHcWMTJbyOwnrdhXgByk0iJOCyAZoSbZa5WU-ZiH33Wp4ZTzrl1oIl4iCjRmgLcJAyerQEMCel_H9s8NRoYKcLD6rlRMOZm8BNZrFj_SLRZx4qZBnA91QH2JX-d4SfxahzDpNpNIbltVd3_TVe-uZlsYX1DUP2IIyiVxt21drcgGBtoR1ZNdyE2aEcT63tSKqxf0LGxq8Nm1Xxr9f-x-5s8Kp9HlugYljfl37G-jhoi2tX9CAjg658g-5Z54-H-oQ32zd1oifIt4TPJ4q2UyCAmXg1X3r3z3NNq8hpU10eFMxT0nDii5S7evQUJLD6gfxXra1ioZTttmD0EE6tLratSq7PWfq6to0ch2ZVB0uBMf7JFxbnAmLn2JkWjpwIqTxvYOcNNbNeuW8QwjJeqOqESbcMPRnspUShB50K7sC9KxpLm8hB6-wteOctylxO7dN7yIKVRxh_HMBJIlGB9SemyT5M_-DCh1QNxNu1o7wSdiSI6mnycr_hgor0eT913zRjFQp9ktHpXVTKg15whP1gx6q1irsmKovlxCvvxcnQX4MjdZMN_mpRGZybRtLnkMv_mN38NAOStOkhrbPOfti6vpdroMWUWZy_-y6vqjlgSmIjYtdjLWfYkyoN9vwfgryY5zo1KNexoQMrb0XMSmq7t3Qw=w962-h1596-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p>
<p>Refurbished MBP, $1189.00 paid on credit card with free shipping. 16GB Patriot DDR3 RAM for Mac, $150 on cash. Corsair Force SATA3 240GB SSD, $295 on cash. The happiness and achievement to get something done after a long time planning, researching, waiting, torture and agony, priceless. There is something money can’t buy. For everything else, there is a Mastercard. And you have to work harder to earn your dole and make this happen.</p>
<p><img src="https://lh3.googleusercontent.com/Ie4SbmL1Xw81fPc82BwUIVdVl4YGD32nKIZBAZiGDH13eDz9nzKL5_Eqyvp7pr5RCqO9sEB6OJRSNeB3_lj3fhm0O707ZIba4uYdaeFQIqttAL7YwGBVoIQAmePlu4rCZXBi3472QvPP-zQPESbYr1xH1hKrbP10TXhWl-NIFy18Eq7rvUL25o6wTzTHrpo9UrPgvgNGkhlmgd5Ge7i_4yTjpkV9jnxU-DpuLC33BKT2we2ltX0suqs5cSONhhCzpE3eZPWGUuz7Zfid6eUyeu2wa5jCYcSLZf08BpSslifT6e7p0MK_pv6vQp1R0Y0vK76L6env9pZa673BloYxovaGEttCbhjC6tCbLcMR32w4eUySkk3na6YDuVeGCjuZzhvzUjwL1nLupgkkPPynP51wWyAEFxa3e3T0JMxO0RryAjI4Ch3eB2QY7HLfcF_0hTWXgjWOP6KnBmbFb7sAbvEy2MFpBu3aPoWrrLRBzP0eA_8kruYoUjlkzbISDT-jzSwYLxt6irvf5aHy34HdHUTT6hrvbhFLNCI0Ien6iLqNBijTMwVOnMMq6lUAVW_DYeAgdXsbUndPTLUcXxauJSsBzmbNZ6Nty1tlSCmziIMNNKfL7TmsVfN2LCVb8oeYh2q-zHckoxaNHP3qdovnomVsZL1WIUQtv_jLz9zZYoW1kDEvJaPo2w=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p>
<p><img src="https://lh3.googleusercontent.com/1-8e18uwWTEu3MBJCWmIa3c2yKyr07Q_h6f5kqFXNDk5AxxD_zSTUEDNarWbfCAy9sroF7ZOaJpj6XGeW0vN3NcFuBM8mGUmhLJuhj7Yqcj9yrOBZensCY4CM3MedVRoOgyS1umogZl40ujbiXFEqusyw-Gn8dbyKi8Si-3SaFiEfchA2-p8EQn2ecFep-o2a57tWmawjgEszoeXTTSP_96m6NShUA2Qbyykl_E2LUKWfD4xbi5SvpLi0UyoOzn803e6DrzanOj9uce82Il4c-S-tXsLW5XydplFMu0H8smg66_-fucx1d3qb_-sucu050BjF0hluoaxT70wTmduyZMRIw0iXbSFlcNO7sgW-vgeCKhLiXxrmnNzFtDn27DVRUBdpbrrb6HfdT-bsfTOcPxIbyFIS5L4V5YrQjIYuII_jONDCVn7KqzgY2iDzyp25E15OfXB7-fpxvpMfmbfkwt1n6HbwCp43a2Mtzrang31weiK81Fc16KjPbhQ82cJYyfvPfiE7K7v6D3l3FDsyx0WBNKaPvmY_sow0bSlLjDX9oyWJhDwrJxIM_p4RfXdgFpvL696JD7fchFHeTjYRyvvOb-gMOj3h9oXsaj_cJPE144rF60M40_wxjyMklbd26EHGS3CRPcZhcvtLOEqF3nQly2z7FZ4qmyjYf2dBh3A8fVWbkRTCw=w2048-h1232-no" alt="A PC person&#39;s guide to Mac" title="A PC person&#39;s guide to Mac"></p>
<hr>
<p>Totally under 1700 dollars investment will keep me happy for a long time. I reckon it will be good money spent on. If you see the used to be memory hogging applications like M$ Office and Eclipse , suddenly they all jump on your face when you click and open them, the blissful feeling is hardly to describe in a single word, especially you need reward and motivate yourself if you were kept in the shity work. Lifespan? Certainly not. Longevity? Probably not. However, what else you can do if you don’t hack it?</p>
<p>Need to change my PC mindset finally. Keep reminding me “Don’t panic, you are using a Mac.”</p>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Run-ssh-and-scp-with-AWS-Session-Manager" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2019/11/22/Run-ssh-and-scp-with-AWS-Session-Manager/">Run ssh and scp with AWS Session Manager</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-11-22T01:09:05.000Z" itemprop="datePublished">2019-11-22</time>
</span>
      
      
      
<a href="/blog/2019/11/22/Run-ssh-and-scp-with-AWS-Session-Manager/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="AWS-Session-Manager"><a href="#AWS-Session-Manager" class="headerlink" title="AWS Session Manager"></a>AWS Session Manager</h2><p>New AWS Systems Manager, including Session Manager is another step enhance security on Cloud. Here are step by step how to set up.</p>
<p>NOTE: There is NO need to require to have a Public IP on EC2 instance, and have network inbound rule setup with opened SSH port 22, and VPN connection.</p>
<ul>
<li>You have <code>ec2-user</code> account on AWS EC2 instance. On localhost:</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">𝜆 cat .aws/config</span><br><span class="line">[default]</span><br><span class="line">output = json</span><br><span class="line">region = ap-southeast-2</span><br><span class="line"></span><br><span class="line">[session]</span><br><span class="line">output = json</span><br><span class="line">region = ap-southeast-2</span><br><span class="line"></span><br><span class="line">𝜆 cat .aws/credentials</span><br><span class="line">[default]</span><br><span class="line">aws_access_key_id = ASIANPOWERHOUSEBLAHBLAH</span><br><span class="line">aws_secret_access_key = aGLMountainLionPIEXL0UK0TunalNB61Kt+GuavaVm4tAD</span><br><span class="line"></span><br><span class="line">[session]</span><br><span class="line">aws_access_key_id = ASIANPOWERHOUSEBLAHBLAH</span><br><span class="line">aws_secret_access_key = aGLMountainLionPIEXL0UK0TunalNB61Kt+GuavaVm4tAD</span><br><span class="line">aws_session_token = FwoGZXIvYXdzEB8aDDuzeYcE5QDFo0 ... z2h/Px7nUMEWaZOZZw==</span><br><span class="line">aws_expiration=2019-11-22T20:33:18.000Z</span><br><span class="line"></span><br><span class="line">𝜆 ssh -i .ssh/aws-key.pem -l ec2-user ec2-3-121-69-96.ap-southeast-2.compute.amazonaws.com</span><br><span class="line">Last login: Fri Nov 22 01:17:33 2019 from 155.144.114.41</span><br><span class="line"></span><br><span class="line">       __|  __|_  )</span><br><span class="line">       _|  (     /   Amazon Linux 2 AMI</span><br><span class="line">      ___|\___|___|</span><br><span class="line"></span><br><span class="line">https://aws.amazon.com/amazon-linux-2/</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>NOTE: Need <strong>ROOT</strong> access key pair <code>ASIANPOWERHOUSEBLAHBLAH</code> above setup in <code>session</code> profile to run <code>aws sts</code> command.</p>
<p>NOTE: <strong>IAM role</strong> for EC2 instance need to have <code>AmazonSSMManagedInstanceCore</code> policy. So create a customised role <code>CustomAmazonSSMManagedInstanceCore</code> in AWS IAM including <code>AmazonSSMManagedInstanceCore</code> policy, and bind this IAM role with EC2 instance, also with security group and key pair.</p>
<p><img src="/blog/img/AWS%20Session%20Manager%20-%20Managed%20instances.png" alt="AWS Session Manager - Managed instances" title="AWS Session Manager - Managed instances"></p>
<ul>
<li>Install all the dependencies<ol>
<li>latest Systems Manager Agent on your EC2 instance; enabled “<strong>Agent auto update</strong>” under Managed Instances in AWS Systems Manager</li>
<li>latest AWS CLI on localhost</li>
<li>latest Session Manager Plugin on localhost, <em><a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html">https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html</a></em></li>
</ol>
</li>
</ul>
<p><img src="/blog/img/AWS%20Session%20Manager%20-%20Agent%20auto%20update.png" alt="AWS Session Manager - Agent auto update" title="AWS Session Manager - Agent auto update"></p>
<ul>
<li>Add customised RunAs users via “Run Command”</li>
</ul>
<p>To elevated <code>SSM_pwr_user</code>, a customised user to allow login EC2 instance, with command:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">𝜆 useradd -g wheel SSM_pwr_user</span><br><span class="line">𝜆 echo &quot;SSM_pwr_user ALL=(ALL) NOPASSWD:ALL&quot; &gt; /etc/sudoers.d/SSM_pwr_user</span><br></pre></td></tr></table></figure>

<p><img src="/blog/img/AWS%20System%20Manager%20-%20Run%20a%20command.png" alt="AWS System Manager - Run a command" title="AWS System Manager - Run a command"></p>
<p>Updated above solution and add a <strong>DIFFERENT</strong> user <code>ssm-user</code>, if SSM throws error “<strong>Unable to start shell: failed to start pty since RunAs user ssm-user does not exist</strong>“:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">𝜆 useradd -g wheel ssm-user</span><br><span class="line">𝜆 echo &quot;ssm-user ALL=(ALL) NOPASSWD:ALL&quot; &gt; /etc/sudoers.d/ssm-agent-users</span><br></pre></td></tr></table></figure>

<ul>
<li>Update SSH config file on localhost to proxy commands through the AWS Session Manager for any EC2 instance id</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">𝜆 cat .ssh/config</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">SSH over Session Manager</span></span><br><span class="line">host i-* mi-*</span><br><span class="line">    ProxyCommand sh -c &quot;aws ssm start-session --target %h --document-name AWS-StartSSHSession --parameters &#x27;portNumber=%p&#x27;&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>Generate session token</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">𝜆 date</span><br><span class="line">Thu 21 Nov 2019 04:33:03 UTC</span><br><span class="line"></span><br><span class="line">𝜆 aws sts get-session-token --duration-seconds 129600 --profile session</span><br><span class="line">&#123;</span><br><span class="line">    &quot;Credentials&quot;: &#123;</span><br><span class="line">        &quot;SecretAccessKey&quot;: &quot;I7brpY8XWDWYwwyUdp5PLq7cxpskuMSHyBtPjPNE&quot;,</span><br><span class="line">        &quot;SessionToken&quot;: &quot;FwoGZXIvYXdzENL//////////wEaDKKdWTVmCrwKRiMbOSKCAbkQr ... YiNntciJszsZVRypXz1HTfa3gbcKoNXHon8=&quot;,</span><br><span class="line">        &quot;Expiration&quot;: &quot;2019-11-22T16:33:12Z&quot;,</span><br><span class="line">        &quot;AccessKeyId&quot;: &quot;ASIASZPQ3TMDVJVIGM7H&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>If AWS user <code>ec2-user</code> has MFA enabled, generate session token like this:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">𝜆 aws sts get-session-token --duration-seconds 129600 --profile session \</span><br><span class="line">    --serial-number arn:aws:iam::910218657901234:mfa/root-account-mfa-device --token-code 251556</span><br></pre></td></tr></table></figure>

<ul>
<li>Add session token in AWS credentials file on localhost, and test</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">𝜆 cat .aws/credentials</span><br><span class="line">[default]</span><br><span class="line">aws_access_key_id = ASIANPOWERHOUSEBLAHBLAH</span><br><span class="line">aws_secret_access_key = aGLMountainLionPIEXL0UK0TunalNB61Kt+GuavaVm4tAD</span><br><span class="line"></span><br><span class="line">[session]</span><br><span class="line">aws_access_key_id = ASIASZPQ3TMDVJVIGM7H</span><br><span class="line">aws_secret_access_key = I7brpY8XWDWYwwyUdp5PLq7cxpskuMSHyBtPjPNE</span><br><span class="line">aws_session_token = FwoGZXIvYXdzENL//////////wEaDKKdWTVmCrwKRiMbOSKCAbkQr ... YiNntciJszsZVRypXz1HTfa3gbcKoNXHon8=</span><br><span class="line">aws_expiration=2019-11-22T20:33:18.000Z</span><br><span class="line"></span><br><span class="line">𝜆 aws ssm start-session --target i-e2f189dashfdf65weqfwda2 --profile session</span><br><span class="line"></span><br><span class="line">Starting session with SessionId: ec2-user-094c34172bdc6fc22</span><br><span class="line">sh-4.2$ whoami</span><br><span class="line">SSM_pwr_user</span><br></pre></td></tr></table></figure>

<ul>
<li>Run Session Manager commands</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">𝜆 aws ssm send-command --instance-ids i-e2f189dashfdf65weqfwda2 --document-name AWS-RunShellScript --comment &quot;IP config&quot; --parameters commands=ifconfig --output text \</span><br><span class="line">    --profile session</span><br><span class="line">COMMAND	39e80533-376e-46fa-bb11-8daf040fe80f	IP config	0	0	AWS-RunShellScript		0	1574377262.9	50	0			1574370062.9		Pending	Pending	1</span><br><span class="line">CLOUDWATCHOUTPUTCONFIG		False</span><br><span class="line">INSTANCEIDS	i-e2f189dashfdf65weqfwda2</span><br><span class="line">NOTIFICATIONCONFIG</span><br><span class="line">COMMANDS	ifconfig</span><br><span class="line"></span><br><span class="line">𝜆 aws ssm list-command-invocations --command-id 39e80533-376e-46fa-bb11-8daf040fe80f --details --profile session</span><br><span class="line">&#123;</span><br><span class="line">    &quot;CommandInvocations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;Comment&quot;: &quot;IP config&quot;,</span><br><span class="line">            &quot;Status&quot;: &quot;Success&quot;,</span><br><span class="line">            &quot;CommandPlugins&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;Status&quot;: &quot;Success&quot;,</span><br><span class="line">                    &quot;ResponseStartDateTime&quot;: 1574370063.609,</span><br><span class="line">                    &quot;StandardErrorUrl&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;OutputS3BucketName&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;OutputS3Region&quot;: &quot;ap-southeast-2&quot;,</span><br><span class="line">                    &quot;OutputS3KeyPrefix&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;ResponseCode&quot;: 0,</span><br><span class="line">                    &quot;Output&quot;: &quot;eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 9001\n        inet 172.31.9.155  netmask 255.255.240.0  broadcast 172.31.15.255\n        inet6 fe80::69:c9ff:fe76:91ae  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 02:69:c9:76:91:ae  txqueuelen 1000  (Ethernet)\n        RX packets 60339  bytes 17254584 (16.4 MiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 56971  bytes 13112880 (12.5 MiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\n&quot;,</span><br><span class="line">                    &quot;ResponseFinishDateTime&quot;: 1574370063.634,</span><br><span class="line">                    &quot;StatusDetails&quot;: &quot;Success&quot;,</span><br><span class="line">                    &quot;StandardOutputUrl&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;Name&quot;: &quot;aws:runShellScript&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            &quot;ServiceRole&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CloudWatchOutputConfig&quot;: &#123;</span><br><span class="line">                &quot;CloudWatchLogGroupName&quot;: &quot;&quot;,</span><br><span class="line">                &quot;CloudWatchOutputEnabled&quot;: false</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;InstanceId&quot;: &quot;i-e2f189dashfdf65weqfwda2&quot;,</span><br><span class="line">            &quot;DocumentName&quot;: &quot;AWS-RunShellScript&quot;,</span><br><span class="line">            &quot;NotificationConfig&quot;: &#123;</span><br><span class="line">                &quot;NotificationArn&quot;: &quot;&quot;,</span><br><span class="line">                &quot;NotificationEvents&quot;: [],</span><br><span class="line">                &quot;NotificationType&quot;: &quot;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;DocumentVersion&quot;: &quot;&quot;,</span><br><span class="line">            &quot;StatusDetails&quot;: &quot;Success&quot;,</span><br><span class="line">            &quot;StandardOutputUrl&quot;: &quot;&quot;,</span><br><span class="line">            &quot;StandardErrorUrl&quot;: &quot;&quot;,</span><br><span class="line">            &quot;InstanceName&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CommandId&quot;: &quot;39e80533-376e-46fa-bb11-8daf040fe80f&quot;,</span><br><span class="line">            &quot;RequestedDateTime&quot;: 1574370062.995</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Open a connection forwarding session to a remote port</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">𝜆 aws ssm start-session --target i-e2f189dashfdf65weqfwda2 --document-name AWS-StartPortForwardingSessionToRemoteHost \</span><br><span class="line">    --parameters &#x27;&#123;&quot;portNumber&quot;:[&quot;3306&quot;],&quot;localPortNumber&quot;:[&quot;13306&quot;],&quot;host&quot;:[&quot;remote-mysql-host-name&quot;]&#125;&#x27; \</span><br><span class="line">    --profile session</span><br><span class="line"></span><br><span class="line">𝜆 mysql -h 127.0.0.1 --port 13306 -u admin -p</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Monitor AWS Session Manager log <code>/var/log/amazon/ssm/amazon-ssm-agent.log</code> on EC2 instance</p>
</li>
<li><p>Test <code>ssh</code> command with session token</p>
</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">𝜆 AWS_PROFILE=session ssh -i .ssh/aws-key.pem -l ec2-user i-e2f189dashfdf65weqfwda2</span><br><span class="line">Last login: Fri Nov 22 00:19:32 2019 from localhost</span><br><span class="line"></span><br><span class="line">       __|  __|_  )</span><br><span class="line">       _|  (     /   Amazon Linux 2 AMI</span><br><span class="line">      ___|\___|___|</span><br><span class="line"></span><br><span class="line">https://aws.amazon.com/amazon-linux-2/</span><br></pre></td></tr></table></figure>

<ul>
<li>Test <code>scp</code> command with session token</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">𝜆 AWS_PROFILE=session scp -i .ssh/aws-key.pem /tmp/stack-overflow.log ec2-user@i-e2f189dashfdf65weqfwda2:/tmp</span><br><span class="line">stack-overflow.log                                          100%   67KB 437.0KB/s   00:00</span><br></pre></td></tr></table></figure>

<p>Without using <code>scp</code>, transferring files directly is not possible with the AWS Session Manager. You should use S3 bucket and the AWS CLI to exchange data.</p>
<ul>
<li>Test <code>ssh</code> tunnel</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">𝜆 AWS_PROFILE=session ssh -i .ssh/aws-key.pem -L 443:www.google.com:443 -l ec2-user@i-e2f189dashfdf65weqfwda2</span><br></pre></td></tr></table></figure>

<h2 id="OKTA"><a href="#OKTA" class="headerlink" title="OKTA"></a>OKTA</h2><p>Set up integrated OKTA authentication with session. Have you OKTA AWS CLI installed at first, and configure it:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">𝜆 cat ~/.okta-aws</span><br><span class="line">[default]</span><br><span class="line">base-url = hello.paradise.org</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># The remaining parameters are optional.</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># You will be prompted for them, if they&#x27;re not included here.</span></span></span><br><span class="line">username = terrence.miao@paradise.org</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Current choices are: GOOGLE or OKTA</span></span><br><span class="line">factor = OKTA</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">AWS role name (match one of the options prompted <span class="keyword">for</span> by <span class="string">&quot;Please select the AWS role&quot;</span> when this parameter is not specified</span></span><br><span class="line">role =</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Found <span class="keyword">in</span> Okta<span class="string">&#x27;s configuration for your AWS account.</span></span></span><br><span class="line">app-link = https://hello.paradise.org/home/amazon_aws/0oa1ch3l6/272</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">duration in seconds to request a session token for, make sure your accounts (both AWS itself and the associated okta application) allow for large durations. default: 3600</span></span></span><br><span class="line">duration = 28800</span><br></pre></td></tr></table></figure>

<p>Create session:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">𝜆 bin/okta/okta --okta-profile default --force --profile session</span><br><span class="line">Enter password:</span><br><span class="line">Multi-factor Authentication required.</span><br><span class="line">Pick a factor:</span><br><span class="line">[ 0 ] Okta Verify App: SmartPhone_Android: ONEPLUS A5010</span><br><span class="line">[ 1 ] token:software:totp( OKTA ) : terrence.miao@paradise.org</span><br><span class="line">Selection: 0</span><br><span class="line">1: arn:aws:iam::994385754915:role/federation/DeveloperPowerUser</span><br><span class="line">2: arn:aws:iam::354184710243:role/federation/DeveloperPowerUser</span><br><span class="line">3: arn:aws:iam::855034721059:role/federation/DeveloperPowerUser</span><br><span class="line">4: arn:aws:iam::944986439712:role/federation/DeveloperPowerUser</span><br><span class="line">5: arn:aws:iam::944986439712:role/federation/Operations</span><br><span class="line">6: arn:aws:iam::015951833499:role/federation/DeveloperPowerUser</span><br><span class="line">Please select the AWS role: 3</span><br><span class="line">Session token expires on: 2019-12-05 06:30:18+00:00</span><br></pre></td></tr></table></figure>

<h2 id="Azure"><a href="#Azure" class="headerlink" title="Azure"></a>Azure</h2><p>Set up integrated Azure authentication with session. Have you AWS Azure CLI installed at first, and configure it:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">𝜆 cat ~/.aws/config</span><br><span class="line">[profile session]</span><br><span class="line">output=json</span><br><span class="line">region=ap-southeast-2</span><br><span class="line">azure_tenant_id=paradise.org</span><br><span class="line">azure_app_id_uri=dac7d48b-7f45-47bb-bdae-d3c4f8351839</span><br><span class="line">azure_default_username=terrence.miao@paradise.org</span><br><span class="line">azure_default_role_arn=arn:aws:iam::994385754915:role/federation/DeveloperPowerUser</span><br><span class="line">azure_default_duration_hours=12</span><br><span class="line">azure_default_remember_me=false</span><br><span class="line"></span><br><span class="line">[profile session-cicd]</span><br><span class="line">output=json</span><br><span class="line">region=ap-southeast-2</span><br><span class="line">role_arn=arn:aws:iam::994385754915:role/ap-sc-iam-cicd-ap-southeast-2</span><br><span class="line">source_profile=session</span><br></pre></td></tr></table></figure>

<p>Create session:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">𝜆 bin/aws-azure-cli/aws-azure-cli --profile session --mode gui</span><br><span class="line">Logging in with profile &#x27;session&#x27;...</span><br><span class="line">Using AWS SAML endpoint https://signin.aws.amazon.com/saml</span><br><span class="line">Looking in /Applications/Google Chrome.app/Contents/MacOS/Google Chrome</span><br><span class="line">Found browser in /Applications/Google Chrome.app/Contents/MacOS/Google Chrome</span><br><span class="line">Please complete the login in the opened window</span><br><span class="line">? Role: arn:aws:iam::994385754915:role/federation/DeveloperPowerUser</span><br><span class="line">? Session Duration Hours (up to 12): 12</span><br><span class="line">Assuming role arn:aws:iam::994385754915:role/federation/DeveloperPowerUser</span><br><span class="line">Requesting session duration 43200s</span><br><span class="line">Session expires Sun Feb 19 2023 06:46:43 GMT+1100 (Australian Eastern Daylight Time)</span><br></pre></td></tr></table></figure>

<p>Login EC2 instance, overwritting default <code>ap-southeast-2</code> region:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">𝜆 aws ssm start-session --target i-04ee902e33625c4f3 --profile session --region us-east-2 --debug</span><br><span class="line">Starting session with SessionId: terrence.miao@paradise.org-05411f2e2d5a58b0b</span><br></pre></td></tr></table></figure>

<p>Attach a new key pair to EC2 instance by:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">𝜆 ssh-keygen -y -f .ssh/aws-key.pem</span><br><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCL ... asasf2qcvASEFWF</span><br></pre></td></tr></table></figure>

<p>Find out EC2 Instance ID by querying Instance Name:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">𝜆 aws ec2 describe-instances --profile session \</span><br><span class="line">    --filter &quot;Name=tag:Name,Values=EC2Stack-Apptier/EC2&quot; \</span><br><span class="line">    --query &quot;Reservations[].Instances[?State.Name == &#x27;running&#x27;].InstanceId[]&quot; \</span><br><span class="line">    --output text</span><br><span class="line">i-04ee902e33625c4f3</span><br></pre></td></tr></table></figure>

<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li>Troubleshooting Systems Manager Run Command, <em><a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/systems-manager/latest/userguide/troubleshooting-remote-commands.html#systems-manager-ssm-agent-log-files">https://docs.aws.amazon.com/systems-manager/latest/userguide/troubleshooting-remote-commands.html#systems-manager-ssm-agent-log-files</a></em></li>
<li>Provides Okta authentication for awscli, <em><a target="_blank" rel="noopener" href="https://github.com/jmhale/okta-awscli">https://github.com/jmhale/okta-awscli</a></em></li>
<li>How to add a new key pair to your exisitng AWS ec2 Instances, <em><a target="_blank" rel="noopener" href="https://www.how2shout.com/linux/add-a-new-key-pair-to-your-exisitng-aws-ec2-instances/">https://www.how2shout.com/linux/add-a-new-key-pair-to-your-exisitng-aws-ec2-instances/</a></em></li>
<li>Use port forwarding in AWS Systems Manager Session Manager to connect to remote hosts, <em><a target="_blank" rel="noopener" href="https://aws.amazon.com/blogs/mt/use-port-forwarding-in-aws-systems-manager-session-manager-to-connect-to-remote-hosts/">https://aws.amazon.com/blogs/mt/use-port-forwarding-in-aws-systems-manager-session-manager-to-connect-to-remote-hosts/</a></em></li>
</ul>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-A-simple-approach-to-export-import-AWS-DynamoDB-table-items" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2019/04/23/A-simple-approach-to-export-import-AWS-DynamoDB-table-items/">A simple approach to export / import AWS DynamoDB table items</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-04-23T08:59:29.000Z" itemprop="datePublished">2019-04-23</time>
</span>
      
      
      
<a href="/blog/2019/04/23/A-simple-approach-to-export-import-AWS-DynamoDB-table-items/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Try to export items from AWS Test environment DynamoDB tables into Production. A simple Bash SHELL script, with a few commands and AWS CLI could do the work.</p>
<ul>
<li>In AWS DynamoDB console, export selected items into .csv file like this:</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">𝜆 cat dws-tile-publisher-ptest-tile.csv</span><br><span class="line">&quot;id (S)&quot;,&quot;available_to (SS)&quot;,&quot;benefit_type (S)&quot;,&quot;category_id (S)&quot;,&quot;created_date (S)&quot;,&quot;created_user (S)&quot;,&quot;description (S)&quot;,&quot;image_bucket (S)&quot;,&quot;image_key (S)&quot;,&quot;last_modified_date (S)&quot;,&quot;last_modified_user (S)&quot;,&quot;status (S)&quot;,&quot;sub_category_id (S)&quot;,&quot;title (S)&quot;,&quot;valid_from (S)&quot;,&quot;valid_to (S)&quot;,&quot;claim_url (S)&quot;,&quot;discount_code (S)&quot;</span><br><span class="line">&quot;950c529b-d6ae-472b-b44a-510ec201c167&quot;,&quot;&#123; &quot;&quot;0b1b9ed4-e171-4eaf-9d20-1a870ab7cc7c&quot;&quot;, &quot;&quot;2df9daf4-da50-4ff9-9322-969d02c178f4&quot;&quot;, &quot;&quot;b6fdcdc7-ffe6-4007-ae56-f5ab545768ec&quot;&quot;, &quot;&quot;bc1c7285-ac47-4d06-b4c6-6f3780cbfb3f&quot;&quot; &#125; &quot;,&quot;DISCOUNT&quot;,&quot;8d27fb2d-c5f8-487a-a869-2ffd0e476eb6&quot;,&quot;2019-04-23T01:02:18.123&quot;,&quot;Angelo.Woods@test.npe.paradise.org&quot;,&quot;Testing descriptions&quot;,&quot;dws-tile-images-ptest&quot;,&quot;Samsung-Galaxy-10-Leak.jpg&quot;,&quot;2019-04-23T01:02:18.125&quot;,&quot;Angelo.Woods@test.npe.paradise.org&quot;,&quot;ARCHIVED&quot;,&quot;6936a6ed-fa97-4439-9129-c43e288011b3&quot;,&quot;Samsung Galaxy 10&quot;,&quot;2019-03-24T01:00&quot;,&quot;2021-02-25T23:00&quot;,&quot;http://www.google.com&quot;,</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">&quot;095cc9b4-fd64-4479-8817-0b35b8ddcbc2&quot;,&quot;&#123; &quot;&quot;0b1b9ed4-e171-4eaf-9d20-1a870ab7cc7c&quot;&quot;, &quot;&quot;2df9daf4-da50-4ff9-9322-969d02c178f4&quot;&quot;, &quot;&quot;b6fdcdc7-ffe6-4007-ae56-f5ab545768ec&quot;&quot;, &quot;&quot;bc1c7285-ac47-4d06-b4c6-6f3780cbfb3f&quot;&quot; &#125; &quot;,&quot;DISCOUNT&quot;,&quot;1f028ecb-4115-4378-b00e-3fcd4cbdf54d&quot;,&quot;2019-04-23T03:50:31.226&quot;,&quot;Angelo.Woods@test.npe.paradise.org&quot;,&quot;&lt;div&gt;Employees now have access to an exclusive member offers portal through the Samsung Employee Purchase program. Get up to 35% off the RRP across a wide range of products including mobile phones, tablets, televisions, refrigerators, washing machines, monitors and more.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;&quot;,&quot;dws-tile-images-ptest&quot;,&quot;samsung.jpg&quot;,&quot;2019-04-23T03:50:31.228&quot;,&quot;Angelo.Woods@test.npe.paradise.org&quot;,&quot;PUBLISHED&quot;,&quot;ce07c19b-dd87-4890-9ad3-6acfe0998496&quot;,&quot;Samsung&quot;,&quot;2019-04-17T01:00&quot;,&quot;2025-01-01T23:00&quot;,&quot;https://shop.samsung.com/au/multistore/auepp/austpost_au/&quot;,&quot;Simply go to link provided to access the site. Browse our categories, add your products to cart and checkout. Happy Shopping! &quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>Generate a key:value hashtable used later. Key is “id” column, value is “image_key” colomn:</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">𝜆 awk -F&quot;\&quot;,\&quot;&quot; &#x27;&#123;print $1 &quot;:&quot; $9 &quot;\&quot;&quot;&#125;&#x27; dws-tile-publisher-test-tile.csv | sed &#x27;s/jpg/json/&#x27; | sed &#x27;s/png/json/&#x27; | sed -n &#x27;1d;p&#x27;</span><br><span class="line">&quot;950c529b-d6ae-472b-b44a-510ec201c167:Samsung-Galaxy-10-Leak.json&quot;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">&quot;095cc9b4-fd64-4479-8817-0b35b8ddcbc2:samsung.json&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>Run the bash script and retrieve item from AWS DyanmoDB table, tranform it and output into a JSON file for import into AWS Production production table:</li>
</ul>
<script src="https://gist.github.com/TerrenceMiao/de10c70aa6adf212fae6e9fc4d63c025.js"></script>

<ul>
<li>A generated JSON file looks like this:</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">𝜆 cat Samsung-Galaxy-10-Leak.json</span><br><span class="line">&#123;</span><br><span class="line">    &quot;status&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;PUBLISHED&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;valid_from&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;2019-03-24T01:00&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;sub_category_id&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;6936a6ed-fa97-4439-9129-c43e288011b3&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;description&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;Testing descriptions&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;image_key&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;Samsung-Galaxy-10-Leak.jpg&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;claim_url&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;http://www.google.com&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;last_modified_date&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;2019-04-23T01:02:18.125&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;valid_to&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;2021-02-25T23:00&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;created_user&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;Noel.French@paradise.org&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;benefit_type&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;DISCOUNT&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;last_modified_user&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;Noel.French@paradise.org&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;created_date&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;2019-04-23T01:02:18.123&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;title&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;Samsung Galaxy 10&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;category_id&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;8d27fb2d-c5f8-487a-a869-2ffd0e476eb6&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;image_bucket&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;dws-tile-images-prod&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;id&quot;: &#123;</span><br><span class="line">        &quot;S&quot;: &quot;950c529b-d6ae-472b-b44a-510ec201c167&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;available_to&quot;: &#123;</span><br><span class="line">        &quot;SS&quot;: [</span><br><span class="line">            &quot;0b1b9ed4-e171-4eaf-9d20-1a870ab7cc7c&quot;,</span><br><span class="line">            &quot;2df9daf4-da50-4ff9-9322-969d02c178f4&quot;,</span><br><span class="line">            &quot;b6fdcdc7-ffe6-4007-ae56-f5ab545768ec&quot;,</span><br><span class="line">            &quot;bc1c7285-ac47-4d06-b4c6-6f3780cbfb3f&quot;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Now run the bash script and import JSON file into AWS Production DynamoDB table:</li>
</ul>
<script src="https://gist.github.com/TerrenceMiao/c61f7721fe9721d7f6983cce821e7929.js"></script>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Keep-running" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2019/01/11/Keep-running/">Keep running</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-01-11T00:27:56.000Z" itemprop="datePublished">2019-01-11</time>
</span>
      
      
      
<a href="/blog/2019/01/11/Keep-running/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>许多杰出的人物都是长跑爱好者，比如阿兰·图灵。</p>
<p>图灵的头衔有很多，传奇性的数学家、逻辑学家、现代计算机之父。但很少人知道他也是一位出色的跑者，甚至差点站上了奥运会的舞台。</p>
<p>图灵从中学就开始跑步，但直到 30 多岁才正式进行长跑训练。</p>
<p>跑道上的图灵“大器晚成”，出色的运动天赋丝毫不逊色于他的头脑。</p>
<p>14 岁那年，他在谢伯恩寄宿高中就读的第一日，由于大罢工，当地的公共交通设施全部停运。图灵没有等到交通恢复，就从南安普敦一口气骑行 96 公里到达位于多塞特郡西北的学校上学，引发全校轰动。</p>
<p>1931 年，当他进入剑桥国王学院学习时，他曾多次在学校和伊利镇之间进行折返跑，一个来回就差不多 50 公里。</p>
<p>1947 年，在莱斯特郡拉夫堡（Loughborough）大学体育场举行的英国业余田径协会马拉松锦标赛上，图灵跑出了他在马拉松赛中的个人最好成绩 2 小时 46 分 03 秒，在那场比赛中名列第五。</p>
<p>在 1948 年伦敦的奥运会马拉松比赛上，当时冠军的成绩是 2 小时 34 分 52 秒。图灵仅比金牌得主慢了 11 分钟。而据英国《泰晤士报》报道，图灵的最好成绩在当年（1947年）足以排名世界前三。</p>
<p><img src="https://therunnereclectic.files.wordpress.com/2014/11/alan-turing-running.jpg" alt="Alan Turning running" title="Alan Turning running"></p>
<p>When Alan Turing was asked why he punished himself so much in training. He said “I have such a stressful job that the only way I can get it out of my mind is by running hard; its the only way I can get some release.”</p>
<p>奥斯卡最佳改编剧本电影《模仿游戏》The Imitation Game 是根据他的传记《Alan Turing: The Enigma》拍摄的。</p>
<p><img src="https://img01.mgo-images.com/image/thumbnail/v2/content/MMV23F9EE71557457EFE04D2B6E4DBBA320A.jpeg" alt="The Imitation Game" title="The Imitation Game"></p>
<p><img src="https://static.gamesurf.it/immagini/2014/11272/big/the_imitation_game_584289.jpg" alt="Movie scene: Alan Turning running" title="Movie scene: Alan Turning running"></p>
<p>苹果公司的商标一度被误认为是源于图灵自杀时咬下的苹果，但该图案的设计师和苹果公司都否认这一说法。</p>
<p>Stephen Fry said on the BBC show QI XL in 2011 that his friend Steve Jobs said of the Turing tale, “It isn’t true, but God we wish it were!”</p>
<p>乔布斯被英国广播公司电视节目《QI》主持人史蒂芬·弗莱问到此事时说：“这（LOGO 向图灵致敬）不是真的，但是上帝啊，我们希望它是真的。”</p>
<p><img src="https://www.fineprintart.com/images/blog/history-of-apple-logo/Apple-Logo-by-Rob-Janoff.svg" alt="&quot;Apple logo&quot;" title="Apple logo"></p>
<p>Keep running.</p>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Add-final-and-javadoc-for-auto-generated-getters-and-setters-in-IntelliJ" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2019/01/11/Add-final-and-javadoc-for-auto-generated-getters-and-setters-in-IntelliJ/">Add final and javadoc for auto-generated getters and setters in IntelliJ</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-01-10T23:29:06.000Z" itemprop="datePublished">2019-01-11</time>
</span>
      
      
      
<a href="/blog/2019/01/11/Add-final-and-javadoc-for-auto-generated-getters-and-setters-in-IntelliJ/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Default-final-modifier"><a href="#Default-final-modifier" class="headerlink" title="Default final modifier"></a>Default final modifier</h2><p>To satisfy Checkstyle setup. In IntelliJ (version 2018.3.2) Preferences | Editor &gt; Code Style &gt; Java, select “Code Generation” tab, check “Make generated parameters final”</p>
<p><img src="/blog/img/IntelliJ%20-%20final%20modifier.png" alt="Final Modifier" title="Final Modifier"></p>
<h2 id="javadoc-for-auto-generated-getters-and-setters"><a href="#javadoc-for-auto-generated-getters-and-setters" class="headerlink" title="javadoc for auto-generated getters and setters"></a>javadoc for auto-generated getters and setters</h2><p>Create customised Getter Template:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* Gets $field.name.</span><br><span class="line">*</span><br><span class="line">* @return value of $field.name</span><br><span class="line">*/</span><br><span class="line">#if($field.modifierStatic)</span><br><span class="line">static ##</span><br><span class="line">#end</span><br><span class="line">$field.type ##</span><br><span class="line">#set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))</span><br><span class="line">#if ($field.boolean &amp;&amp; $field.primitive)</span><br><span class="line">    is##</span><br><span class="line">#else</span><br><span class="line">    get##</span><br><span class="line">#end</span><br><span class="line">$&#123;name&#125;() &#123;</span><br><span class="line">    return $field.name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/blog/img/IntelliJ%20-%20Getter%20Template.png" alt="Getter Template" title="Getter Template"></p>
<p>Create customised Setter Template:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* Sets $field.name.</span><br><span class="line">*</span><br><span class="line">* @param $field.name value of $field.name</span><br><span class="line">*/</span><br><span class="line">#set($paramName = $helper.getParamName($field, $project))</span><br><span class="line">#if($field.modifierStatic)</span><br><span class="line">static ##</span><br><span class="line">#end</span><br><span class="line">void set$StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project)))($field.type $paramName) &#123;</span><br><span class="line">#if ($field.name == $paramName)</span><br><span class="line">    #if (!$field.modifierStatic)</span><br><span class="line">    this.##</span><br><span class="line">    #else</span><br><span class="line">        $classname.##</span><br><span class="line">    #end</span><br><span class="line">#end</span><br><span class="line">$field.name = $paramName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/blog/img/IntelliJ%20-%20Setter%20Template.png" alt="Setter Template" title="Setter Template"></p>
<p>Use the customised Getter and Setter templates when automatically generate getters and setters:</p>
<p><img src="/blog/img/IntelliJ%20-%20auto-generated%20getters%20setters.png" alt="auto-generated getters setters" title="auto-generated getters setters"></p>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Year-2018-in-the-Rear-View-Mirror" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2019/01/01/Year-2018-in-the-Rear-View-Mirror/">Year 2018 in the Rear View Mirror</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-12-31T13:46:43.000Z" itemprop="datePublished">2019-01-01</time>
</span>
      
      
      
<a href="/blog/2019/01/01/Year-2018-in-the-Rear-View-Mirror/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>2018 是一个让人敬畏恐惧“逢八必变”的年份。2018 是过去十年中最糟糕的一年，但也许是未来十年里最好的一年。</p>
<p>2018 年过去了，我很怀念它。</p>
<p><img src="/blog/img/Year%202018%20-%2001.jpg" alt="Year 2018 - 01" title="Year 2018 - 01"></p>
<p>图 1：2018 年是在过去十年中唯一的各项投资都为负增长的一年。</p>
<p><img src="/blog/img/Year%202018%20-%2002.jpg" alt="Year 2018 - 02" title="Year 2018 - 02"></p>
<p>图2：美国股市进入下半年一直跌跌不休。但在 Boxing Day 却创造了单日涨幅的纪录。</p>
<p><img src="/blog/img/Year%202018%20-%2003.jpg" alt="Year 2018 - 03" title="Year 2018 - 03"></p>
<p>图 3：黎曼 Zeta 函数，用于计算素数分布。2018 年多人声称证明了百年未解决的黎曼猜想，但最终都是闹剧收场。黎曼猜想依然有如最为壮美，巍峨，险峻的奇山，矗立在人类的智力巅峰之上。</p>
<p><img src="/blog/img/Year%202018%20-%2004.jpg" alt="Year 2018 - 04" title="Year 2018 - 04"></p>
<p>图 4：The cost of living，city by city。生活有多贵？中国六城市入选全球生活成本最昂贵的 top 25 list.</p>
<p><img src="/blog/img/Year%202018%20-%2005.jpg" alt="Year 2018 - 05" title="Year 2018 - 05"></p>
<p>图 5：肯尼亚的 Eliud Kipchoge 在 2018 年柏林马拉松上创造的 2 小时 1 分 39 秒的马拉松世界纪录。人类仍然在试图突破 2 小时完成马拉松的运动极限。</p>
<p><img src="/blog/img/Year%202018%20-%2006.jpg" alt="Year 2018 - 06" title="Year 2018 - 06"></p>
<p>图 6：中国·上海</p>
<p><img src="/blog/img/Year%202018%20-%2007.jpg" alt="Year 2018 - 07" title="Year 2018 - 07"></p>
<p>图 7：Chinese President Xi Jinping,centre, arrives with Premier Li Keqiang, left, for the opening session of the Chinese People’s Political Consultative Conference in Beijing’s Great Hall of the People on March 3, 2018.</p>
<p><img src="/blog/img/Year%202018%20-%2008.jpg" alt="Year 2018 - 08" title="Year 2018 - 08"></p>
<p>图 8：Chinese President Xi Jinping Speech.</p>
<p><img src="/blog/img/Year%202018%20-%2009.jpg" alt="Year 2018 - 09" title="Year 2018 - 09"></p>
<p>图 9：在 2018 年 Pantone Colour of the year，Ultra Violet 紫外光后，潘通子给出 2019 年度流行色 Living Coral  珊瑚橙。</p>
<p><img src="/blog/img/Year%202018%20-%2010.jpg" alt="Year 2018 - 10" title="Year 2018 - 10"></p>
<p>图 10：2018 年度汉字，由 “穷” 和 “丑” 合体所组成，读音是 “qiou”（音同糗），即又穷又丑的意思。不少网友表示，这字应该念 “wo”（我）。</p>
<p><img src="/blog/img/Year%202018%20-%2011.jpg" alt="Year 2018 - 11" title="Year 2018 - 11"></p>
<p>图 11：电影《甲方乙方》的结局。杨立新走到雪地里，抬起头，和每个普通人都一样，要继续面对风雪。屋子里面是红灯笼，亮堂堂的。外面已经是冷色调了。外面就是现实的生活。</p>
<p>“我很怀念它”，经历越多，这句话带来的感触就越厚重。</p>
<p>时间，梦想和爱，都是如此。</p>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Step-by-step-run-Kafka-on-Mac" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2018/12/10/Step-by-step-run-Kafka-on-Mac/">Step by step run Kafka on Mac</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-12-10T04:45:51.000Z" itemprop="datePublished">2018-12-10</time>
</span>
      
      
      
<a href="/blog/2018/12/10/Step-by-step-run-Kafka-on-Mac/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li><p>Download Kafka binary file from <em><a target="_blank" rel="noopener" href="https://kafka.apache.org/downloads">https://kafka.apache.org/downloads</a></em> and install it</p>
</li>
<li><p>Set up Kafka listen on <strong>PLAINTEXT:&#x2F;&#x2F;localhost:9092</strong></p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">terrence@igloo /usr/local/kafka</span><br><span class="line">15:51:25 𝜆 diff config/server.properties config/server.properties.orig</span><br><span class="line">31c31</span><br><span class="line">&lt; listeners=PLAINTEXT://localhost:9092</span><br><span class="line">---</span><br><span class="line">&gt; <span class="comment">#listeners=PLAINTEXT://:9092</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Start Zookeeper</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">igloo:kafka root<span class="comment"># bin/zookeeper-server-start.sh config/zookeeper.properties</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Start Kafka</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">igloo:kafka root<span class="comment"># bin/kafka-server-start.sh config/server.properties</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Create a new Kafka topic named “test”</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">igloo:kafka root<span class="comment"># bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Initialise Producer in Console</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">terrence@igloo /usr/local/kafka_2.12-2.1.0</span><br><span class="line">16:04:19 𝜆 bin/kafka-console-producer.sh --broker-list localhost:9092 --topic <span class="built_in">test</span></span><br><span class="line">&gt;Hello World</span><br><span class="line">&gt;Wow</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>Initialize Consumer in Console to receive the messages</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">terrence@igloo /usr/local/kafka_2.12-2.1.0</span><br><span class="line">16:06:11 𝜆 bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic <span class="built_in">test</span> --from-beginning</span><br><span class="line">Hello World</span><br><span class="line">Wow</span><br></pre></td></tr></table></figure>

<p>Run Kafka Manager, an UI tool for managing Kafka.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">terrence@igloo ~/bin/kafka-manager-1.3.3.18</span><br><span class="line">16:16:47 𝜆 <span class="built_in">env</span> ZK_HOSTS=<span class="string">&quot;localhost:2181&quot;</span> bin/kafka-manager</span><br></pre></td></tr></table></figure>

<p>Then visit <em><a target="_blank" rel="noopener" href="http://localhost:9000/">http://localhost:9000</a></em></p>
<p>Create a Kafka cluster at first:</p>
<p><img src="/blog/img/Kafka%20Cluster.png" alt="Kafka Cluster" title="Kafka Cluster"></p>
<p>Visit “test” topic in Kafka cluster:</p>
<p><img src="/blog/img/Kafka%20Manager.png" alt="Kafka Manager" title="Kafka Manager"></p>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-This-is-how-I-feel-when-my-code-runs-without-a-single-bug" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2018/12/07/This-is-how-I-feel-when-my-code-runs-without-a-single-bug/">This is how I feel when my code runs without a single bug</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-12-06T21:35:50.000Z" itemprop="datePublished">2018-12-07</time>
</span>
      
      
      
<a href="/blog/2018/12/07/This-is-how-I-feel-when-my-code-runs-without-a-single-bug/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="https://lh3.googleusercontent.com/7WmOU85cMfllK056ZWJQ_ffILt0z3AQTOHhv9WDXmEUuzAePf_XFb8Kk2PvqPmjpJpldKK33fFTMLz49jNsRygrmExaRvzPZXrbGUHwrCnhig7ll8Acr_zm8mZo-2h_E5IYw_sFDsSafCcfv8NfVc7mnv_Vt6Vm3sPUGsDADaADySvnHw2P-EV935D7N6B9Eb8w9iJV-9mP1rsvjOBwHFTC-shj5LGuxrdDk628b4spTrRqlj-E-poJN0Ja90gjTn2Y_327m9d7YjDcNtU_m8dscEW1atVqshFQGjPffvrzni7BOwrDRL4c5ec4JF88bh6L9v2t_hs9UV84EAQon8ef0lVAdHGMAEHv0ji82n8Hz9v2iJhIVsu-vYBp3z7VJ04C1xQkdCK1Cj1Hjo78p-dCTL4fwnR4T-SZvfjUzvN2sTitZbBp0mMFPshB4TBg1MEDSUovVz2cd1JqR4sSM5ZAx-h4N1CqXhYXUNICRHE9ThYKZ2Oe9Pf27CRnA5mcmJkKHN8BQUM8Q1454lYKk3osfg-hoAPnowQh4bjJV8VfsdiGD5lHeVnj_F9u-ifJo_kX_lCYeyiXFES71m3U4lFzaUWJQiR5QbewKWbjtoMuoxe0mh4VkWCIP8TNh7OCWlAWmAdPexblCKiw9Zy38Bk8Mdg=w460-h266-no" alt="This is how I feel when my code runs without a single bug" title="This is how I feel when my code runs without a single bug"></p>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Bind-customised-KeyStore-TrustStore-and-PoolingHttpClientConnectionManager-in-Apache-Camel" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2018/12/03/Bind-customised-KeyStore-TrustStore-and-PoolingHttpClientConnectionManager-in-Apache-Camel/">Bind customised KeyStore,TrustStore and PoolingHttpClientConnectionManager in Apache Camel</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-12-03T07:54:16.000Z" itemprop="datePublished">2018-12-03</time>
</span>
      
      
      
<a href="/blog/2018/12/03/Bind-customised-KeyStore-TrustStore-and-PoolingHttpClientConnectionManager-in-Apache-Camel/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>In Apache HTTPClient 4.x, PoolingHttpClientConnectionManager and BasicHttpClientConnectionManager can be used as Connection Managers for HTTP Client. By default, above two Connection Managers load <strong>cacerts</strong> trust store, from $JRE_HOME&#x2F;lib&#x2F;security directory, not programmatically specified.</p>
<p>Since Apache Camel starts supporting HTTP4 Component, camel-http4 is using Apache HTTPClient 4.x. The following is a solution how to customise PoolingHttpClientConnectionManager and SSLContext to use specified KeyStore and TrustStore.</p>
<script src="https://gist.github.com/TerrenceMiao/fefc0d10359146c3612fde33046b95d0.js"></script>

<p>In <strong>application.properties</strong> file defined environment specified KeyStore and TrustStore:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">keystore.location=classpath:certificates/client-certs.jks</span><br><span class="line">keystore.password=client123</span><br><span class="line">truststore.location=classpath:certificates/trusted-cacerts.jks</span><br><span class="line">truststore.password=changeit</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>Without Connection Managers like PoolingHttpClientConnectionManager and BasicHttpClientConnectionManager in Apache HTTPClient 4.x, Apache Camel Route can be written in this way, binding programmatically specified KeyStore and TrustStore.</p>
<script src="https://gist.github.com/TerrenceMiao/ecdb7cb674887a7f82199ac880987224.js"></script>

<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li>Apache Camel HTTP4 Component, <em><a target="_blank" rel="noopener" href="http://camel.apache.org/http4.html">http://camel.apache.org/http4.html</a></em></li>
<li>Java SSL with Multiple KeyStores, <em><a target="_blank" rel="noopener" href="http://codyaray.com/2013/04/java-ssl-with-multiple-keystores">http://codyaray.com/2013/04/java-ssl-with-multiple-keystores</a></em></li>
<li>Multiple Keystores in Apache Camel&#x2F;HttpClient, <em><a target="_blank" rel="noopener" href="http://codyaray.com/2013/05/multiple-keystores-in-apache-camelhttpclient">http://codyaray.com/2013/05/multiple-keystores-in-apache-camelhttpclient</a></em></li>
</ul>

        
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          


        </div>
      
      
      
    </footer>
  </div>
</article>



    <nav id="page-nav">

<a class="extend prev" rel="prev" href="/blog/page/3/">Previous</a><a class="page-number" href="/blog/">1</a><a class="page-number" href="/blog/page/2/">2</a><a class="page-number" href="/blog/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/blog/page/5/">5</a><a class="page-number" href="/blog/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/10/">10</a><a class="extend next" rel="next" href="/blog/page/5/">Next</a>
</nav>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-posts"></i> Recent</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2024/05/17/How-to-upgrade-Synology-NAS-network-from-1Gbps-to-2-5Gbps/">How to upgrade Synology NAS network from 1Gbps to 2.5Gbps</a>
          </li>
        
          <li>
            <a href="/blog/2024/05/03/How-to-team-network-link-aggregation-in-Windows-11/">How to team network (link aggregation) in Windows 11</a>
          </li>
        
          <li>
            <a href="/blog/2024/04/26/Step-by-step-root-OnePlus-5T/">Step by step root OnePlus 5T</a>
          </li>
        
          <li>
            <a href="/blog/2023/12/17/Upscayl-AI-Image-Upscaler/">Upscayl - AI Image Upscaler</a>
          </li>
        
          <li>
            <a href="/blog/2023/11/24/OpenSSH-Server-for-Windows/">OpenSSH Server for Windows</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-archive"></i> Archive</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2024/">2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/">2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/">2022</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/">2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/">2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/">2019</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/">2018</a><span class="archive-list-count">31</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/">2017</a><span class="archive-list-count">25</span></li></ul>
    </div>
  </div>


  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-link"></i> Blogroll</h3>
    <div class="widget">
      <ul>
      
        <li>
          <a target="_blank" rel="noopener" href="https://www.linkedin.com/in/terrencemiao/">LinkedIn</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="https://github.com/TerrenceMiao">GitHub</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="https://twitter.com/TerrenceMiao">Twitter</a>
        </li>
      
      </ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <a id="totop" href="#top"></a>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        <a href="/blog/sitemap.xml">Site Map</a>
        <span> | </span><a href="/blog/atom.xml">Subscribe to this site</a>
        <span> | </span><a href="/blog/about/">Contact the blogger</a>
      </p>
      
        <p>
          <i class="fa fa-visitors"></i>
          <i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>
          ，
          <i class="fa fa-views"></i>
          <i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>
        </p>
      
      <p>
        <span>Copyright &copy; 2024 Terrence Miao.</span>
        <span>Theme by <a href="https://github.com/chaooo/hexo-theme-BlueLake/" target="_blank">BlueLake.</a></span>
        <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo.</a></span>
      </p>
    </div>
  </div>
</footer>

    </div>
  </div>
  
<script src="/blog/js/jquery-3.4.1.min.js"></script>


<script src="/blog/js/search.json.js"></script>


  
<script src="/blog/fancybox/jquery.fancybox.min.js"></script>




<script src="/blog/js/script.js"></script>






  
<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>








  



  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>
  <script src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML" async type="text/javascript"></script>

</body>
</html>